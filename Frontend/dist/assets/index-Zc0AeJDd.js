(function(){const u=document.createElement("link").relList;if(u&&u.supports&&u.supports("modulepreload"))return;for(const f of document.querySelectorAll('link[rel="modulepreload"]'))m(f);new MutationObserver(f=>{for(const p of f)if(p.type==="childList")for(const g of p.addedNodes)g.tagName==="LINK"&&g.rel==="modulepreload"&&m(g)}).observe(document,{childList:!0,subtree:!0});function i(f){const p={};return f.integrity&&(p.integrity=f.integrity),f.referrerPolicy&&(p.referrerPolicy=f.referrerPolicy),f.crossOrigin==="use-credentials"?p.credentials="include":f.crossOrigin==="anonymous"?p.credentials="omit":p.credentials="same-origin",p}function m(f){if(f.ep)return;f.ep=!0;const p=i(f);fetch(f.href,p)}})();var Xo={exports:{}},Zs={},qo={exports:{}},Je={};var Oc;function Sf(){if(Oc)return Je;Oc=1;var l=Symbol.for("react.element"),u=Symbol.for("react.portal"),i=Symbol.for("react.fragment"),m=Symbol.for("react.strict_mode"),f=Symbol.for("react.profiler"),p=Symbol.for("react.provider"),g=Symbol.for("react.context"),b=Symbol.for("react.forward_ref"),w=Symbol.for("react.suspense"),R=Symbol.for("react.memo"),P=Symbol.for("react.lazy"),j=Symbol.iterator;function z(y){return y===null||typeof y!="object"?null:(y=j&&y[j]||y["@@iterator"],typeof y=="function"?y:null)}var K={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},J=Object.assign,ee={};function D(y,M,Ie){this.props=y,this.context=M,this.refs=ee,this.updater=Ie||K}D.prototype.isReactComponent={},D.prototype.setState=function(y,M){if(typeof y!="object"&&typeof y!="function"&&y!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,y,M,"setState")},D.prototype.forceUpdate=function(y){this.updater.enqueueForceUpdate(this,y,"forceUpdate")};function k(){}k.prototype=D.prototype;function _(y,M,Ie){this.props=y,this.context=M,this.refs=ee,this.updater=Ie||K}var X=_.prototype=new k;X.constructor=_,J(X,D.prototype),X.isPureReactComponent=!0;var se=Array.isArray,ne=Object.prototype.hasOwnProperty,Y={current:null},ue={key:!0,ref:!0,__self:!0,__source:!0};function C(y,M,Ie){var T,L={},F=null,ce=null;if(M!=null)for(T in M.ref!==void 0&&(ce=M.ref),M.key!==void 0&&(F=""+M.key),M)ne.call(M,T)&&!ue.hasOwnProperty(T)&&(L[T]=M[T]);var me=arguments.length-2;if(me===1)L.children=Ie;else if(1<me){for(var te=Array(me),ge=0;ge<me;ge++)te[ge]=arguments[ge+2];L.children=te}if(y&&y.defaultProps)for(T in me=y.defaultProps,me)L[T]===void 0&&(L[T]=me[T]);return{$$typeof:l,type:y,key:F,ref:ce,props:L,_owner:Y.current}}function O(y,M){return{$$typeof:l,type:y.type,key:M,ref:y.ref,props:y.props,_owner:y._owner}}function E(y){return typeof y=="object"&&y!==null&&y.$$typeof===l}function fe(y){var M={"=":"=0",":":"=2"};return"$"+y.replace(/[=:]/g,function(Ie){return M[Ie]})}var xe=/\/+/g;function de(y,M){return typeof y=="object"&&y!==null&&y.key!=null?fe(""+y.key):M.toString(36)}function ke(y,M,Ie,T,L){var F=typeof y;(F==="undefined"||F==="boolean")&&(y=null);var ce=!1;if(y===null)ce=!0;else switch(F){case"string":case"number":ce=!0;break;case"object":switch(y.$$typeof){case l:case u:ce=!0}}if(ce)return ce=y,L=L(ce),y=T===""?"."+de(ce,0):T,se(L)?(Ie="",y!=null&&(Ie=y.replace(xe,"$&/")+"/"),ke(L,M,Ie,"",function(ge){return ge})):L!=null&&(E(L)&&(L=O(L,Ie+(!L.key||ce&&ce.key===L.key?"":(""+L.key).replace(xe,"$&/")+"/")+y)),M.push(L)),1;if(ce=0,T=T===""?".":T+":",se(y))for(var me=0;me<y.length;me++){F=y[me];var te=T+de(F,me);ce+=ke(F,M,Ie,te,L)}else if(te=z(y),typeof te=="function")for(y=te.call(y),me=0;!(F=y.next()).done;)F=F.value,te=T+de(F,me++),ce+=ke(F,M,Ie,te,L);else if(F==="object")throw M=String(y),Error("Objects are not valid as a React child (found: "+(M==="[object Object]"?"object with keys {"+Object.keys(y).join(", ")+"}":M)+"). If you meant to render a collection of children, use an array instead.");return ce}function Ue(y,M,Ie){if(y==null)return y;var T=[],L=0;return ke(y,T,"","",function(F){return M.call(Ie,F,L++)}),T}function $e(y){if(y._status===-1){var M=y._result;M=M(),M.then(function(Ie){(y._status===0||y._status===-1)&&(y._status=1,y._result=Ie)},function(Ie){(y._status===0||y._status===-1)&&(y._status=2,y._result=Ie)}),y._status===-1&&(y._status=0,y._result=M)}if(y._status===1)return y._result.default;throw y._result}var Ee={current:null},B={transition:null},ae={ReactCurrentDispatcher:Ee,ReactCurrentBatchConfig:B,ReactCurrentOwner:Y};function Q(){throw Error("act(...) is not supported in production builds of React.")}return Je.Children={map:Ue,forEach:function(y,M,Ie){Ue(y,function(){M.apply(this,arguments)},Ie)},count:function(y){var M=0;return Ue(y,function(){M++}),M},toArray:function(y){return Ue(y,function(M){return M})||[]},only:function(y){if(!E(y))throw Error("React.Children.only expected to receive a single React element child.");return y}},Je.Component=D,Je.Fragment=i,Je.Profiler=f,Je.PureComponent=_,Je.StrictMode=m,Je.Suspense=w,Je.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=ae,Je.act=Q,Je.cloneElement=function(y,M,Ie){if(y==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+y+".");var T=J({},y.props),L=y.key,F=y.ref,ce=y._owner;if(M!=null){if(M.ref!==void 0&&(F=M.ref,ce=Y.current),M.key!==void 0&&(L=""+M.key),y.type&&y.type.defaultProps)var me=y.type.defaultProps;for(te in M)ne.call(M,te)&&!ue.hasOwnProperty(te)&&(T[te]=M[te]===void 0&&me!==void 0?me[te]:M[te])}var te=arguments.length-2;if(te===1)T.children=Ie;else if(1<te){me=Array(te);for(var ge=0;ge<te;ge++)me[ge]=arguments[ge+2];T.children=me}return{$$typeof:l,type:y.type,key:L,ref:F,props:T,_owner:ce}},Je.createContext=function(y){return y={$$typeof:g,_currentValue:y,_currentValue2:y,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},y.Provider={$$typeof:p,_context:y},y.Consumer=y},Je.createElement=C,Je.createFactory=function(y){var M=C.bind(null,y);return M.type=y,M},Je.createRef=function(){return{current:null}},Je.forwardRef=function(y){return{$$typeof:b,render:y}},Je.isValidElement=E,Je.lazy=function(y){return{$$typeof:P,_payload:{_status:-1,_result:y},_init:$e}},Je.memo=function(y,M){return{$$typeof:R,type:y,compare:M===void 0?null:M}},Je.startTransition=function(y){var M=B.transition;B.transition={};try{y()}finally{B.transition=M}},Je.unstable_act=Q,Je.useCallback=function(y,M){return Ee.current.useCallback(y,M)},Je.useContext=function(y){return Ee.current.useContext(y)},Je.useDebugValue=function(){},Je.useDeferredValue=function(y){return Ee.current.useDeferredValue(y)},Je.useEffect=function(y,M){return Ee.current.useEffect(y,M)},Je.useId=function(){return Ee.current.useId()},Je.useImperativeHandle=function(y,M,Ie){return Ee.current.useImperativeHandle(y,M,Ie)},Je.useInsertionEffect=function(y,M){return Ee.current.useInsertionEffect(y,M)},Je.useLayoutEffect=function(y,M){return Ee.current.useLayoutEffect(y,M)},Je.useMemo=function(y,M){return Ee.current.useMemo(y,M)},Je.useReducer=function(y,M,Ie){return Ee.current.useReducer(y,M,Ie)},Je.useRef=function(y){return Ee.current.useRef(y)},Je.useState=function(y){return Ee.current.useState(y)},Je.useSyncExternalStore=function(y,M,Ie){return Ee.current.useSyncExternalStore(y,M,Ie)},Je.useTransition=function(){return Ee.current.useTransition()},Je.version="18.3.1",Je}var Uc;function ci(){return Uc||(Uc=1,qo.exports=Sf()),qo.exports}var zc;function kf(){if(zc)return Zs;zc=1;var l=ci(),u=Symbol.for("react.element"),i=Symbol.for("react.fragment"),m=Object.prototype.hasOwnProperty,f=l.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,p={key:!0,ref:!0,__self:!0,__source:!0};function g(b,w,R){var P,j={},z=null,K=null;R!==void 0&&(z=""+R),w.key!==void 0&&(z=""+w.key),w.ref!==void 0&&(K=w.ref);for(P in w)m.call(w,P)&&!p.hasOwnProperty(P)&&(j[P]=w[P]);if(b&&b.defaultProps)for(P in w=b.defaultProps,w)j[P]===void 0&&(j[P]=w[P]);return{$$typeof:u,type:b,key:z,ref:K,props:j,_owner:f.current}}return Zs.Fragment=i,Zs.jsx=g,Zs.jsxs=g,Zs}var Gc;function Cf(){return Gc||(Gc=1,Xo.exports=kf()),Xo.exports}var r=Cf(),c=ci(),il={},Zo={exports:{}},cr={},ei={exports:{}},ti={};var Bc;function Pf(){return Bc||(Bc=1,(function(l){function u(B,ae){var Q=B.length;B.push(ae);e:for(;0<Q;){var y=Q-1>>>1,M=B[y];if(0<f(M,ae))B[y]=ae,B[Q]=M,Q=y;else break e}}function i(B){return B.length===0?null:B[0]}function m(B){if(B.length===0)return null;var ae=B[0],Q=B.pop();if(Q!==ae){B[0]=Q;e:for(var y=0,M=B.length,Ie=M>>>1;y<Ie;){var T=2*(y+1)-1,L=B[T],F=T+1,ce=B[F];if(0>f(L,Q))F<M&&0>f(ce,L)?(B[y]=ce,B[F]=Q,y=F):(B[y]=L,B[T]=Q,y=T);else if(F<M&&0>f(ce,Q))B[y]=ce,B[F]=Q,y=F;else break e}}return ae}function f(B,ae){var Q=B.sortIndex-ae.sortIndex;return Q!==0?Q:B.id-ae.id}if(typeof performance=="object"&&typeof performance.now=="function"){var p=performance;l.unstable_now=function(){return p.now()}}else{var g=Date,b=g.now();l.unstable_now=function(){return g.now()-b}}var w=[],R=[],P=1,j=null,z=3,K=!1,J=!1,ee=!1,D=typeof setTimeout=="function"?setTimeout:null,k=typeof clearTimeout=="function"?clearTimeout:null,_=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function X(B){for(var ae=i(R);ae!==null;){if(ae.callback===null)m(R);else if(ae.startTime<=B)m(R),ae.sortIndex=ae.expirationTime,u(w,ae);else break;ae=i(R)}}function se(B){if(ee=!1,X(B),!J)if(i(w)!==null)J=!0,$e(ne);else{var ae=i(R);ae!==null&&Ee(se,ae.startTime-B)}}function ne(B,ae){J=!1,ee&&(ee=!1,k(C),C=-1),K=!0;var Q=z;try{for(X(ae),j=i(w);j!==null&&(!(j.expirationTime>ae)||B&&!fe());){var y=j.callback;if(typeof y=="function"){j.callback=null,z=j.priorityLevel;var M=y(j.expirationTime<=ae);ae=l.unstable_now(),typeof M=="function"?j.callback=M:j===i(w)&&m(w),X(ae)}else m(w);j=i(w)}if(j!==null)var Ie=!0;else{var T=i(R);T!==null&&Ee(se,T.startTime-ae),Ie=!1}return Ie}finally{j=null,z=Q,K=!1}}var Y=!1,ue=null,C=-1,O=5,E=-1;function fe(){return!(l.unstable_now()-E<O)}function xe(){if(ue!==null){var B=l.unstable_now();E=B;var ae=!0;try{ae=ue(!0,B)}finally{ae?de():(Y=!1,ue=null)}}else Y=!1}var de;if(typeof _=="function")de=function(){_(xe)};else if(typeof MessageChannel<"u"){var ke=new MessageChannel,Ue=ke.port2;ke.port1.onmessage=xe,de=function(){Ue.postMessage(null)}}else de=function(){D(xe,0)};function $e(B){ue=B,Y||(Y=!0,de())}function Ee(B,ae){C=D(function(){B(l.unstable_now())},ae)}l.unstable_IdlePriority=5,l.unstable_ImmediatePriority=1,l.unstable_LowPriority=4,l.unstable_NormalPriority=3,l.unstable_Profiling=null,l.unstable_UserBlockingPriority=2,l.unstable_cancelCallback=function(B){B.callback=null},l.unstable_continueExecution=function(){J||K||(J=!0,$e(ne))},l.unstable_forceFrameRate=function(B){0>B||125<B?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):O=0<B?Math.floor(1e3/B):5},l.unstable_getCurrentPriorityLevel=function(){return z},l.unstable_getFirstCallbackNode=function(){return i(w)},l.unstable_next=function(B){switch(z){case 1:case 2:case 3:var ae=3;break;default:ae=z}var Q=z;z=ae;try{return B()}finally{z=Q}},l.unstable_pauseExecution=function(){},l.unstable_requestPaint=function(){},l.unstable_runWithPriority=function(B,ae){switch(B){case 1:case 2:case 3:case 4:case 5:break;default:B=3}var Q=z;z=B;try{return ae()}finally{z=Q}},l.unstable_scheduleCallback=function(B,ae,Q){var y=l.unstable_now();switch(typeof Q=="object"&&Q!==null?(Q=Q.delay,Q=typeof Q=="number"&&0<Q?y+Q:y):Q=y,B){case 1:var M=-1;break;case 2:M=250;break;case 5:M=1073741823;break;case 4:M=1e4;break;default:M=5e3}return M=Q+M,B={id:P++,callback:ae,priorityLevel:B,startTime:Q,expirationTime:M,sortIndex:-1},Q>y?(B.sortIndex=Q,u(R,B),i(w)===null&&B===i(R)&&(ee?(k(C),C=-1):ee=!0,Ee(se,Q-y))):(B.sortIndex=M,u(w,B),J||K||(J=!0,$e(ne))),B},l.unstable_shouldYield=fe,l.unstable_wrapCallback=function(B){var ae=z;return function(){var Q=z;z=ae;try{return B.apply(this,arguments)}finally{z=Q}}}})(ti)),ti}var Wc;function Ef(){return Wc||(Wc=1,ei.exports=Pf()),ei.exports}var Vc;function Rf(){if(Vc)return cr;Vc=1;var l=ci(),u=Ef();function i(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var m=new Set,f={};function p(e,t){g(e,t),g(e+"Capture",t)}function g(e,t){for(f[e]=t,e=0;e<t.length;e++)m.add(t[e])}var b=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),w=Object.prototype.hasOwnProperty,R=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,P={},j={};function z(e){return w.call(j,e)?!0:w.call(P,e)?!1:R.test(e)?j[e]=!0:(P[e]=!0,!1)}function K(e,t,n,s){if(n!==null&&n.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return s?!1:n!==null?!n.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function J(e,t,n,s){if(t===null||typeof t>"u"||K(e,t,n,s))return!0;if(s)return!1;if(n!==null)switch(n.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function ee(e,t,n,s,a,o,d){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=s,this.attributeNamespace=a,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=o,this.removeEmptyString=d}var D={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){D[e]=new ee(e,0,!1,e,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];D[t]=new ee(t,1,!1,e[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(e){D[e]=new ee(e,2,!1,e.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){D[e]=new ee(e,2,!1,e,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){D[e]=new ee(e,3,!1,e.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(e){D[e]=new ee(e,3,!0,e,null,!1,!1)}),["capture","download"].forEach(function(e){D[e]=new ee(e,4,!1,e,null,!1,!1)}),["cols","rows","size","span"].forEach(function(e){D[e]=new ee(e,6,!1,e,null,!1,!1)}),["rowSpan","start"].forEach(function(e){D[e]=new ee(e,5,!1,e.toLowerCase(),null,!1,!1)});var k=/[\-:]([a-z])/g;function _(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(k,_);D[t]=new ee(t,1,!1,e,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(k,_);D[t]=new ee(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(k,_);D[t]=new ee(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(e){D[e]=new ee(e,1,!1,e.toLowerCase(),null,!1,!1)}),D.xlinkHref=new ee("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(e){D[e]=new ee(e,1,!1,e.toLowerCase(),null,!0,!0)});function X(e,t,n,s){var a=D.hasOwnProperty(t)?D[t]:null;(a!==null?a.type!==0:s||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(J(t,n,a,s)&&(n=null),s||a===null?z(t)&&(n===null?e.removeAttribute(t):e.setAttribute(t,""+n)):a.mustUseProperty?e[a.propertyName]=n===null?a.type===3?!1:"":n:(t=a.attributeName,s=a.attributeNamespace,n===null?e.removeAttribute(t):(a=a.type,n=a===3||a===4&&n===!0?"":""+n,s?e.setAttributeNS(s,t,n):e.setAttribute(t,n))))}var se=l.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,ne=Symbol.for("react.element"),Y=Symbol.for("react.portal"),ue=Symbol.for("react.fragment"),C=Symbol.for("react.strict_mode"),O=Symbol.for("react.profiler"),E=Symbol.for("react.provider"),fe=Symbol.for("react.context"),xe=Symbol.for("react.forward_ref"),de=Symbol.for("react.suspense"),ke=Symbol.for("react.suspense_list"),Ue=Symbol.for("react.memo"),$e=Symbol.for("react.lazy"),Ee=Symbol.for("react.offscreen"),B=Symbol.iterator;function ae(e){return e===null||typeof e!="object"?null:(e=B&&e[B]||e["@@iterator"],typeof e=="function"?e:null)}var Q=Object.assign,y;function M(e){if(y===void 0)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);y=t&&t[1]||""}return`
`+y+e}var Ie=!1;function T(e,t){if(!e||Ie)return"";Ie=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch($){var s=$}Reflect.construct(e,[],t)}else{try{t.call()}catch($){s=$}e.call(t.prototype)}else{try{throw Error()}catch($){s=$}e()}}catch($){if($&&s&&typeof $.stack=="string"){for(var a=$.stack.split(`
`),o=s.stack.split(`
`),d=a.length-1,h=o.length-1;1<=d&&0<=h&&a[d]!==o[h];)h--;for(;1<=d&&0<=h;d--,h--)if(a[d]!==o[h]){if(d!==1||h!==1)do if(d--,h--,0>h||a[d]!==o[h]){var v=`
`+a[d].replace(" at new "," at ");return e.displayName&&v.includes("<anonymous>")&&(v=v.replace("<anonymous>",e.displayName)),v}while(1<=d&&0<=h);break}}}finally{Ie=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?M(e):""}function L(e){switch(e.tag){case 5:return M(e.type);case 16:return M("Lazy");case 13:return M("Suspense");case 19:return M("SuspenseList");case 0:case 2:case 15:return e=T(e.type,!1),e;case 11:return e=T(e.type.render,!1),e;case 1:return e=T(e.type,!0),e;default:return""}}function F(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case ue:return"Fragment";case Y:return"Portal";case O:return"Profiler";case C:return"StrictMode";case de:return"Suspense";case ke:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case fe:return(e.displayName||"Context")+".Consumer";case E:return(e._context.displayName||"Context")+".Provider";case xe:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case Ue:return t=e.displayName||null,t!==null?t:F(e.type)||"Memo";case $e:t=e._payload,e=e._init;try{return F(e(t))}catch{}}return null}function ce(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return F(t);case 8:return t===C?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function me(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function te(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function ge(e){var t=te(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),s=""+e[t];if(!e.hasOwnProperty(t)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var a=n.get,o=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return a.call(this)},set:function(d){s=""+d,o.call(this,d)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return s},setValue:function(d){s=""+d},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function He(e){e._valueTracker||(e._valueTracker=ge(e))}function lt(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),s="";return e&&(s=te(e)?e.checked?"true":"false":e.value),e=s,e!==n?(t.setValue(e),!0):!1}function ct(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function ot(e,t){var n=t.checked;return Q({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??e._wrapperState.initialChecked})}function vr(e,t){var n=t.defaultValue==null?"":t.defaultValue,s=t.checked!=null?t.checked:t.defaultChecked;n=me(t.value!=null?t.value:n),e._wrapperState={initialChecked:s,initialValue:n,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function Bt(e,t){t=t.checked,t!=null&&X(e,"checked",t,!1)}function Kt(e,t){Bt(e,t);var n=me(t.value),s=t.type;if(n!=null)s==="number"?(n===0&&e.value===""||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if(s==="submit"||s==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?W(e,t.type,n):t.hasOwnProperty("defaultValue")&&W(e,t.type,me(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function Kr(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var s=t.type;if(!(s!=="submit"&&s!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}n=e.name,n!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,n!==""&&(e.name=n)}function W(e,t,n){(t!=="number"||ct(e.ownerDocument)!==e)&&(n==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var V=Array.isArray;function be(e,t,n,s){if(e=e.options,t){t={};for(var a=0;a<n.length;a++)t["$"+n[a]]=!0;for(n=0;n<e.length;n++)a=t.hasOwnProperty("$"+e[n].value),e[n].selected!==a&&(e[n].selected=a),a&&s&&(e[n].defaultSelected=!0)}else{for(n=""+me(n),t=null,a=0;a<e.length;a++){if(e[a].value===n){e[a].selected=!0,s&&(e[a].defaultSelected=!0);return}t!==null||e[a].disabled||(t=e[a])}t!==null&&(t.selected=!0)}}function _e(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(i(91));return Q({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function Ve(e,t){var n=t.value;if(n==null){if(n=t.children,t=t.defaultValue,n!=null){if(t!=null)throw Error(i(92));if(V(n)){if(1<n.length)throw Error(i(93));n=n[0]}t=n}t==null&&(t=""),n=t}e._wrapperState={initialValue:me(n)}}function bt(e,t){var n=me(t.value),s=me(t.defaultValue);n!=null&&(n=""+n,n!==e.value&&(e.value=n),t.defaultValue==null&&e.defaultValue!==n&&(e.defaultValue=n)),s!=null&&(e.defaultValue=""+s)}function De(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function Se(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function ft(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?Se(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var Ge,Ct=(function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,n,s,a){MSApp.execUnsafeLocalFunction(function(){return e(t,n,s,a)})}:e})(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(Ge=Ge||document.createElement("div"),Ge.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=Ge.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function St(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&n.nodeType===3){n.nodeValue=t;return}}e.textContent=t}var U={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},H=["Webkit","ms","Moz","O"];Object.keys(U).forEach(function(e){H.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),U[t]=U[e]})});function ye(e,t,n){return t==null||typeof t=="boolean"||t===""?"":n||typeof t!="number"||t===0||U.hasOwnProperty(e)&&U[e]?(""+t).trim():t+"px"}function Pe(e,t){e=e.style;for(var n in t)if(t.hasOwnProperty(n)){var s=n.indexOf("--")===0,a=ye(n,t[n],s);n==="float"&&(n="cssFloat"),s?e.setProperty(n,a):e[n]=a}}var Me=Q({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function it(e,t){if(t){if(Me[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(i(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(i(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(i(61))}if(t.style!=null&&typeof t.style!="object")throw Error(i(62))}}function Re(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var le=null;function ze(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var Ke=null,Ye=null,Qe=null;function qe(e){if(e=As(e)){if(typeof Ke!="function")throw Error(i(280));var t=e.stateNode;t&&(t=ja(t),Ke(e.stateNode,e.type,t))}}function Nt(e){Ye?Qe?Qe.push(e):Qe=[e]:Ye=e}function Rt(){if(Ye){var e=Ye,t=Qe;if(Qe=Ye=null,qe(e),t)for(e=0;e<t.length;e++)qe(t[e])}}function Tt(e,t){return e(t)}function dt(){}var gt=!1;function nt(e,t,n){if(gt)return e(t,n);gt=!0;try{return Tt(e,t,n)}finally{gt=!1,(Ye!==null||Qe!==null)&&(dt(),Rt())}}function Lt(e,t){var n=e.stateNode;if(n===null)return null;var s=ja(n);if(s===null)return null;n=s[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(s=!s.disabled)||(e=e.type,s=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!s;break e;default:e=!1}if(e)return null;if(n&&typeof n!="function")throw Error(i(231,t,typeof n));return n}var Qt=!1;if(b)try{var he={};Object.defineProperty(he,"passive",{get:function(){Qt=!0}}),window.addEventListener("test",he,he),window.removeEventListener("test",he,he)}catch{Qt=!1}function rt(e,t,n,s,a,o,d,h,v){var $=Array.prototype.slice.call(arguments,3);try{t.apply(n,$)}catch(Z){this.onError(Z)}}var st=!1,at=null,Pt=!1,yt=null,$t={onError:function(e){st=!0,at=e}};function Wt(e,t,n,s,a,o,d,h,v){st=!1,at=null,rt.apply($t,arguments)}function Dt(e,t,n,s,a,o,d,h,v){if(Wt.apply(this,arguments),st){if(st){var $=at;st=!1,at=null}else throw Error(i(198));Pt||(Pt=!0,yt=$)}}function At(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,(t.flags&4098)!==0&&(n=t.return),e=t.return;while(e)}return t.tag===3?n:null}function br(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function Zt(e){if(At(e)!==e)throw Error(i(188))}function Ar(e){var t=e.alternate;if(!t){if(t=At(e),t===null)throw Error(i(188));return t!==e?null:e}for(var n=e,s=t;;){var a=n.return;if(a===null)break;var o=a.alternate;if(o===null){if(s=a.return,s!==null){n=s;continue}break}if(a.child===o.child){for(o=a.child;o;){if(o===n)return Zt(a),e;if(o===s)return Zt(a),t;o=o.sibling}throw Error(i(188))}if(n.return!==s.return)n=a,s=o;else{for(var d=!1,h=a.child;h;){if(h===n){d=!0,n=a,s=o;break}if(h===s){d=!0,s=a,n=o;break}h=h.sibling}if(!d){for(h=o.child;h;){if(h===n){d=!0,n=o,s=a;break}if(h===s){d=!0,s=o,n=a;break}h=h.sibling}if(!d)throw Error(i(189))}}if(n.alternate!==s)throw Error(i(190))}if(n.tag!==3)throw Error(i(188));return n.stateNode.current===n?e:t}function Or(e){return e=Ar(e),e!==null?er(e):null}function er(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=er(e);if(t!==null)return t;e=e.sibling}return null}var Ur=u.unstable_scheduleCallback,zr=u.unstable_cancelCallback,Un=u.unstable_shouldYield,ys=u.unstable_requestPaint,ut=u.unstable_now,yl=u.unstable_getCurrentPriorityLevel,xs=u.unstable_ImmediatePriority,la=u.unstable_UserBlockingPriority,zn=u.unstable_NormalPriority,xl=u.unstable_LowPriority,vs=u.unstable_IdlePriority,Gn=null,Nr=null;function vl(e){if(Nr&&typeof Nr.onCommitFiberRoot=="function")try{Nr.onCommitFiberRoot(Gn,e,void 0,(e.current.flags&128)===128)}catch{}}var tr=Math.clz32?Math.clz32:Ns,bs=Math.log,oa=Math.LN2;function Ns(e){return e>>>=0,e===0?32:31-(bs(e)/oa|0)|0}var sn=64,Bn=4194304;function x(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function G(e,t){var n=e.pendingLanes;if(n===0)return 0;var s=0,a=e.suspendedLanes,o=e.pingedLanes,d=n&268435455;if(d!==0){var h=d&~a;h!==0?s=x(h):(o&=d,o!==0&&(s=x(o)))}else d=n&~a,d!==0?s=x(d):o!==0&&(s=x(o));if(s===0)return 0;if(t!==0&&t!==s&&(t&a)===0&&(a=s&-s,o=t&-t,a>=o||a===16&&(o&4194240)!==0))return t;if((s&4)!==0&&(s|=n&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=s;0<t;)n=31-tr(t),a=1<<n,s|=e[n],t&=~a;return s}function A(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function oe(e,t){for(var n=e.suspendedLanes,s=e.pingedLanes,a=e.expirationTimes,o=e.pendingLanes;0<o;){var d=31-tr(o),h=1<<d,v=a[d];v===-1?((h&n)===0||(h&s)!==0)&&(a[d]=A(h,t)):v<=t&&(e.expiredLanes|=h),o&=~h}}function Ce(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function et(){var e=sn;return sn<<=1,(sn&4194240)===0&&(sn=64),e}function Ot(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function rr(e,t,n){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-tr(t),e[t]=n}function Fe(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var s=e.eventTimes;for(e=e.expirationTimes;0<n;){var a=31-tr(n),o=1<<a;t[a]=0,s[a]=-1,e[a]=-1,n&=~o}}function Ae(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var s=31-tr(n),a=1<<s;a&t|e[s]&t&&(e[s]|=t),n&=~a}}var Be=0;function wr(e){return e&=-e,1<e?4<e?(e&268435455)!==0?16:536870912:4:1}var xi,bl,vi,bi,Ni,Nl=!1,ia=[],an=null,ln=null,on=null,ws=new Map,js=new Map,un=[],Vd="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function wi(e,t){switch(e){case"focusin":case"focusout":an=null;break;case"dragenter":case"dragleave":ln=null;break;case"mouseover":case"mouseout":on=null;break;case"pointerover":case"pointerout":ws.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":js.delete(t.pointerId)}}function Ss(e,t,n,s,a,o){return e===null||e.nativeEvent!==o?(e={blockedOn:t,domEventName:n,eventSystemFlags:s,nativeEvent:o,targetContainers:[a]},t!==null&&(t=As(t),t!==null&&bl(t)),e):(e.eventSystemFlags|=s,t=e.targetContainers,a!==null&&t.indexOf(a)===-1&&t.push(a),e)}function Hd(e,t,n,s,a){switch(t){case"focusin":return an=Ss(an,e,t,n,s,a),!0;case"dragenter":return ln=Ss(ln,e,t,n,s,a),!0;case"mouseover":return on=Ss(on,e,t,n,s,a),!0;case"pointerover":var o=a.pointerId;return ws.set(o,Ss(ws.get(o)||null,e,t,n,s,a)),!0;case"gotpointercapture":return o=a.pointerId,js.set(o,Ss(js.get(o)||null,e,t,n,s,a)),!0}return!1}function ji(e){var t=Pn(e.target);if(t!==null){var n=At(t);if(n!==null){if(t=n.tag,t===13){if(t=br(n),t!==null){e.blockedOn=t,Ni(e.priority,function(){vi(n)});return}}else if(t===3&&n.stateNode.current.memoizedState.isDehydrated){e.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}e.blockedOn=null}function ua(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var n=jl(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(n===null){n=e.nativeEvent;var s=new n.constructor(n.type,n);le=s,n.target.dispatchEvent(s),le=null}else return t=As(n),t!==null&&bl(t),e.blockedOn=n,!1;t.shift()}return!0}function Si(e,t,n){ua(e)&&n.delete(t)}function Kd(){Nl=!1,an!==null&&ua(an)&&(an=null),ln!==null&&ua(ln)&&(ln=null),on!==null&&ua(on)&&(on=null),ws.forEach(Si),js.forEach(Si)}function ks(e,t){e.blockedOn===t&&(e.blockedOn=null,Nl||(Nl=!0,u.unstable_scheduleCallback(u.unstable_NormalPriority,Kd)))}function Cs(e){function t(a){return ks(a,e)}if(0<ia.length){ks(ia[0],e);for(var n=1;n<ia.length;n++){var s=ia[n];s.blockedOn===e&&(s.blockedOn=null)}}for(an!==null&&ks(an,e),ln!==null&&ks(ln,e),on!==null&&ks(on,e),ws.forEach(t),js.forEach(t),n=0;n<un.length;n++)s=un[n],s.blockedOn===e&&(s.blockedOn=null);for(;0<un.length&&(n=un[0],n.blockedOn===null);)ji(n),n.blockedOn===null&&un.shift()}var Wn=se.ReactCurrentBatchConfig,ca=!0;function Qd(e,t,n,s){var a=Be,o=Wn.transition;Wn.transition=null;try{Be=1,wl(e,t,n,s)}finally{Be=a,Wn.transition=o}}function Jd(e,t,n,s){var a=Be,o=Wn.transition;Wn.transition=null;try{Be=4,wl(e,t,n,s)}finally{Be=a,Wn.transition=o}}function wl(e,t,n,s){if(ca){var a=jl(e,t,n,s);if(a===null)Ul(e,t,s,da,n),wi(e,s);else if(Hd(a,e,t,n,s))s.stopPropagation();else if(wi(e,s),t&4&&-1<Vd.indexOf(e)){for(;a!==null;){var o=As(a);if(o!==null&&xi(o),o=jl(e,t,n,s),o===null&&Ul(e,t,s,da,n),o===a)break;a=o}a!==null&&s.stopPropagation()}else Ul(e,t,s,null,n)}}var da=null;function jl(e,t,n,s){if(da=null,e=ze(s),e=Pn(e),e!==null)if(t=At(e),t===null)e=null;else if(n=t.tag,n===13){if(e=br(t),e!==null)return e;e=null}else if(n===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return da=e,null}function ki(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(yl()){case xs:return 1;case la:return 4;case zn:case xl:return 16;case vs:return 536870912;default:return 16}default:return 16}}var cn=null,Sl=null,ma=null;function Ci(){if(ma)return ma;var e,t=Sl,n=t.length,s,a="value"in cn?cn.value:cn.textContent,o=a.length;for(e=0;e<n&&t[e]===a[e];e++);var d=n-e;for(s=1;s<=d&&t[n-s]===a[o-s];s++);return ma=a.slice(e,1<s?1-s:void 0)}function fa(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function pa(){return!0}function Pi(){return!1}function mr(e){function t(n,s,a,o,d){this._reactName=n,this._targetInst=a,this.type=s,this.nativeEvent=o,this.target=d,this.currentTarget=null;for(var h in e)e.hasOwnProperty(h)&&(n=e[h],this[h]=n?n(o):o[h]);return this.isDefaultPrevented=(o.defaultPrevented!=null?o.defaultPrevented:o.returnValue===!1)?pa:Pi,this.isPropagationStopped=Pi,this}return Q(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=pa)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=pa)},persist:function(){},isPersistent:pa}),t}var Vn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},kl=mr(Vn),Ps=Q({},Vn,{view:0,detail:0}),Yd=mr(Ps),Cl,Pl,Es,ha=Q({},Ps,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Rl,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==Es&&(Es&&e.type==="mousemove"?(Cl=e.screenX-Es.screenX,Pl=e.screenY-Es.screenY):Pl=Cl=0,Es=e),Cl)},movementY:function(e){return"movementY"in e?e.movementY:Pl}}),Ei=mr(ha),Xd=Q({},ha,{dataTransfer:0}),qd=mr(Xd),Zd=Q({},Ps,{relatedTarget:0}),El=mr(Zd),em=Q({},Vn,{animationName:0,elapsedTime:0,pseudoElement:0}),tm=mr(em),rm=Q({},Vn,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),nm=mr(rm),sm=Q({},Vn,{data:0}),Ri=mr(sm),am={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},lm={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},om={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function im(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=om[e])?!!t[e]:!1}function Rl(){return im}var um=Q({},Ps,{key:function(e){if(e.key){var t=am[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=fa(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?lm[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Rl,charCode:function(e){return e.type==="keypress"?fa(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?fa(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),cm=mr(um),dm=Q({},ha,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Ii=mr(dm),mm=Q({},Ps,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Rl}),fm=mr(mm),pm=Q({},Vn,{propertyName:0,elapsedTime:0,pseudoElement:0}),hm=mr(pm),gm=Q({},ha,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),ym=mr(gm),xm=[9,13,27,32],Il=b&&"CompositionEvent"in window,Rs=null;b&&"documentMode"in document&&(Rs=document.documentMode);var vm=b&&"TextEvent"in window&&!Rs,_i=b&&(!Il||Rs&&8<Rs&&11>=Rs),Ti=" ",Li=!1;function $i(e,t){switch(e){case"keyup":return xm.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Di(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var Hn=!1;function bm(e,t){switch(e){case"compositionend":return Di(t);case"keypress":return t.which!==32?null:(Li=!0,Ti);case"textInput":return e=t.data,e===Ti&&Li?null:e;default:return null}}function Nm(e,t){if(Hn)return e==="compositionend"||!Il&&$i(e,t)?(e=Ci(),ma=Sl=cn=null,Hn=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return _i&&t.locale!=="ko"?null:t.data;default:return null}}var wm={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Fi(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!wm[e.type]:t==="textarea"}function Mi(e,t,n,s){Nt(s),t=ba(t,"onChange"),0<t.length&&(n=new kl("onChange","change",null,n,s),e.push({event:n,listeners:t}))}var Is=null,_s=null;function jm(e){tu(e,0)}function ga(e){var t=Xn(e);if(lt(t))return e}function Sm(e,t){if(e==="change")return t}var Ai=!1;if(b){var _l;if(b){var Tl="oninput"in document;if(!Tl){var Oi=document.createElement("div");Oi.setAttribute("oninput","return;"),Tl=typeof Oi.oninput=="function"}_l=Tl}else _l=!1;Ai=_l&&(!document.documentMode||9<document.documentMode)}function Ui(){Is&&(Is.detachEvent("onpropertychange",zi),_s=Is=null)}function zi(e){if(e.propertyName==="value"&&ga(_s)){var t=[];Mi(t,_s,e,ze(e)),nt(jm,t)}}function km(e,t,n){e==="focusin"?(Ui(),Is=t,_s=n,Is.attachEvent("onpropertychange",zi)):e==="focusout"&&Ui()}function Cm(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return ga(_s)}function Pm(e,t){if(e==="click")return ga(t)}function Em(e,t){if(e==="input"||e==="change")return ga(t)}function Rm(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var _r=typeof Object.is=="function"?Object.is:Rm;function Ts(e,t){if(_r(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var n=Object.keys(e),s=Object.keys(t);if(n.length!==s.length)return!1;for(s=0;s<n.length;s++){var a=n[s];if(!w.call(t,a)||!_r(e[a],t[a]))return!1}return!0}function Gi(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function Bi(e,t){var n=Gi(e);e=0;for(var s;n;){if(n.nodeType===3){if(s=e+n.textContent.length,e<=t&&s>=t)return{node:n,offset:t-e};e=s}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=Gi(n)}}function Wi(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?Wi(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function Vi(){for(var e=window,t=ct();t instanceof e.HTMLIFrameElement;){try{var n=typeof t.contentWindow.location.href=="string"}catch{n=!1}if(n)e=t.contentWindow;else break;t=ct(e.document)}return t}function Ll(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function Im(e){var t=Vi(),n=e.focusedElem,s=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&Wi(n.ownerDocument.documentElement,n)){if(s!==null&&Ll(n)){if(t=s.start,e=s.end,e===void 0&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if(e=(t=n.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var a=n.textContent.length,o=Math.min(s.start,a);s=s.end===void 0?o:Math.min(s.end,a),!e.extend&&o>s&&(a=s,s=o,o=a),a=Bi(n,o);var d=Bi(n,s);a&&d&&(e.rangeCount!==1||e.anchorNode!==a.node||e.anchorOffset!==a.offset||e.focusNode!==d.node||e.focusOffset!==d.offset)&&(t=t.createRange(),t.setStart(a.node,a.offset),e.removeAllRanges(),o>s?(e.addRange(t),e.extend(d.node,d.offset)):(t.setEnd(d.node,d.offset),e.addRange(t)))}}for(t=[],e=n;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<t.length;n++)e=t[n],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var _m=b&&"documentMode"in document&&11>=document.documentMode,Kn=null,$l=null,Ls=null,Dl=!1;function Hi(e,t,n){var s=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;Dl||Kn==null||Kn!==ct(s)||(s=Kn,"selectionStart"in s&&Ll(s)?s={start:s.selectionStart,end:s.selectionEnd}:(s=(s.ownerDocument&&s.ownerDocument.defaultView||window).getSelection(),s={anchorNode:s.anchorNode,anchorOffset:s.anchorOffset,focusNode:s.focusNode,focusOffset:s.focusOffset}),Ls&&Ts(Ls,s)||(Ls=s,s=ba($l,"onSelect"),0<s.length&&(t=new kl("onSelect","select",null,t,n),e.push({event:t,listeners:s}),t.target=Kn)))}function ya(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var Qn={animationend:ya("Animation","AnimationEnd"),animationiteration:ya("Animation","AnimationIteration"),animationstart:ya("Animation","AnimationStart"),transitionend:ya("Transition","TransitionEnd")},Fl={},Ki={};b&&(Ki=document.createElement("div").style,"AnimationEvent"in window||(delete Qn.animationend.animation,delete Qn.animationiteration.animation,delete Qn.animationstart.animation),"TransitionEvent"in window||delete Qn.transitionend.transition);function xa(e){if(Fl[e])return Fl[e];if(!Qn[e])return e;var t=Qn[e],n;for(n in t)if(t.hasOwnProperty(n)&&n in Ki)return Fl[e]=t[n];return e}var Qi=xa("animationend"),Ji=xa("animationiteration"),Yi=xa("animationstart"),Xi=xa("transitionend"),qi=new Map,Zi="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function dn(e,t){qi.set(e,t),p(t,[e])}for(var Ml=0;Ml<Zi.length;Ml++){var Al=Zi[Ml],Tm=Al.toLowerCase(),Lm=Al[0].toUpperCase()+Al.slice(1);dn(Tm,"on"+Lm)}dn(Qi,"onAnimationEnd"),dn(Ji,"onAnimationIteration"),dn(Yi,"onAnimationStart"),dn("dblclick","onDoubleClick"),dn("focusin","onFocus"),dn("focusout","onBlur"),dn(Xi,"onTransitionEnd"),g("onMouseEnter",["mouseout","mouseover"]),g("onMouseLeave",["mouseout","mouseover"]),g("onPointerEnter",["pointerout","pointerover"]),g("onPointerLeave",["pointerout","pointerover"]),p("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),p("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),p("onBeforeInput",["compositionend","keypress","textInput","paste"]),p("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),p("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),p("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var $s="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),$m=new Set("cancel close invalid load scroll toggle".split(" ").concat($s));function eu(e,t,n){var s=e.type||"unknown-event";e.currentTarget=n,Dt(s,t,void 0,e),e.currentTarget=null}function tu(e,t){t=(t&4)!==0;for(var n=0;n<e.length;n++){var s=e[n],a=s.event;s=s.listeners;e:{var o=void 0;if(t)for(var d=s.length-1;0<=d;d--){var h=s[d],v=h.instance,$=h.currentTarget;if(h=h.listener,v!==o&&a.isPropagationStopped())break e;eu(a,h,$),o=v}else for(d=0;d<s.length;d++){if(h=s[d],v=h.instance,$=h.currentTarget,h=h.listener,v!==o&&a.isPropagationStopped())break e;eu(a,h,$),o=v}}}if(Pt)throw e=yt,Pt=!1,yt=null,e}function pt(e,t){var n=t[Hl];n===void 0&&(n=t[Hl]=new Set);var s=e+"__bubble";n.has(s)||(ru(t,e,2,!1),n.add(s))}function Ol(e,t,n){var s=0;t&&(s|=4),ru(n,e,s,t)}var va="_reactListening"+Math.random().toString(36).slice(2);function Ds(e){if(!e[va]){e[va]=!0,m.forEach(function(n){n!=="selectionchange"&&($m.has(n)||Ol(n,!1,e),Ol(n,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[va]||(t[va]=!0,Ol("selectionchange",!1,t))}}function ru(e,t,n,s){switch(ki(t)){case 1:var a=Qd;break;case 4:a=Jd;break;default:a=wl}n=a.bind(null,t,n,e),a=void 0,!Qt||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(a=!0),s?a!==void 0?e.addEventListener(t,n,{capture:!0,passive:a}):e.addEventListener(t,n,!0):a!==void 0?e.addEventListener(t,n,{passive:a}):e.addEventListener(t,n,!1)}function Ul(e,t,n,s,a){var o=s;if((t&1)===0&&(t&2)===0&&s!==null)e:for(;;){if(s===null)return;var d=s.tag;if(d===3||d===4){var h=s.stateNode.containerInfo;if(h===a||h.nodeType===8&&h.parentNode===a)break;if(d===4)for(d=s.return;d!==null;){var v=d.tag;if((v===3||v===4)&&(v=d.stateNode.containerInfo,v===a||v.nodeType===8&&v.parentNode===a))return;d=d.return}for(;h!==null;){if(d=Pn(h),d===null)return;if(v=d.tag,v===5||v===6){s=o=d;continue e}h=h.parentNode}}s=s.return}nt(function(){var $=o,Z=ze(n),re=[];e:{var q=qi.get(e);if(q!==void 0){var pe=kl,Ne=e;switch(e){case"keypress":if(fa(n)===0)break e;case"keydown":case"keyup":pe=cm;break;case"focusin":Ne="focus",pe=El;break;case"focusout":Ne="blur",pe=El;break;case"beforeblur":case"afterblur":pe=El;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":pe=Ei;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":pe=qd;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":pe=fm;break;case Qi:case Ji:case Yi:pe=tm;break;case Xi:pe=hm;break;case"scroll":pe=Yd;break;case"wheel":pe=ym;break;case"copy":case"cut":case"paste":pe=nm;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":pe=Ii}var we=(t&4)!==0,Et=!we&&e==="scroll",S=we?q!==null?q+"Capture":null:q;we=[];for(var N=$,I;N!==null;){I=N;var ie=I.stateNode;if(I.tag===5&&ie!==null&&(I=ie,S!==null&&(ie=Lt(N,S),ie!=null&&we.push(Fs(N,ie,I)))),Et)break;N=N.return}0<we.length&&(q=new pe(q,Ne,null,n,Z),re.push({event:q,listeners:we}))}}if((t&7)===0){e:{if(q=e==="mouseover"||e==="pointerover",pe=e==="mouseout"||e==="pointerout",q&&n!==le&&(Ne=n.relatedTarget||n.fromElement)&&(Pn(Ne)||Ne[Qr]))break e;if((pe||q)&&(q=Z.window===Z?Z:(q=Z.ownerDocument)?q.defaultView||q.parentWindow:window,pe?(Ne=n.relatedTarget||n.toElement,pe=$,Ne=Ne?Pn(Ne):null,Ne!==null&&(Et=At(Ne),Ne!==Et||Ne.tag!==5&&Ne.tag!==6)&&(Ne=null)):(pe=null,Ne=$),pe!==Ne)){if(we=Ei,ie="onMouseLeave",S="onMouseEnter",N="mouse",(e==="pointerout"||e==="pointerover")&&(we=Ii,ie="onPointerLeave",S="onPointerEnter",N="pointer"),Et=pe==null?q:Xn(pe),I=Ne==null?q:Xn(Ne),q=new we(ie,N+"leave",pe,n,Z),q.target=Et,q.relatedTarget=I,ie=null,Pn(Z)===$&&(we=new we(S,N+"enter",Ne,n,Z),we.target=I,we.relatedTarget=Et,ie=we),Et=ie,pe&&Ne)t:{for(we=pe,S=Ne,N=0,I=we;I;I=Jn(I))N++;for(I=0,ie=S;ie;ie=Jn(ie))I++;for(;0<N-I;)we=Jn(we),N--;for(;0<I-N;)S=Jn(S),I--;for(;N--;){if(we===S||S!==null&&we===S.alternate)break t;we=Jn(we),S=Jn(S)}we=null}else we=null;pe!==null&&nu(re,q,pe,we,!1),Ne!==null&&Et!==null&&nu(re,Et,Ne,we,!0)}}e:{if(q=$?Xn($):window,pe=q.nodeName&&q.nodeName.toLowerCase(),pe==="select"||pe==="input"&&q.type==="file")var je=Sm;else if(Fi(q))if(Ai)je=Em;else{je=Cm;var Te=km}else(pe=q.nodeName)&&pe.toLowerCase()==="input"&&(q.type==="checkbox"||q.type==="radio")&&(je=Pm);if(je&&(je=je(e,$))){Mi(re,je,n,Z);break e}Te&&Te(e,q,$),e==="focusout"&&(Te=q._wrapperState)&&Te.controlled&&q.type==="number"&&W(q,"number",q.value)}switch(Te=$?Xn($):window,e){case"focusin":(Fi(Te)||Te.contentEditable==="true")&&(Kn=Te,$l=$,Ls=null);break;case"focusout":Ls=$l=Kn=null;break;case"mousedown":Dl=!0;break;case"contextmenu":case"mouseup":case"dragend":Dl=!1,Hi(re,n,Z);break;case"selectionchange":if(_m)break;case"keydown":case"keyup":Hi(re,n,Z)}var Le;if(Il)e:{switch(e){case"compositionstart":var Oe="onCompositionStart";break e;case"compositionend":Oe="onCompositionEnd";break e;case"compositionupdate":Oe="onCompositionUpdate";break e}Oe=void 0}else Hn?$i(e,n)&&(Oe="onCompositionEnd"):e==="keydown"&&n.keyCode===229&&(Oe="onCompositionStart");Oe&&(_i&&n.locale!=="ko"&&(Hn||Oe!=="onCompositionStart"?Oe==="onCompositionEnd"&&Hn&&(Le=Ci()):(cn=Z,Sl="value"in cn?cn.value:cn.textContent,Hn=!0)),Te=ba($,Oe),0<Te.length&&(Oe=new Ri(Oe,e,null,n,Z),re.push({event:Oe,listeners:Te}),Le?Oe.data=Le:(Le=Di(n),Le!==null&&(Oe.data=Le)))),(Le=vm?bm(e,n):Nm(e,n))&&($=ba($,"onBeforeInput"),0<$.length&&(Z=new Ri("onBeforeInput","beforeinput",null,n,Z),re.push({event:Z,listeners:$}),Z.data=Le))}tu(re,t)})}function Fs(e,t,n){return{instance:e,listener:t,currentTarget:n}}function ba(e,t){for(var n=t+"Capture",s=[];e!==null;){var a=e,o=a.stateNode;a.tag===5&&o!==null&&(a=o,o=Lt(e,n),o!=null&&s.unshift(Fs(e,o,a)),o=Lt(e,t),o!=null&&s.push(Fs(e,o,a))),e=e.return}return s}function Jn(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function nu(e,t,n,s,a){for(var o=t._reactName,d=[];n!==null&&n!==s;){var h=n,v=h.alternate,$=h.stateNode;if(v!==null&&v===s)break;h.tag===5&&$!==null&&(h=$,a?(v=Lt(n,o),v!=null&&d.unshift(Fs(n,v,h))):a||(v=Lt(n,o),v!=null&&d.push(Fs(n,v,h)))),n=n.return}d.length!==0&&e.push({event:t,listeners:d})}var Dm=/\r\n?/g,Fm=/\u0000|\uFFFD/g;function su(e){return(typeof e=="string"?e:""+e).replace(Dm,`
`).replace(Fm,"")}function Na(e,t,n){if(t=su(t),su(e)!==t&&n)throw Error(i(425))}function wa(){}var zl=null,Gl=null;function Bl(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var Wl=typeof setTimeout=="function"?setTimeout:void 0,Mm=typeof clearTimeout=="function"?clearTimeout:void 0,au=typeof Promise=="function"?Promise:void 0,Am=typeof queueMicrotask=="function"?queueMicrotask:typeof au<"u"?function(e){return au.resolve(null).then(e).catch(Om)}:Wl;function Om(e){setTimeout(function(){throw e})}function Vl(e,t){var n=t,s=0;do{var a=n.nextSibling;if(e.removeChild(n),a&&a.nodeType===8)if(n=a.data,n==="/$"){if(s===0){e.removeChild(a),Cs(t);return}s--}else n!=="$"&&n!=="$?"&&n!=="$!"||s++;n=a}while(n);Cs(t)}function mn(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function lu(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="$"||n==="$!"||n==="$?"){if(t===0)return e;t--}else n==="/$"&&t++}e=e.previousSibling}return null}var Yn=Math.random().toString(36).slice(2),Gr="__reactFiber$"+Yn,Ms="__reactProps$"+Yn,Qr="__reactContainer$"+Yn,Hl="__reactEvents$"+Yn,Um="__reactListeners$"+Yn,zm="__reactHandles$"+Yn;function Pn(e){var t=e[Gr];if(t)return t;for(var n=e.parentNode;n;){if(t=n[Qr]||n[Gr]){if(n=t.alternate,t.child!==null||n!==null&&n.child!==null)for(e=lu(e);e!==null;){if(n=e[Gr])return n;e=lu(e)}return t}e=n,n=e.parentNode}return null}function As(e){return e=e[Gr]||e[Qr],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function Xn(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(i(33))}function ja(e){return e[Ms]||null}var Kl=[],qn=-1;function fn(e){return{current:e}}function ht(e){0>qn||(e.current=Kl[qn],Kl[qn]=null,qn--)}function mt(e,t){qn++,Kl[qn]=e.current,e.current=t}var pn={},Jt=fn(pn),ar=fn(!1),En=pn;function Zn(e,t){var n=e.type.contextTypes;if(!n)return pn;var s=e.stateNode;if(s&&s.__reactInternalMemoizedUnmaskedChildContext===t)return s.__reactInternalMemoizedMaskedChildContext;var a={},o;for(o in n)a[o]=t[o];return s&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=a),a}function lr(e){return e=e.childContextTypes,e!=null}function Sa(){ht(ar),ht(Jt)}function ou(e,t,n){if(Jt.current!==pn)throw Error(i(168));mt(Jt,t),mt(ar,n)}function iu(e,t,n){var s=e.stateNode;if(t=t.childContextTypes,typeof s.getChildContext!="function")return n;s=s.getChildContext();for(var a in s)if(!(a in t))throw Error(i(108,ce(e)||"Unknown",a));return Q({},n,s)}function ka(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||pn,En=Jt.current,mt(Jt,e),mt(ar,ar.current),!0}function uu(e,t,n){var s=e.stateNode;if(!s)throw Error(i(169));n?(e=iu(e,t,En),s.__reactInternalMemoizedMergedChildContext=e,ht(ar),ht(Jt),mt(Jt,e)):ht(ar),mt(ar,n)}var Jr=null,Ca=!1,Ql=!1;function cu(e){Jr===null?Jr=[e]:Jr.push(e)}function Gm(e){Ca=!0,cu(e)}function hn(){if(!Ql&&Jr!==null){Ql=!0;var e=0,t=Be;try{var n=Jr;for(Be=1;e<n.length;e++){var s=n[e];do s=s(!0);while(s!==null)}Jr=null,Ca=!1}catch(a){throw Jr!==null&&(Jr=Jr.slice(e+1)),Ur(xs,hn),a}finally{Be=t,Ql=!1}}return null}var es=[],ts=0,Pa=null,Ea=0,jr=[],Sr=0,Rn=null,Yr=1,Xr="";function In(e,t){es[ts++]=Ea,es[ts++]=Pa,Pa=e,Ea=t}function du(e,t,n){jr[Sr++]=Yr,jr[Sr++]=Xr,jr[Sr++]=Rn,Rn=e;var s=Yr;e=Xr;var a=32-tr(s)-1;s&=~(1<<a),n+=1;var o=32-tr(t)+a;if(30<o){var d=a-a%5;o=(s&(1<<d)-1).toString(32),s>>=d,a-=d,Yr=1<<32-tr(t)+a|n<<a|s,Xr=o+e}else Yr=1<<o|n<<a|s,Xr=e}function Jl(e){e.return!==null&&(In(e,1),du(e,1,0))}function Yl(e){for(;e===Pa;)Pa=es[--ts],es[ts]=null,Ea=es[--ts],es[ts]=null;for(;e===Rn;)Rn=jr[--Sr],jr[Sr]=null,Xr=jr[--Sr],jr[Sr]=null,Yr=jr[--Sr],jr[Sr]=null}var fr=null,pr=null,xt=!1,Tr=null;function mu(e,t){var n=Er(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,t=e.deletions,t===null?(e.deletions=[n],e.flags|=16):t.push(n)}function fu(e,t){switch(e.tag){case 5:var n=e.type;return t=t.nodeType!==1||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,fr=e,pr=mn(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,fr=e,pr=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(n=Rn!==null?{id:Yr,overflow:Xr}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},n=Er(18,null,null,0),n.stateNode=t,n.return=e,e.child=n,fr=e,pr=null,!0):!1;default:return!1}}function Xl(e){return(e.mode&1)!==0&&(e.flags&128)===0}function ql(e){if(xt){var t=pr;if(t){var n=t;if(!fu(e,t)){if(Xl(e))throw Error(i(418));t=mn(n.nextSibling);var s=fr;t&&fu(e,t)?mu(s,n):(e.flags=e.flags&-4097|2,xt=!1,fr=e)}}else{if(Xl(e))throw Error(i(418));e.flags=e.flags&-4097|2,xt=!1,fr=e}}}function pu(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;fr=e}function Ra(e){if(e!==fr)return!1;if(!xt)return pu(e),xt=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!Bl(e.type,e.memoizedProps)),t&&(t=pr)){if(Xl(e))throw hu(),Error(i(418));for(;t;)mu(e,t),t=mn(t.nextSibling)}if(pu(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(i(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="/$"){if(t===0){pr=mn(e.nextSibling);break e}t--}else n!=="$"&&n!=="$!"&&n!=="$?"||t++}e=e.nextSibling}pr=null}}else pr=fr?mn(e.stateNode.nextSibling):null;return!0}function hu(){for(var e=pr;e;)e=mn(e.nextSibling)}function rs(){pr=fr=null,xt=!1}function Zl(e){Tr===null?Tr=[e]:Tr.push(e)}var Bm=se.ReactCurrentBatchConfig;function Os(e,t,n){if(e=n.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(i(309));var s=n.stateNode}if(!s)throw Error(i(147,e));var a=s,o=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===o?t.ref:(t=function(d){var h=a.refs;d===null?delete h[o]:h[o]=d},t._stringRef=o,t)}if(typeof e!="string")throw Error(i(284));if(!n._owner)throw Error(i(290,e))}return e}function Ia(e,t){throw e=Object.prototype.toString.call(t),Error(i(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function gu(e){var t=e._init;return t(e._payload)}function yu(e){function t(S,N){if(e){var I=S.deletions;I===null?(S.deletions=[N],S.flags|=16):I.push(N)}}function n(S,N){if(!e)return null;for(;N!==null;)t(S,N),N=N.sibling;return null}function s(S,N){for(S=new Map;N!==null;)N.key!==null?S.set(N.key,N):S.set(N.index,N),N=N.sibling;return S}function a(S,N){return S=jn(S,N),S.index=0,S.sibling=null,S}function o(S,N,I){return S.index=I,e?(I=S.alternate,I!==null?(I=I.index,I<N?(S.flags|=2,N):I):(S.flags|=2,N)):(S.flags|=1048576,N)}function d(S){return e&&S.alternate===null&&(S.flags|=2),S}function h(S,N,I,ie){return N===null||N.tag!==6?(N=Vo(I,S.mode,ie),N.return=S,N):(N=a(N,I),N.return=S,N)}function v(S,N,I,ie){var je=I.type;return je===ue?Z(S,N,I.props.children,ie,I.key):N!==null&&(N.elementType===je||typeof je=="object"&&je!==null&&je.$$typeof===$e&&gu(je)===N.type)?(ie=a(N,I.props),ie.ref=Os(S,N,I),ie.return=S,ie):(ie=el(I.type,I.key,I.props,null,S.mode,ie),ie.ref=Os(S,N,I),ie.return=S,ie)}function $(S,N,I,ie){return N===null||N.tag!==4||N.stateNode.containerInfo!==I.containerInfo||N.stateNode.implementation!==I.implementation?(N=Ho(I,S.mode,ie),N.return=S,N):(N=a(N,I.children||[]),N.return=S,N)}function Z(S,N,I,ie,je){return N===null||N.tag!==7?(N=An(I,S.mode,ie,je),N.return=S,N):(N=a(N,I),N.return=S,N)}function re(S,N,I){if(typeof N=="string"&&N!==""||typeof N=="number")return N=Vo(""+N,S.mode,I),N.return=S,N;if(typeof N=="object"&&N!==null){switch(N.$$typeof){case ne:return I=el(N.type,N.key,N.props,null,S.mode,I),I.ref=Os(S,null,N),I.return=S,I;case Y:return N=Ho(N,S.mode,I),N.return=S,N;case $e:var ie=N._init;return re(S,ie(N._payload),I)}if(V(N)||ae(N))return N=An(N,S.mode,I,null),N.return=S,N;Ia(S,N)}return null}function q(S,N,I,ie){var je=N!==null?N.key:null;if(typeof I=="string"&&I!==""||typeof I=="number")return je!==null?null:h(S,N,""+I,ie);if(typeof I=="object"&&I!==null){switch(I.$$typeof){case ne:return I.key===je?v(S,N,I,ie):null;case Y:return I.key===je?$(S,N,I,ie):null;case $e:return je=I._init,q(S,N,je(I._payload),ie)}if(V(I)||ae(I))return je!==null?null:Z(S,N,I,ie,null);Ia(S,I)}return null}function pe(S,N,I,ie,je){if(typeof ie=="string"&&ie!==""||typeof ie=="number")return S=S.get(I)||null,h(N,S,""+ie,je);if(typeof ie=="object"&&ie!==null){switch(ie.$$typeof){case ne:return S=S.get(ie.key===null?I:ie.key)||null,v(N,S,ie,je);case Y:return S=S.get(ie.key===null?I:ie.key)||null,$(N,S,ie,je);case $e:var Te=ie._init;return pe(S,N,I,Te(ie._payload),je)}if(V(ie)||ae(ie))return S=S.get(I)||null,Z(N,S,ie,je,null);Ia(N,ie)}return null}function Ne(S,N,I,ie){for(var je=null,Te=null,Le=N,Oe=N=0,Gt=null;Le!==null&&Oe<I.length;Oe++){Le.index>Oe?(Gt=Le,Le=null):Gt=Le.sibling;var tt=q(S,Le,I[Oe],ie);if(tt===null){Le===null&&(Le=Gt);break}e&&Le&&tt.alternate===null&&t(S,Le),N=o(tt,N,Oe),Te===null?je=tt:Te.sibling=tt,Te=tt,Le=Gt}if(Oe===I.length)return n(S,Le),xt&&In(S,Oe),je;if(Le===null){for(;Oe<I.length;Oe++)Le=re(S,I[Oe],ie),Le!==null&&(N=o(Le,N,Oe),Te===null?je=Le:Te.sibling=Le,Te=Le);return xt&&In(S,Oe),je}for(Le=s(S,Le);Oe<I.length;Oe++)Gt=pe(Le,S,Oe,I[Oe],ie),Gt!==null&&(e&&Gt.alternate!==null&&Le.delete(Gt.key===null?Oe:Gt.key),N=o(Gt,N,Oe),Te===null?je=Gt:Te.sibling=Gt,Te=Gt);return e&&Le.forEach(function(Sn){return t(S,Sn)}),xt&&In(S,Oe),je}function we(S,N,I,ie){var je=ae(I);if(typeof je!="function")throw Error(i(150));if(I=je.call(I),I==null)throw Error(i(151));for(var Te=je=null,Le=N,Oe=N=0,Gt=null,tt=I.next();Le!==null&&!tt.done;Oe++,tt=I.next()){Le.index>Oe?(Gt=Le,Le=null):Gt=Le.sibling;var Sn=q(S,Le,tt.value,ie);if(Sn===null){Le===null&&(Le=Gt);break}e&&Le&&Sn.alternate===null&&t(S,Le),N=o(Sn,N,Oe),Te===null?je=Sn:Te.sibling=Sn,Te=Sn,Le=Gt}if(tt.done)return n(S,Le),xt&&In(S,Oe),je;if(Le===null){for(;!tt.done;Oe++,tt=I.next())tt=re(S,tt.value,ie),tt!==null&&(N=o(tt,N,Oe),Te===null?je=tt:Te.sibling=tt,Te=tt);return xt&&In(S,Oe),je}for(Le=s(S,Le);!tt.done;Oe++,tt=I.next())tt=pe(Le,S,Oe,tt.value,ie),tt!==null&&(e&&tt.alternate!==null&&Le.delete(tt.key===null?Oe:tt.key),N=o(tt,N,Oe),Te===null?je=tt:Te.sibling=tt,Te=tt);return e&&Le.forEach(function(jf){return t(S,jf)}),xt&&In(S,Oe),je}function Et(S,N,I,ie){if(typeof I=="object"&&I!==null&&I.type===ue&&I.key===null&&(I=I.props.children),typeof I=="object"&&I!==null){switch(I.$$typeof){case ne:e:{for(var je=I.key,Te=N;Te!==null;){if(Te.key===je){if(je=I.type,je===ue){if(Te.tag===7){n(S,Te.sibling),N=a(Te,I.props.children),N.return=S,S=N;break e}}else if(Te.elementType===je||typeof je=="object"&&je!==null&&je.$$typeof===$e&&gu(je)===Te.type){n(S,Te.sibling),N=a(Te,I.props),N.ref=Os(S,Te,I),N.return=S,S=N;break e}n(S,Te);break}else t(S,Te);Te=Te.sibling}I.type===ue?(N=An(I.props.children,S.mode,ie,I.key),N.return=S,S=N):(ie=el(I.type,I.key,I.props,null,S.mode,ie),ie.ref=Os(S,N,I),ie.return=S,S=ie)}return d(S);case Y:e:{for(Te=I.key;N!==null;){if(N.key===Te)if(N.tag===4&&N.stateNode.containerInfo===I.containerInfo&&N.stateNode.implementation===I.implementation){n(S,N.sibling),N=a(N,I.children||[]),N.return=S,S=N;break e}else{n(S,N);break}else t(S,N);N=N.sibling}N=Ho(I,S.mode,ie),N.return=S,S=N}return d(S);case $e:return Te=I._init,Et(S,N,Te(I._payload),ie)}if(V(I))return Ne(S,N,I,ie);if(ae(I))return we(S,N,I,ie);Ia(S,I)}return typeof I=="string"&&I!==""||typeof I=="number"?(I=""+I,N!==null&&N.tag===6?(n(S,N.sibling),N=a(N,I),N.return=S,S=N):(n(S,N),N=Vo(I,S.mode,ie),N.return=S,S=N),d(S)):n(S,N)}return Et}var ns=yu(!0),xu=yu(!1),_a=fn(null),Ta=null,ss=null,eo=null;function to(){eo=ss=Ta=null}function ro(e){var t=_a.current;ht(_a),e._currentValue=t}function no(e,t,n){for(;e!==null;){var s=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,s!==null&&(s.childLanes|=t)):s!==null&&(s.childLanes&t)!==t&&(s.childLanes|=t),e===n)break;e=e.return}}function as(e,t){Ta=e,eo=ss=null,e=e.dependencies,e!==null&&e.firstContext!==null&&((e.lanes&t)!==0&&(or=!0),e.firstContext=null)}function kr(e){var t=e._currentValue;if(eo!==e)if(e={context:e,memoizedValue:t,next:null},ss===null){if(Ta===null)throw Error(i(308));ss=e,Ta.dependencies={lanes:0,firstContext:e}}else ss=ss.next=e;return t}var _n=null;function so(e){_n===null?_n=[e]:_n.push(e)}function vu(e,t,n,s){var a=t.interleaved;return a===null?(n.next=n,so(t)):(n.next=a.next,a.next=n),t.interleaved=n,qr(e,s)}function qr(e,t){e.lanes|=t;var n=e.alternate;for(n!==null&&(n.lanes|=t),n=e,e=e.return;e!==null;)e.childLanes|=t,n=e.alternate,n!==null&&(n.childLanes|=t),n=e,e=e.return;return n.tag===3?n.stateNode:null}var gn=!1;function ao(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function bu(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Zr(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function yn(e,t,n){var s=e.updateQueue;if(s===null)return null;if(s=s.shared,(Ze&2)!==0){var a=s.pending;return a===null?t.next=t:(t.next=a.next,a.next=t),s.pending=t,qr(e,n)}return a=s.interleaved,a===null?(t.next=t,so(s)):(t.next=a.next,a.next=t),s.interleaved=t,qr(e,n)}function La(e,t,n){if(t=t.updateQueue,t!==null&&(t=t.shared,(n&4194240)!==0)){var s=t.lanes;s&=e.pendingLanes,n|=s,t.lanes=n,Ae(e,n)}}function Nu(e,t){var n=e.updateQueue,s=e.alternate;if(s!==null&&(s=s.updateQueue,n===s)){var a=null,o=null;if(n=n.firstBaseUpdate,n!==null){do{var d={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};o===null?a=o=d:o=o.next=d,n=n.next}while(n!==null);o===null?a=o=t:o=o.next=t}else a=o=t;n={baseState:s.baseState,firstBaseUpdate:a,lastBaseUpdate:o,shared:s.shared,effects:s.effects},e.updateQueue=n;return}e=n.lastBaseUpdate,e===null?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function $a(e,t,n,s){var a=e.updateQueue;gn=!1;var o=a.firstBaseUpdate,d=a.lastBaseUpdate,h=a.shared.pending;if(h!==null){a.shared.pending=null;var v=h,$=v.next;v.next=null,d===null?o=$:d.next=$,d=v;var Z=e.alternate;Z!==null&&(Z=Z.updateQueue,h=Z.lastBaseUpdate,h!==d&&(h===null?Z.firstBaseUpdate=$:h.next=$,Z.lastBaseUpdate=v))}if(o!==null){var re=a.baseState;d=0,Z=$=v=null,h=o;do{var q=h.lane,pe=h.eventTime;if((s&q)===q){Z!==null&&(Z=Z.next={eventTime:pe,lane:0,tag:h.tag,payload:h.payload,callback:h.callback,next:null});e:{var Ne=e,we=h;switch(q=t,pe=n,we.tag){case 1:if(Ne=we.payload,typeof Ne=="function"){re=Ne.call(pe,re,q);break e}re=Ne;break e;case 3:Ne.flags=Ne.flags&-65537|128;case 0:if(Ne=we.payload,q=typeof Ne=="function"?Ne.call(pe,re,q):Ne,q==null)break e;re=Q({},re,q);break e;case 2:gn=!0}}h.callback!==null&&h.lane!==0&&(e.flags|=64,q=a.effects,q===null?a.effects=[h]:q.push(h))}else pe={eventTime:pe,lane:q,tag:h.tag,payload:h.payload,callback:h.callback,next:null},Z===null?($=Z=pe,v=re):Z=Z.next=pe,d|=q;if(h=h.next,h===null){if(h=a.shared.pending,h===null)break;q=h,h=q.next,q.next=null,a.lastBaseUpdate=q,a.shared.pending=null}}while(!0);if(Z===null&&(v=re),a.baseState=v,a.firstBaseUpdate=$,a.lastBaseUpdate=Z,t=a.shared.interleaved,t!==null){a=t;do d|=a.lane,a=a.next;while(a!==t)}else o===null&&(a.shared.lanes=0);$n|=d,e.lanes=d,e.memoizedState=re}}function wu(e,t,n){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var s=e[t],a=s.callback;if(a!==null){if(s.callback=null,s=n,typeof a!="function")throw Error(i(191,a));a.call(s)}}}var Us={},Br=fn(Us),zs=fn(Us),Gs=fn(Us);function Tn(e){if(e===Us)throw Error(i(174));return e}function lo(e,t){switch(mt(Gs,t),mt(zs,e),mt(Br,Us),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:ft(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=ft(t,e)}ht(Br),mt(Br,t)}function ls(){ht(Br),ht(zs),ht(Gs)}function ju(e){Tn(Gs.current);var t=Tn(Br.current),n=ft(t,e.type);t!==n&&(mt(zs,e),mt(Br,n))}function oo(e){zs.current===e&&(ht(Br),ht(zs))}var wt=fn(0);function Da(e){for(var t=e;t!==null;){if(t.tag===13){var n=t.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if((t.flags&128)!==0)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var io=[];function uo(){for(var e=0;e<io.length;e++)io[e]._workInProgressVersionPrimary=null;io.length=0}var Fa=se.ReactCurrentDispatcher,co=se.ReactCurrentBatchConfig,Ln=0,jt=null,Ft=null,Ut=null,Ma=!1,Bs=!1,Ws=0,Wm=0;function Yt(){throw Error(i(321))}function mo(e,t){if(t===null)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!_r(e[n],t[n]))return!1;return!0}function fo(e,t,n,s,a,o){if(Ln=o,jt=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,Fa.current=e===null||e.memoizedState===null?Qm:Jm,e=n(s,a),Bs){o=0;do{if(Bs=!1,Ws=0,25<=o)throw Error(i(301));o+=1,Ut=Ft=null,t.updateQueue=null,Fa.current=Ym,e=n(s,a)}while(Bs)}if(Fa.current=Ua,t=Ft!==null&&Ft.next!==null,Ln=0,Ut=Ft=jt=null,Ma=!1,t)throw Error(i(300));return e}function po(){var e=Ws!==0;return Ws=0,e}function Wr(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Ut===null?jt.memoizedState=Ut=e:Ut=Ut.next=e,Ut}function Cr(){if(Ft===null){var e=jt.alternate;e=e!==null?e.memoizedState:null}else e=Ft.next;var t=Ut===null?jt.memoizedState:Ut.next;if(t!==null)Ut=t,Ft=e;else{if(e===null)throw Error(i(310));Ft=e,e={memoizedState:Ft.memoizedState,baseState:Ft.baseState,baseQueue:Ft.baseQueue,queue:Ft.queue,next:null},Ut===null?jt.memoizedState=Ut=e:Ut=Ut.next=e}return Ut}function Vs(e,t){return typeof t=="function"?t(e):t}function ho(e){var t=Cr(),n=t.queue;if(n===null)throw Error(i(311));n.lastRenderedReducer=e;var s=Ft,a=s.baseQueue,o=n.pending;if(o!==null){if(a!==null){var d=a.next;a.next=o.next,o.next=d}s.baseQueue=a=o,n.pending=null}if(a!==null){o=a.next,s=s.baseState;var h=d=null,v=null,$=o;do{var Z=$.lane;if((Ln&Z)===Z)v!==null&&(v=v.next={lane:0,action:$.action,hasEagerState:$.hasEagerState,eagerState:$.eagerState,next:null}),s=$.hasEagerState?$.eagerState:e(s,$.action);else{var re={lane:Z,action:$.action,hasEagerState:$.hasEagerState,eagerState:$.eagerState,next:null};v===null?(h=v=re,d=s):v=v.next=re,jt.lanes|=Z,$n|=Z}$=$.next}while($!==null&&$!==o);v===null?d=s:v.next=h,_r(s,t.memoizedState)||(or=!0),t.memoizedState=s,t.baseState=d,t.baseQueue=v,n.lastRenderedState=s}if(e=n.interleaved,e!==null){a=e;do o=a.lane,jt.lanes|=o,$n|=o,a=a.next;while(a!==e)}else a===null&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function go(e){var t=Cr(),n=t.queue;if(n===null)throw Error(i(311));n.lastRenderedReducer=e;var s=n.dispatch,a=n.pending,o=t.memoizedState;if(a!==null){n.pending=null;var d=a=a.next;do o=e(o,d.action),d=d.next;while(d!==a);_r(o,t.memoizedState)||(or=!0),t.memoizedState=o,t.baseQueue===null&&(t.baseState=o),n.lastRenderedState=o}return[o,s]}function Su(){}function ku(e,t){var n=jt,s=Cr(),a=t(),o=!_r(s.memoizedState,a);if(o&&(s.memoizedState=a,or=!0),s=s.queue,yo(Eu.bind(null,n,s,e),[e]),s.getSnapshot!==t||o||Ut!==null&&Ut.memoizedState.tag&1){if(n.flags|=2048,Hs(9,Pu.bind(null,n,s,a,t),void 0,null),zt===null)throw Error(i(349));(Ln&30)!==0||Cu(n,t,a)}return a}function Cu(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},t=jt.updateQueue,t===null?(t={lastEffect:null,stores:null},jt.updateQueue=t,t.stores=[e]):(n=t.stores,n===null?t.stores=[e]:n.push(e))}function Pu(e,t,n,s){t.value=n,t.getSnapshot=s,Ru(t)&&Iu(e)}function Eu(e,t,n){return n(function(){Ru(t)&&Iu(e)})}function Ru(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!_r(e,n)}catch{return!0}}function Iu(e){var t=qr(e,1);t!==null&&Fr(t,e,1,-1)}function _u(e){var t=Wr();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Vs,lastRenderedState:e},t.queue=e,e=e.dispatch=Km.bind(null,jt,e),[t.memoizedState,e]}function Hs(e,t,n,s){return e={tag:e,create:t,destroy:n,deps:s,next:null},t=jt.updateQueue,t===null?(t={lastEffect:null,stores:null},jt.updateQueue=t,t.lastEffect=e.next=e):(n=t.lastEffect,n===null?t.lastEffect=e.next=e:(s=n.next,n.next=e,e.next=s,t.lastEffect=e)),e}function Tu(){return Cr().memoizedState}function Aa(e,t,n,s){var a=Wr();jt.flags|=e,a.memoizedState=Hs(1|t,n,void 0,s===void 0?null:s)}function Oa(e,t,n,s){var a=Cr();s=s===void 0?null:s;var o=void 0;if(Ft!==null){var d=Ft.memoizedState;if(o=d.destroy,s!==null&&mo(s,d.deps)){a.memoizedState=Hs(t,n,o,s);return}}jt.flags|=e,a.memoizedState=Hs(1|t,n,o,s)}function Lu(e,t){return Aa(8390656,8,e,t)}function yo(e,t){return Oa(2048,8,e,t)}function $u(e,t){return Oa(4,2,e,t)}function Du(e,t){return Oa(4,4,e,t)}function Fu(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function Mu(e,t,n){return n=n!=null?n.concat([e]):null,Oa(4,4,Fu.bind(null,t,e),n)}function xo(){}function Au(e,t){var n=Cr();t=t===void 0?null:t;var s=n.memoizedState;return s!==null&&t!==null&&mo(t,s[1])?s[0]:(n.memoizedState=[e,t],e)}function Ou(e,t){var n=Cr();t=t===void 0?null:t;var s=n.memoizedState;return s!==null&&t!==null&&mo(t,s[1])?s[0]:(e=e(),n.memoizedState=[e,t],e)}function Uu(e,t,n){return(Ln&21)===0?(e.baseState&&(e.baseState=!1,or=!0),e.memoizedState=n):(_r(n,t)||(n=et(),jt.lanes|=n,$n|=n,e.baseState=!0),t)}function Vm(e,t){var n=Be;Be=n!==0&&4>n?n:4,e(!0);var s=co.transition;co.transition={};try{e(!1),t()}finally{Be=n,co.transition=s}}function zu(){return Cr().memoizedState}function Hm(e,t,n){var s=Nn(e);if(n={lane:s,action:n,hasEagerState:!1,eagerState:null,next:null},Gu(e))Bu(t,n);else if(n=vu(e,t,n,s),n!==null){var a=sr();Fr(n,e,s,a),Wu(n,t,s)}}function Km(e,t,n){var s=Nn(e),a={lane:s,action:n,hasEagerState:!1,eagerState:null,next:null};if(Gu(e))Bu(t,a);else{var o=e.alternate;if(e.lanes===0&&(o===null||o.lanes===0)&&(o=t.lastRenderedReducer,o!==null))try{var d=t.lastRenderedState,h=o(d,n);if(a.hasEagerState=!0,a.eagerState=h,_r(h,d)){var v=t.interleaved;v===null?(a.next=a,so(t)):(a.next=v.next,v.next=a),t.interleaved=a;return}}catch{}n=vu(e,t,a,s),n!==null&&(a=sr(),Fr(n,e,s,a),Wu(n,t,s))}}function Gu(e){var t=e.alternate;return e===jt||t!==null&&t===jt}function Bu(e,t){Bs=Ma=!0;var n=e.pending;n===null?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function Wu(e,t,n){if((n&4194240)!==0){var s=t.lanes;s&=e.pendingLanes,n|=s,t.lanes=n,Ae(e,n)}}var Ua={readContext:kr,useCallback:Yt,useContext:Yt,useEffect:Yt,useImperativeHandle:Yt,useInsertionEffect:Yt,useLayoutEffect:Yt,useMemo:Yt,useReducer:Yt,useRef:Yt,useState:Yt,useDebugValue:Yt,useDeferredValue:Yt,useTransition:Yt,useMutableSource:Yt,useSyncExternalStore:Yt,useId:Yt,unstable_isNewReconciler:!1},Qm={readContext:kr,useCallback:function(e,t){return Wr().memoizedState=[e,t===void 0?null:t],e},useContext:kr,useEffect:Lu,useImperativeHandle:function(e,t,n){return n=n!=null?n.concat([e]):null,Aa(4194308,4,Fu.bind(null,t,e),n)},useLayoutEffect:function(e,t){return Aa(4194308,4,e,t)},useInsertionEffect:function(e,t){return Aa(4,2,e,t)},useMemo:function(e,t){var n=Wr();return t=t===void 0?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var s=Wr();return t=n!==void 0?n(t):t,s.memoizedState=s.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},s.queue=e,e=e.dispatch=Hm.bind(null,jt,e),[s.memoizedState,e]},useRef:function(e){var t=Wr();return e={current:e},t.memoizedState=e},useState:_u,useDebugValue:xo,useDeferredValue:function(e){return Wr().memoizedState=e},useTransition:function(){var e=_u(!1),t=e[0];return e=Vm.bind(null,e[1]),Wr().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var s=jt,a=Wr();if(xt){if(n===void 0)throw Error(i(407));n=n()}else{if(n=t(),zt===null)throw Error(i(349));(Ln&30)!==0||Cu(s,t,n)}a.memoizedState=n;var o={value:n,getSnapshot:t};return a.queue=o,Lu(Eu.bind(null,s,o,e),[e]),s.flags|=2048,Hs(9,Pu.bind(null,s,o,n,t),void 0,null),n},useId:function(){var e=Wr(),t=zt.identifierPrefix;if(xt){var n=Xr,s=Yr;n=(s&~(1<<32-tr(s)-1)).toString(32)+n,t=":"+t+"R"+n,n=Ws++,0<n&&(t+="H"+n.toString(32)),t+=":"}else n=Wm++,t=":"+t+"r"+n.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},Jm={readContext:kr,useCallback:Au,useContext:kr,useEffect:yo,useImperativeHandle:Mu,useInsertionEffect:$u,useLayoutEffect:Du,useMemo:Ou,useReducer:ho,useRef:Tu,useState:function(){return ho(Vs)},useDebugValue:xo,useDeferredValue:function(e){var t=Cr();return Uu(t,Ft.memoizedState,e)},useTransition:function(){var e=ho(Vs)[0],t=Cr().memoizedState;return[e,t]},useMutableSource:Su,useSyncExternalStore:ku,useId:zu,unstable_isNewReconciler:!1},Ym={readContext:kr,useCallback:Au,useContext:kr,useEffect:yo,useImperativeHandle:Mu,useInsertionEffect:$u,useLayoutEffect:Du,useMemo:Ou,useReducer:go,useRef:Tu,useState:function(){return go(Vs)},useDebugValue:xo,useDeferredValue:function(e){var t=Cr();return Ft===null?t.memoizedState=e:Uu(t,Ft.memoizedState,e)},useTransition:function(){var e=go(Vs)[0],t=Cr().memoizedState;return[e,t]},useMutableSource:Su,useSyncExternalStore:ku,useId:zu,unstable_isNewReconciler:!1};function Lr(e,t){if(e&&e.defaultProps){t=Q({},t),e=e.defaultProps;for(var n in e)t[n]===void 0&&(t[n]=e[n]);return t}return t}function vo(e,t,n,s){t=e.memoizedState,n=n(s,t),n=n==null?t:Q({},t,n),e.memoizedState=n,e.lanes===0&&(e.updateQueue.baseState=n)}var za={isMounted:function(e){return(e=e._reactInternals)?At(e)===e:!1},enqueueSetState:function(e,t,n){e=e._reactInternals;var s=sr(),a=Nn(e),o=Zr(s,a);o.payload=t,n!=null&&(o.callback=n),t=yn(e,o,a),t!==null&&(Fr(t,e,a,s),La(t,e,a))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var s=sr(),a=Nn(e),o=Zr(s,a);o.tag=1,o.payload=t,n!=null&&(o.callback=n),t=yn(e,o,a),t!==null&&(Fr(t,e,a,s),La(t,e,a))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=sr(),s=Nn(e),a=Zr(n,s);a.tag=2,t!=null&&(a.callback=t),t=yn(e,a,s),t!==null&&(Fr(t,e,s,n),La(t,e,s))}};function Vu(e,t,n,s,a,o,d){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(s,o,d):t.prototype&&t.prototype.isPureReactComponent?!Ts(n,s)||!Ts(a,o):!0}function Hu(e,t,n){var s=!1,a=pn,o=t.contextType;return typeof o=="object"&&o!==null?o=kr(o):(a=lr(t)?En:Jt.current,s=t.contextTypes,o=(s=s!=null)?Zn(e,a):pn),t=new t(n,o),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=za,e.stateNode=t,t._reactInternals=e,s&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=a,e.__reactInternalMemoizedMaskedChildContext=o),t}function Ku(e,t,n,s){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(n,s),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(n,s),t.state!==e&&za.enqueueReplaceState(t,t.state,null)}function bo(e,t,n,s){var a=e.stateNode;a.props=n,a.state=e.memoizedState,a.refs={},ao(e);var o=t.contextType;typeof o=="object"&&o!==null?a.context=kr(o):(o=lr(t)?En:Jt.current,a.context=Zn(e,o)),a.state=e.memoizedState,o=t.getDerivedStateFromProps,typeof o=="function"&&(vo(e,t,o,n),a.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof a.getSnapshotBeforeUpdate=="function"||typeof a.UNSAFE_componentWillMount!="function"&&typeof a.componentWillMount!="function"||(t=a.state,typeof a.componentWillMount=="function"&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount=="function"&&a.UNSAFE_componentWillMount(),t!==a.state&&za.enqueueReplaceState(a,a.state,null),$a(e,n,a,s),a.state=e.memoizedState),typeof a.componentDidMount=="function"&&(e.flags|=4194308)}function os(e,t){try{var n="",s=t;do n+=L(s),s=s.return;while(s);var a=n}catch(o){a=`
Error generating stack: `+o.message+`
`+o.stack}return{value:e,source:t,stack:a,digest:null}}function No(e,t,n){return{value:e,source:null,stack:n??null,digest:t??null}}function wo(e,t){try{console.error(t.value)}catch(n){setTimeout(function(){throw n})}}var Xm=typeof WeakMap=="function"?WeakMap:Map;function Qu(e,t,n){n=Zr(-1,n),n.tag=3,n.payload={element:null};var s=t.value;return n.callback=function(){Qa||(Qa=!0,Mo=s),wo(e,t)},n}function Ju(e,t,n){n=Zr(-1,n),n.tag=3;var s=e.type.getDerivedStateFromError;if(typeof s=="function"){var a=t.value;n.payload=function(){return s(a)},n.callback=function(){wo(e,t)}}var o=e.stateNode;return o!==null&&typeof o.componentDidCatch=="function"&&(n.callback=function(){wo(e,t),typeof s!="function"&&(vn===null?vn=new Set([this]):vn.add(this));var d=t.stack;this.componentDidCatch(t.value,{componentStack:d!==null?d:""})}),n}function Yu(e,t,n){var s=e.pingCache;if(s===null){s=e.pingCache=new Xm;var a=new Set;s.set(t,a)}else a=s.get(t),a===void 0&&(a=new Set,s.set(t,a));a.has(n)||(a.add(n),e=mf.bind(null,e,t,n),t.then(e,e))}function Xu(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function qu(e,t,n,s,a){return(e.mode&1)===0?(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(t=Zr(-1,1),t.tag=2,yn(n,t,1))),n.lanes|=1),e):(e.flags|=65536,e.lanes=a,e)}var qm=se.ReactCurrentOwner,or=!1;function nr(e,t,n,s){t.child=e===null?xu(t,null,n,s):ns(t,e.child,n,s)}function Zu(e,t,n,s,a){n=n.render;var o=t.ref;return as(t,a),s=fo(e,t,n,s,o,a),n=po(),e!==null&&!or?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~a,en(e,t,a)):(xt&&n&&Jl(t),t.flags|=1,nr(e,t,s,a),t.child)}function ec(e,t,n,s,a){if(e===null){var o=n.type;return typeof o=="function"&&!Wo(o)&&o.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(t.tag=15,t.type=o,tc(e,t,o,s,a)):(e=el(n.type,null,s,t,t.mode,a),e.ref=t.ref,e.return=t,t.child=e)}if(o=e.child,(e.lanes&a)===0){var d=o.memoizedProps;if(n=n.compare,n=n!==null?n:Ts,n(d,s)&&e.ref===t.ref)return en(e,t,a)}return t.flags|=1,e=jn(o,s),e.ref=t.ref,e.return=t,t.child=e}function tc(e,t,n,s,a){if(e!==null){var o=e.memoizedProps;if(Ts(o,s)&&e.ref===t.ref)if(or=!1,t.pendingProps=s=o,(e.lanes&a)!==0)(e.flags&131072)!==0&&(or=!0);else return t.lanes=e.lanes,en(e,t,a)}return jo(e,t,n,s,a)}function rc(e,t,n){var s=t.pendingProps,a=s.children,o=e!==null?e.memoizedState:null;if(s.mode==="hidden")if((t.mode&1)===0)t.memoizedState={baseLanes:0,cachePool:null,transitions:null},mt(us,hr),hr|=n;else{if((n&1073741824)===0)return e=o!==null?o.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,mt(us,hr),hr|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},s=o!==null?o.baseLanes:n,mt(us,hr),hr|=s}else o!==null?(s=o.baseLanes|n,t.memoizedState=null):s=n,mt(us,hr),hr|=s;return nr(e,t,a,n),t.child}function nc(e,t){var n=t.ref;(e===null&&n!==null||e!==null&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function jo(e,t,n,s,a){var o=lr(n)?En:Jt.current;return o=Zn(t,o),as(t,a),n=fo(e,t,n,s,o,a),s=po(),e!==null&&!or?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~a,en(e,t,a)):(xt&&s&&Jl(t),t.flags|=1,nr(e,t,n,a),t.child)}function sc(e,t,n,s,a){if(lr(n)){var o=!0;ka(t)}else o=!1;if(as(t,a),t.stateNode===null)Ba(e,t),Hu(t,n,s),bo(t,n,s,a),s=!0;else if(e===null){var d=t.stateNode,h=t.memoizedProps;d.props=h;var v=d.context,$=n.contextType;typeof $=="object"&&$!==null?$=kr($):($=lr(n)?En:Jt.current,$=Zn(t,$));var Z=n.getDerivedStateFromProps,re=typeof Z=="function"||typeof d.getSnapshotBeforeUpdate=="function";re||typeof d.UNSAFE_componentWillReceiveProps!="function"&&typeof d.componentWillReceiveProps!="function"||(h!==s||v!==$)&&Ku(t,d,s,$),gn=!1;var q=t.memoizedState;d.state=q,$a(t,s,d,a),v=t.memoizedState,h!==s||q!==v||ar.current||gn?(typeof Z=="function"&&(vo(t,n,Z,s),v=t.memoizedState),(h=gn||Vu(t,n,h,s,q,v,$))?(re||typeof d.UNSAFE_componentWillMount!="function"&&typeof d.componentWillMount!="function"||(typeof d.componentWillMount=="function"&&d.componentWillMount(),typeof d.UNSAFE_componentWillMount=="function"&&d.UNSAFE_componentWillMount()),typeof d.componentDidMount=="function"&&(t.flags|=4194308)):(typeof d.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=s,t.memoizedState=v),d.props=s,d.state=v,d.context=$,s=h):(typeof d.componentDidMount=="function"&&(t.flags|=4194308),s=!1)}else{d=t.stateNode,bu(e,t),h=t.memoizedProps,$=t.type===t.elementType?h:Lr(t.type,h),d.props=$,re=t.pendingProps,q=d.context,v=n.contextType,typeof v=="object"&&v!==null?v=kr(v):(v=lr(n)?En:Jt.current,v=Zn(t,v));var pe=n.getDerivedStateFromProps;(Z=typeof pe=="function"||typeof d.getSnapshotBeforeUpdate=="function")||typeof d.UNSAFE_componentWillReceiveProps!="function"&&typeof d.componentWillReceiveProps!="function"||(h!==re||q!==v)&&Ku(t,d,s,v),gn=!1,q=t.memoizedState,d.state=q,$a(t,s,d,a);var Ne=t.memoizedState;h!==re||q!==Ne||ar.current||gn?(typeof pe=="function"&&(vo(t,n,pe,s),Ne=t.memoizedState),($=gn||Vu(t,n,$,s,q,Ne,v)||!1)?(Z||typeof d.UNSAFE_componentWillUpdate!="function"&&typeof d.componentWillUpdate!="function"||(typeof d.componentWillUpdate=="function"&&d.componentWillUpdate(s,Ne,v),typeof d.UNSAFE_componentWillUpdate=="function"&&d.UNSAFE_componentWillUpdate(s,Ne,v)),typeof d.componentDidUpdate=="function"&&(t.flags|=4),typeof d.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof d.componentDidUpdate!="function"||h===e.memoizedProps&&q===e.memoizedState||(t.flags|=4),typeof d.getSnapshotBeforeUpdate!="function"||h===e.memoizedProps&&q===e.memoizedState||(t.flags|=1024),t.memoizedProps=s,t.memoizedState=Ne),d.props=s,d.state=Ne,d.context=v,s=$):(typeof d.componentDidUpdate!="function"||h===e.memoizedProps&&q===e.memoizedState||(t.flags|=4),typeof d.getSnapshotBeforeUpdate!="function"||h===e.memoizedProps&&q===e.memoizedState||(t.flags|=1024),s=!1)}return So(e,t,n,s,o,a)}function So(e,t,n,s,a,o){nc(e,t);var d=(t.flags&128)!==0;if(!s&&!d)return a&&uu(t,n,!1),en(e,t,o);s=t.stateNode,qm.current=t;var h=d&&typeof n.getDerivedStateFromError!="function"?null:s.render();return t.flags|=1,e!==null&&d?(t.child=ns(t,e.child,null,o),t.child=ns(t,null,h,o)):nr(e,t,h,o),t.memoizedState=s.state,a&&uu(t,n,!0),t.child}function ac(e){var t=e.stateNode;t.pendingContext?ou(e,t.pendingContext,t.pendingContext!==t.context):t.context&&ou(e,t.context,!1),lo(e,t.containerInfo)}function lc(e,t,n,s,a){return rs(),Zl(a),t.flags|=256,nr(e,t,n,s),t.child}var ko={dehydrated:null,treeContext:null,retryLane:0};function Co(e){return{baseLanes:e,cachePool:null,transitions:null}}function oc(e,t,n){var s=t.pendingProps,a=wt.current,o=!1,d=(t.flags&128)!==0,h;if((h=d)||(h=e!==null&&e.memoizedState===null?!1:(a&2)!==0),h?(o=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(a|=1),mt(wt,a&1),e===null)return ql(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?((t.mode&1)===0?t.lanes=1:e.data==="$!"?t.lanes=8:t.lanes=1073741824,null):(d=s.children,e=s.fallback,o?(s=t.mode,o=t.child,d={mode:"hidden",children:d},(s&1)===0&&o!==null?(o.childLanes=0,o.pendingProps=d):o=tl(d,s,0,null),e=An(e,s,n,null),o.return=t,e.return=t,o.sibling=e,t.child=o,t.child.memoizedState=Co(n),t.memoizedState=ko,e):Po(t,d));if(a=e.memoizedState,a!==null&&(h=a.dehydrated,h!==null))return Zm(e,t,d,s,h,a,n);if(o){o=s.fallback,d=t.mode,a=e.child,h=a.sibling;var v={mode:"hidden",children:s.children};return(d&1)===0&&t.child!==a?(s=t.child,s.childLanes=0,s.pendingProps=v,t.deletions=null):(s=jn(a,v),s.subtreeFlags=a.subtreeFlags&14680064),h!==null?o=jn(h,o):(o=An(o,d,n,null),o.flags|=2),o.return=t,s.return=t,s.sibling=o,t.child=s,s=o,o=t.child,d=e.child.memoizedState,d=d===null?Co(n):{baseLanes:d.baseLanes|n,cachePool:null,transitions:d.transitions},o.memoizedState=d,o.childLanes=e.childLanes&~n,t.memoizedState=ko,s}return o=e.child,e=o.sibling,s=jn(o,{mode:"visible",children:s.children}),(t.mode&1)===0&&(s.lanes=n),s.return=t,s.sibling=null,e!==null&&(n=t.deletions,n===null?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=s,t.memoizedState=null,s}function Po(e,t){return t=tl({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function Ga(e,t,n,s){return s!==null&&Zl(s),ns(t,e.child,null,n),e=Po(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function Zm(e,t,n,s,a,o,d){if(n)return t.flags&256?(t.flags&=-257,s=No(Error(i(422))),Ga(e,t,d,s)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(o=s.fallback,a=t.mode,s=tl({mode:"visible",children:s.children},a,0,null),o=An(o,a,d,null),o.flags|=2,s.return=t,o.return=t,s.sibling=o,t.child=s,(t.mode&1)!==0&&ns(t,e.child,null,d),t.child.memoizedState=Co(d),t.memoizedState=ko,o);if((t.mode&1)===0)return Ga(e,t,d,null);if(a.data==="$!"){if(s=a.nextSibling&&a.nextSibling.dataset,s)var h=s.dgst;return s=h,o=Error(i(419)),s=No(o,s,void 0),Ga(e,t,d,s)}if(h=(d&e.childLanes)!==0,or||h){if(s=zt,s!==null){switch(d&-d){case 4:a=2;break;case 16:a=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:a=32;break;case 536870912:a=268435456;break;default:a=0}a=(a&(s.suspendedLanes|d))!==0?0:a,a!==0&&a!==o.retryLane&&(o.retryLane=a,qr(e,a),Fr(s,e,a,-1))}return Bo(),s=No(Error(i(421))),Ga(e,t,d,s)}return a.data==="$?"?(t.flags|=128,t.child=e.child,t=ff.bind(null,e),a._reactRetry=t,null):(e=o.treeContext,pr=mn(a.nextSibling),fr=t,xt=!0,Tr=null,e!==null&&(jr[Sr++]=Yr,jr[Sr++]=Xr,jr[Sr++]=Rn,Yr=e.id,Xr=e.overflow,Rn=t),t=Po(t,s.children),t.flags|=4096,t)}function ic(e,t,n){e.lanes|=t;var s=e.alternate;s!==null&&(s.lanes|=t),no(e.return,t,n)}function Eo(e,t,n,s,a){var o=e.memoizedState;o===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:s,tail:n,tailMode:a}:(o.isBackwards=t,o.rendering=null,o.renderingStartTime=0,o.last=s,o.tail=n,o.tailMode=a)}function uc(e,t,n){var s=t.pendingProps,a=s.revealOrder,o=s.tail;if(nr(e,t,s.children,n),s=wt.current,(s&2)!==0)s=s&1|2,t.flags|=128;else{if(e!==null&&(e.flags&128)!==0)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&ic(e,n,t);else if(e.tag===19)ic(e,n,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}s&=1}if(mt(wt,s),(t.mode&1)===0)t.memoizedState=null;else switch(a){case"forwards":for(n=t.child,a=null;n!==null;)e=n.alternate,e!==null&&Da(e)===null&&(a=n),n=n.sibling;n=a,n===null?(a=t.child,t.child=null):(a=n.sibling,n.sibling=null),Eo(t,!1,a,n,o);break;case"backwards":for(n=null,a=t.child,t.child=null;a!==null;){if(e=a.alternate,e!==null&&Da(e)===null){t.child=a;break}e=a.sibling,a.sibling=n,n=a,a=e}Eo(t,!0,n,null,o);break;case"together":Eo(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Ba(e,t){(t.mode&1)===0&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function en(e,t,n){if(e!==null&&(t.dependencies=e.dependencies),$n|=t.lanes,(n&t.childLanes)===0)return null;if(e!==null&&t.child!==e.child)throw Error(i(153));if(t.child!==null){for(e=t.child,n=jn(e,e.pendingProps),t.child=n,n.return=t;e.sibling!==null;)e=e.sibling,n=n.sibling=jn(e,e.pendingProps),n.return=t;n.sibling=null}return t.child}function ef(e,t,n){switch(t.tag){case 3:ac(t),rs();break;case 5:ju(t);break;case 1:lr(t.type)&&ka(t);break;case 4:lo(t,t.stateNode.containerInfo);break;case 10:var s=t.type._context,a=t.memoizedProps.value;mt(_a,s._currentValue),s._currentValue=a;break;case 13:if(s=t.memoizedState,s!==null)return s.dehydrated!==null?(mt(wt,wt.current&1),t.flags|=128,null):(n&t.child.childLanes)!==0?oc(e,t,n):(mt(wt,wt.current&1),e=en(e,t,n),e!==null?e.sibling:null);mt(wt,wt.current&1);break;case 19:if(s=(n&t.childLanes)!==0,(e.flags&128)!==0){if(s)return uc(e,t,n);t.flags|=128}if(a=t.memoizedState,a!==null&&(a.rendering=null,a.tail=null,a.lastEffect=null),mt(wt,wt.current),s)break;return null;case 22:case 23:return t.lanes=0,rc(e,t,n)}return en(e,t,n)}var cc,Ro,dc,mc;cc=function(e,t){for(var n=t.child;n!==null;){if(n.tag===5||n.tag===6)e.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===t)break;for(;n.sibling===null;){if(n.return===null||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}},Ro=function(){},dc=function(e,t,n,s){var a=e.memoizedProps;if(a!==s){e=t.stateNode,Tn(Br.current);var o=null;switch(n){case"input":a=ot(e,a),s=ot(e,s),o=[];break;case"select":a=Q({},a,{value:void 0}),s=Q({},s,{value:void 0}),o=[];break;case"textarea":a=_e(e,a),s=_e(e,s),o=[];break;default:typeof a.onClick!="function"&&typeof s.onClick=="function"&&(e.onclick=wa)}it(n,s);var d;n=null;for($ in a)if(!s.hasOwnProperty($)&&a.hasOwnProperty($)&&a[$]!=null)if($==="style"){var h=a[$];for(d in h)h.hasOwnProperty(d)&&(n||(n={}),n[d]="")}else $!=="dangerouslySetInnerHTML"&&$!=="children"&&$!=="suppressContentEditableWarning"&&$!=="suppressHydrationWarning"&&$!=="autoFocus"&&(f.hasOwnProperty($)?o||(o=[]):(o=o||[]).push($,null));for($ in s){var v=s[$];if(h=a?.[$],s.hasOwnProperty($)&&v!==h&&(v!=null||h!=null))if($==="style")if(h){for(d in h)!h.hasOwnProperty(d)||v&&v.hasOwnProperty(d)||(n||(n={}),n[d]="");for(d in v)v.hasOwnProperty(d)&&h[d]!==v[d]&&(n||(n={}),n[d]=v[d])}else n||(o||(o=[]),o.push($,n)),n=v;else $==="dangerouslySetInnerHTML"?(v=v?v.__html:void 0,h=h?h.__html:void 0,v!=null&&h!==v&&(o=o||[]).push($,v)):$==="children"?typeof v!="string"&&typeof v!="number"||(o=o||[]).push($,""+v):$!=="suppressContentEditableWarning"&&$!=="suppressHydrationWarning"&&(f.hasOwnProperty($)?(v!=null&&$==="onScroll"&&pt("scroll",e),o||h===v||(o=[])):(o=o||[]).push($,v))}n&&(o=o||[]).push("style",n);var $=o;(t.updateQueue=$)&&(t.flags|=4)}},mc=function(e,t,n,s){n!==s&&(t.flags|=4)};function Ks(e,t){if(!xt)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;t!==null;)t.alternate!==null&&(n=t),t=t.sibling;n===null?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var s=null;n!==null;)n.alternate!==null&&(s=n),n=n.sibling;s===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:s.sibling=null}}function Xt(e){var t=e.alternate!==null&&e.alternate.child===e.child,n=0,s=0;if(t)for(var a=e.child;a!==null;)n|=a.lanes|a.childLanes,s|=a.subtreeFlags&14680064,s|=a.flags&14680064,a.return=e,a=a.sibling;else for(a=e.child;a!==null;)n|=a.lanes|a.childLanes,s|=a.subtreeFlags,s|=a.flags,a.return=e,a=a.sibling;return e.subtreeFlags|=s,e.childLanes=n,t}function tf(e,t,n){var s=t.pendingProps;switch(Yl(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Xt(t),null;case 1:return lr(t.type)&&Sa(),Xt(t),null;case 3:return s=t.stateNode,ls(),ht(ar),ht(Jt),uo(),s.pendingContext&&(s.context=s.pendingContext,s.pendingContext=null),(e===null||e.child===null)&&(Ra(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&(t.flags&256)===0||(t.flags|=1024,Tr!==null&&(Uo(Tr),Tr=null))),Ro(e,t),Xt(t),null;case 5:oo(t);var a=Tn(Gs.current);if(n=t.type,e!==null&&t.stateNode!=null)dc(e,t,n,s,a),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!s){if(t.stateNode===null)throw Error(i(166));return Xt(t),null}if(e=Tn(Br.current),Ra(t)){s=t.stateNode,n=t.type;var o=t.memoizedProps;switch(s[Gr]=t,s[Ms]=o,e=(t.mode&1)!==0,n){case"dialog":pt("cancel",s),pt("close",s);break;case"iframe":case"object":case"embed":pt("load",s);break;case"video":case"audio":for(a=0;a<$s.length;a++)pt($s[a],s);break;case"source":pt("error",s);break;case"img":case"image":case"link":pt("error",s),pt("load",s);break;case"details":pt("toggle",s);break;case"input":vr(s,o),pt("invalid",s);break;case"select":s._wrapperState={wasMultiple:!!o.multiple},pt("invalid",s);break;case"textarea":Ve(s,o),pt("invalid",s)}it(n,o),a=null;for(var d in o)if(o.hasOwnProperty(d)){var h=o[d];d==="children"?typeof h=="string"?s.textContent!==h&&(o.suppressHydrationWarning!==!0&&Na(s.textContent,h,e),a=["children",h]):typeof h=="number"&&s.textContent!==""+h&&(o.suppressHydrationWarning!==!0&&Na(s.textContent,h,e),a=["children",""+h]):f.hasOwnProperty(d)&&h!=null&&d==="onScroll"&&pt("scroll",s)}switch(n){case"input":He(s),Kr(s,o,!0);break;case"textarea":He(s),De(s);break;case"select":case"option":break;default:typeof o.onClick=="function"&&(s.onclick=wa)}s=a,t.updateQueue=s,s!==null&&(t.flags|=4)}else{d=a.nodeType===9?a:a.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=Se(n)),e==="http://www.w3.org/1999/xhtml"?n==="script"?(e=d.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof s.is=="string"?e=d.createElement(n,{is:s.is}):(e=d.createElement(n),n==="select"&&(d=e,s.multiple?d.multiple=!0:s.size&&(d.size=s.size))):e=d.createElementNS(e,n),e[Gr]=t,e[Ms]=s,cc(e,t,!1,!1),t.stateNode=e;e:{switch(d=Re(n,s),n){case"dialog":pt("cancel",e),pt("close",e),a=s;break;case"iframe":case"object":case"embed":pt("load",e),a=s;break;case"video":case"audio":for(a=0;a<$s.length;a++)pt($s[a],e);a=s;break;case"source":pt("error",e),a=s;break;case"img":case"image":case"link":pt("error",e),pt("load",e),a=s;break;case"details":pt("toggle",e),a=s;break;case"input":vr(e,s),a=ot(e,s),pt("invalid",e);break;case"option":a=s;break;case"select":e._wrapperState={wasMultiple:!!s.multiple},a=Q({},s,{value:void 0}),pt("invalid",e);break;case"textarea":Ve(e,s),a=_e(e,s),pt("invalid",e);break;default:a=s}it(n,a),h=a;for(o in h)if(h.hasOwnProperty(o)){var v=h[o];o==="style"?Pe(e,v):o==="dangerouslySetInnerHTML"?(v=v?v.__html:void 0,v!=null&&Ct(e,v)):o==="children"?typeof v=="string"?(n!=="textarea"||v!=="")&&St(e,v):typeof v=="number"&&St(e,""+v):o!=="suppressContentEditableWarning"&&o!=="suppressHydrationWarning"&&o!=="autoFocus"&&(f.hasOwnProperty(o)?v!=null&&o==="onScroll"&&pt("scroll",e):v!=null&&X(e,o,v,d))}switch(n){case"input":He(e),Kr(e,s,!1);break;case"textarea":He(e),De(e);break;case"option":s.value!=null&&e.setAttribute("value",""+me(s.value));break;case"select":e.multiple=!!s.multiple,o=s.value,o!=null?be(e,!!s.multiple,o,!1):s.defaultValue!=null&&be(e,!!s.multiple,s.defaultValue,!0);break;default:typeof a.onClick=="function"&&(e.onclick=wa)}switch(n){case"button":case"input":case"select":case"textarea":s=!!s.autoFocus;break e;case"img":s=!0;break e;default:s=!1}}s&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return Xt(t),null;case 6:if(e&&t.stateNode!=null)mc(e,t,e.memoizedProps,s);else{if(typeof s!="string"&&t.stateNode===null)throw Error(i(166));if(n=Tn(Gs.current),Tn(Br.current),Ra(t)){if(s=t.stateNode,n=t.memoizedProps,s[Gr]=t,(o=s.nodeValue!==n)&&(e=fr,e!==null))switch(e.tag){case 3:Na(s.nodeValue,n,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&Na(s.nodeValue,n,(e.mode&1)!==0)}o&&(t.flags|=4)}else s=(n.nodeType===9?n:n.ownerDocument).createTextNode(s),s[Gr]=t,t.stateNode=s}return Xt(t),null;case 13:if(ht(wt),s=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(xt&&pr!==null&&(t.mode&1)!==0&&(t.flags&128)===0)hu(),rs(),t.flags|=98560,o=!1;else if(o=Ra(t),s!==null&&s.dehydrated!==null){if(e===null){if(!o)throw Error(i(318));if(o=t.memoizedState,o=o!==null?o.dehydrated:null,!o)throw Error(i(317));o[Gr]=t}else rs(),(t.flags&128)===0&&(t.memoizedState=null),t.flags|=4;Xt(t),o=!1}else Tr!==null&&(Uo(Tr),Tr=null),o=!0;if(!o)return t.flags&65536?t:null}return(t.flags&128)!==0?(t.lanes=n,t):(s=s!==null,s!==(e!==null&&e.memoizedState!==null)&&s&&(t.child.flags|=8192,(t.mode&1)!==0&&(e===null||(wt.current&1)!==0?Mt===0&&(Mt=3):Bo())),t.updateQueue!==null&&(t.flags|=4),Xt(t),null);case 4:return ls(),Ro(e,t),e===null&&Ds(t.stateNode.containerInfo),Xt(t),null;case 10:return ro(t.type._context),Xt(t),null;case 17:return lr(t.type)&&Sa(),Xt(t),null;case 19:if(ht(wt),o=t.memoizedState,o===null)return Xt(t),null;if(s=(t.flags&128)!==0,d=o.rendering,d===null)if(s)Ks(o,!1);else{if(Mt!==0||e!==null&&(e.flags&128)!==0)for(e=t.child;e!==null;){if(d=Da(e),d!==null){for(t.flags|=128,Ks(o,!1),s=d.updateQueue,s!==null&&(t.updateQueue=s,t.flags|=4),t.subtreeFlags=0,s=n,n=t.child;n!==null;)o=n,e=s,o.flags&=14680066,d=o.alternate,d===null?(o.childLanes=0,o.lanes=e,o.child=null,o.subtreeFlags=0,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null,o.stateNode=null):(o.childLanes=d.childLanes,o.lanes=d.lanes,o.child=d.child,o.subtreeFlags=0,o.deletions=null,o.memoizedProps=d.memoizedProps,o.memoizedState=d.memoizedState,o.updateQueue=d.updateQueue,o.type=d.type,e=d.dependencies,o.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return mt(wt,wt.current&1|2),t.child}e=e.sibling}o.tail!==null&&ut()>cs&&(t.flags|=128,s=!0,Ks(o,!1),t.lanes=4194304)}else{if(!s)if(e=Da(d),e!==null){if(t.flags|=128,s=!0,n=e.updateQueue,n!==null&&(t.updateQueue=n,t.flags|=4),Ks(o,!0),o.tail===null&&o.tailMode==="hidden"&&!d.alternate&&!xt)return Xt(t),null}else 2*ut()-o.renderingStartTime>cs&&n!==1073741824&&(t.flags|=128,s=!0,Ks(o,!1),t.lanes=4194304);o.isBackwards?(d.sibling=t.child,t.child=d):(n=o.last,n!==null?n.sibling=d:t.child=d,o.last=d)}return o.tail!==null?(t=o.tail,o.rendering=t,o.tail=t.sibling,o.renderingStartTime=ut(),t.sibling=null,n=wt.current,mt(wt,s?n&1|2:n&1),t):(Xt(t),null);case 22:case 23:return Go(),s=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==s&&(t.flags|=8192),s&&(t.mode&1)!==0?(hr&1073741824)!==0&&(Xt(t),t.subtreeFlags&6&&(t.flags|=8192)):Xt(t),null;case 24:return null;case 25:return null}throw Error(i(156,t.tag))}function rf(e,t){switch(Yl(t),t.tag){case 1:return lr(t.type)&&Sa(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return ls(),ht(ar),ht(Jt),uo(),e=t.flags,(e&65536)!==0&&(e&128)===0?(t.flags=e&-65537|128,t):null;case 5:return oo(t),null;case 13:if(ht(wt),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(i(340));rs()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return ht(wt),null;case 4:return ls(),null;case 10:return ro(t.type._context),null;case 22:case 23:return Go(),null;case 24:return null;default:return null}}var Wa=!1,qt=!1,nf=typeof WeakSet=="function"?WeakSet:Set,ve=null;function is(e,t){var n=e.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(s){kt(e,t,s)}else n.current=null}function Io(e,t,n){try{n()}catch(s){kt(e,t,s)}}var fc=!1;function sf(e,t){if(zl=ca,e=Vi(),Ll(e)){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{n=(n=e.ownerDocument)&&n.defaultView||window;var s=n.getSelection&&n.getSelection();if(s&&s.rangeCount!==0){n=s.anchorNode;var a=s.anchorOffset,o=s.focusNode;s=s.focusOffset;try{n.nodeType,o.nodeType}catch{n=null;break e}var d=0,h=-1,v=-1,$=0,Z=0,re=e,q=null;t:for(;;){for(var pe;re!==n||a!==0&&re.nodeType!==3||(h=d+a),re!==o||s!==0&&re.nodeType!==3||(v=d+s),re.nodeType===3&&(d+=re.nodeValue.length),(pe=re.firstChild)!==null;)q=re,re=pe;for(;;){if(re===e)break t;if(q===n&&++$===a&&(h=d),q===o&&++Z===s&&(v=d),(pe=re.nextSibling)!==null)break;re=q,q=re.parentNode}re=pe}n=h===-1||v===-1?null:{start:h,end:v}}else n=null}n=n||{start:0,end:0}}else n=null;for(Gl={focusedElem:e,selectionRange:n},ca=!1,ve=t;ve!==null;)if(t=ve,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,ve=e;else for(;ve!==null;){t=ve;try{var Ne=t.alternate;if((t.flags&1024)!==0)switch(t.tag){case 0:case 11:case 15:break;case 1:if(Ne!==null){var we=Ne.memoizedProps,Et=Ne.memoizedState,S=t.stateNode,N=S.getSnapshotBeforeUpdate(t.elementType===t.type?we:Lr(t.type,we),Et);S.__reactInternalSnapshotBeforeUpdate=N}break;case 3:var I=t.stateNode.containerInfo;I.nodeType===1?I.textContent="":I.nodeType===9&&I.documentElement&&I.removeChild(I.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(i(163))}}catch(ie){kt(t,t.return,ie)}if(e=t.sibling,e!==null){e.return=t.return,ve=e;break}ve=t.return}return Ne=fc,fc=!1,Ne}function Qs(e,t,n){var s=t.updateQueue;if(s=s!==null?s.lastEffect:null,s!==null){var a=s=s.next;do{if((a.tag&e)===e){var o=a.destroy;a.destroy=void 0,o!==void 0&&Io(t,n,o)}a=a.next}while(a!==s)}}function Va(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var n=t=t.next;do{if((n.tag&e)===e){var s=n.create;n.destroy=s()}n=n.next}while(n!==t)}}function _o(e){var t=e.ref;if(t!==null){var n=e.stateNode;e.tag,e=n,typeof t=="function"?t(e):t.current=e}}function pc(e){var t=e.alternate;t!==null&&(e.alternate=null,pc(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[Gr],delete t[Ms],delete t[Hl],delete t[Um],delete t[zm])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function hc(e){return e.tag===5||e.tag===3||e.tag===4}function gc(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||hc(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function To(e,t,n){var s=e.tag;if(s===5||s===6)e=e.stateNode,t?n.nodeType===8?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(n.nodeType===8?(t=n.parentNode,t.insertBefore(e,n)):(t=n,t.appendChild(e)),n=n._reactRootContainer,n!=null||t.onclick!==null||(t.onclick=wa));else if(s!==4&&(e=e.child,e!==null))for(To(e,t,n),e=e.sibling;e!==null;)To(e,t,n),e=e.sibling}function Lo(e,t,n){var s=e.tag;if(s===5||s===6)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(s!==4&&(e=e.child,e!==null))for(Lo(e,t,n),e=e.sibling;e!==null;)Lo(e,t,n),e=e.sibling}var Vt=null,$r=!1;function xn(e,t,n){for(n=n.child;n!==null;)yc(e,t,n),n=n.sibling}function yc(e,t,n){if(Nr&&typeof Nr.onCommitFiberUnmount=="function")try{Nr.onCommitFiberUnmount(Gn,n)}catch{}switch(n.tag){case 5:qt||is(n,t);case 6:var s=Vt,a=$r;Vt=null,xn(e,t,n),Vt=s,$r=a,Vt!==null&&($r?(e=Vt,n=n.stateNode,e.nodeType===8?e.parentNode.removeChild(n):e.removeChild(n)):Vt.removeChild(n.stateNode));break;case 18:Vt!==null&&($r?(e=Vt,n=n.stateNode,e.nodeType===8?Vl(e.parentNode,n):e.nodeType===1&&Vl(e,n),Cs(e)):Vl(Vt,n.stateNode));break;case 4:s=Vt,a=$r,Vt=n.stateNode.containerInfo,$r=!0,xn(e,t,n),Vt=s,$r=a;break;case 0:case 11:case 14:case 15:if(!qt&&(s=n.updateQueue,s!==null&&(s=s.lastEffect,s!==null))){a=s=s.next;do{var o=a,d=o.destroy;o=o.tag,d!==void 0&&((o&2)!==0||(o&4)!==0)&&Io(n,t,d),a=a.next}while(a!==s)}xn(e,t,n);break;case 1:if(!qt&&(is(n,t),s=n.stateNode,typeof s.componentWillUnmount=="function"))try{s.props=n.memoizedProps,s.state=n.memoizedState,s.componentWillUnmount()}catch(h){kt(n,t,h)}xn(e,t,n);break;case 21:xn(e,t,n);break;case 22:n.mode&1?(qt=(s=qt)||n.memoizedState!==null,xn(e,t,n),qt=s):xn(e,t,n);break;default:xn(e,t,n)}}function xc(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var n=e.stateNode;n===null&&(n=e.stateNode=new nf),t.forEach(function(s){var a=pf.bind(null,e,s);n.has(s)||(n.add(s),s.then(a,a))})}}function Dr(e,t){var n=t.deletions;if(n!==null)for(var s=0;s<n.length;s++){var a=n[s];try{var o=e,d=t,h=d;e:for(;h!==null;){switch(h.tag){case 5:Vt=h.stateNode,$r=!1;break e;case 3:Vt=h.stateNode.containerInfo,$r=!0;break e;case 4:Vt=h.stateNode.containerInfo,$r=!0;break e}h=h.return}if(Vt===null)throw Error(i(160));yc(o,d,a),Vt=null,$r=!1;var v=a.alternate;v!==null&&(v.return=null),a.return=null}catch($){kt(a,t,$)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)vc(t,e),t=t.sibling}function vc(e,t){var n=e.alternate,s=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(Dr(t,e),Vr(e),s&4){try{Qs(3,e,e.return),Va(3,e)}catch(we){kt(e,e.return,we)}try{Qs(5,e,e.return)}catch(we){kt(e,e.return,we)}}break;case 1:Dr(t,e),Vr(e),s&512&&n!==null&&is(n,n.return);break;case 5:if(Dr(t,e),Vr(e),s&512&&n!==null&&is(n,n.return),e.flags&32){var a=e.stateNode;try{St(a,"")}catch(we){kt(e,e.return,we)}}if(s&4&&(a=e.stateNode,a!=null)){var o=e.memoizedProps,d=n!==null?n.memoizedProps:o,h=e.type,v=e.updateQueue;if(e.updateQueue=null,v!==null)try{h==="input"&&o.type==="radio"&&o.name!=null&&Bt(a,o),Re(h,d);var $=Re(h,o);for(d=0;d<v.length;d+=2){var Z=v[d],re=v[d+1];Z==="style"?Pe(a,re):Z==="dangerouslySetInnerHTML"?Ct(a,re):Z==="children"?St(a,re):X(a,Z,re,$)}switch(h){case"input":Kt(a,o);break;case"textarea":bt(a,o);break;case"select":var q=a._wrapperState.wasMultiple;a._wrapperState.wasMultiple=!!o.multiple;var pe=o.value;pe!=null?be(a,!!o.multiple,pe,!1):q!==!!o.multiple&&(o.defaultValue!=null?be(a,!!o.multiple,o.defaultValue,!0):be(a,!!o.multiple,o.multiple?[]:"",!1))}a[Ms]=o}catch(we){kt(e,e.return,we)}}break;case 6:if(Dr(t,e),Vr(e),s&4){if(e.stateNode===null)throw Error(i(162));a=e.stateNode,o=e.memoizedProps;try{a.nodeValue=o}catch(we){kt(e,e.return,we)}}break;case 3:if(Dr(t,e),Vr(e),s&4&&n!==null&&n.memoizedState.isDehydrated)try{Cs(t.containerInfo)}catch(we){kt(e,e.return,we)}break;case 4:Dr(t,e),Vr(e);break;case 13:Dr(t,e),Vr(e),a=e.child,a.flags&8192&&(o=a.memoizedState!==null,a.stateNode.isHidden=o,!o||a.alternate!==null&&a.alternate.memoizedState!==null||(Fo=ut())),s&4&&xc(e);break;case 22:if(Z=n!==null&&n.memoizedState!==null,e.mode&1?(qt=($=qt)||Z,Dr(t,e),qt=$):Dr(t,e),Vr(e),s&8192){if($=e.memoizedState!==null,(e.stateNode.isHidden=$)&&!Z&&(e.mode&1)!==0)for(ve=e,Z=e.child;Z!==null;){for(re=ve=Z;ve!==null;){switch(q=ve,pe=q.child,q.tag){case 0:case 11:case 14:case 15:Qs(4,q,q.return);break;case 1:is(q,q.return);var Ne=q.stateNode;if(typeof Ne.componentWillUnmount=="function"){s=q,n=q.return;try{t=s,Ne.props=t.memoizedProps,Ne.state=t.memoizedState,Ne.componentWillUnmount()}catch(we){kt(s,n,we)}}break;case 5:is(q,q.return);break;case 22:if(q.memoizedState!==null){wc(re);continue}}pe!==null?(pe.return=q,ve=pe):wc(re)}Z=Z.sibling}e:for(Z=null,re=e;;){if(re.tag===5){if(Z===null){Z=re;try{a=re.stateNode,$?(o=a.style,typeof o.setProperty=="function"?o.setProperty("display","none","important"):o.display="none"):(h=re.stateNode,v=re.memoizedProps.style,d=v!=null&&v.hasOwnProperty("display")?v.display:null,h.style.display=ye("display",d))}catch(we){kt(e,e.return,we)}}}else if(re.tag===6){if(Z===null)try{re.stateNode.nodeValue=$?"":re.memoizedProps}catch(we){kt(e,e.return,we)}}else if((re.tag!==22&&re.tag!==23||re.memoizedState===null||re===e)&&re.child!==null){re.child.return=re,re=re.child;continue}if(re===e)break e;for(;re.sibling===null;){if(re.return===null||re.return===e)break e;Z===re&&(Z=null),re=re.return}Z===re&&(Z=null),re.sibling.return=re.return,re=re.sibling}}break;case 19:Dr(t,e),Vr(e),s&4&&xc(e);break;case 21:break;default:Dr(t,e),Vr(e)}}function Vr(e){var t=e.flags;if(t&2){try{e:{for(var n=e.return;n!==null;){if(hc(n)){var s=n;break e}n=n.return}throw Error(i(160))}switch(s.tag){case 5:var a=s.stateNode;s.flags&32&&(St(a,""),s.flags&=-33);var o=gc(e);Lo(e,o,a);break;case 3:case 4:var d=s.stateNode.containerInfo,h=gc(e);To(e,h,d);break;default:throw Error(i(161))}}catch(v){kt(e,e.return,v)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function af(e,t,n){ve=e,bc(e)}function bc(e,t,n){for(var s=(e.mode&1)!==0;ve!==null;){var a=ve,o=a.child;if(a.tag===22&&s){var d=a.memoizedState!==null||Wa;if(!d){var h=a.alternate,v=h!==null&&h.memoizedState!==null||qt;h=Wa;var $=qt;if(Wa=d,(qt=v)&&!$)for(ve=a;ve!==null;)d=ve,v=d.child,d.tag===22&&d.memoizedState!==null?jc(a):v!==null?(v.return=d,ve=v):jc(a);for(;o!==null;)ve=o,bc(o),o=o.sibling;ve=a,Wa=h,qt=$}Nc(e)}else(a.subtreeFlags&8772)!==0&&o!==null?(o.return=a,ve=o):Nc(e)}}function Nc(e){for(;ve!==null;){var t=ve;if((t.flags&8772)!==0){var n=t.alternate;try{if((t.flags&8772)!==0)switch(t.tag){case 0:case 11:case 15:qt||Va(5,t);break;case 1:var s=t.stateNode;if(t.flags&4&&!qt)if(n===null)s.componentDidMount();else{var a=t.elementType===t.type?n.memoizedProps:Lr(t.type,n.memoizedProps);s.componentDidUpdate(a,n.memoizedState,s.__reactInternalSnapshotBeforeUpdate)}var o=t.updateQueue;o!==null&&wu(t,o,s);break;case 3:var d=t.updateQueue;if(d!==null){if(n=null,t.child!==null)switch(t.child.tag){case 5:n=t.child.stateNode;break;case 1:n=t.child.stateNode}wu(t,d,n)}break;case 5:var h=t.stateNode;if(n===null&&t.flags&4){n=h;var v=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":v.autoFocus&&n.focus();break;case"img":v.src&&(n.src=v.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var $=t.alternate;if($!==null){var Z=$.memoizedState;if(Z!==null){var re=Z.dehydrated;re!==null&&Cs(re)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(i(163))}qt||t.flags&512&&_o(t)}catch(q){kt(t,t.return,q)}}if(t===e){ve=null;break}if(n=t.sibling,n!==null){n.return=t.return,ve=n;break}ve=t.return}}function wc(e){for(;ve!==null;){var t=ve;if(t===e){ve=null;break}var n=t.sibling;if(n!==null){n.return=t.return,ve=n;break}ve=t.return}}function jc(e){for(;ve!==null;){var t=ve;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{Va(4,t)}catch(v){kt(t,n,v)}break;case 1:var s=t.stateNode;if(typeof s.componentDidMount=="function"){var a=t.return;try{s.componentDidMount()}catch(v){kt(t,a,v)}}var o=t.return;try{_o(t)}catch(v){kt(t,o,v)}break;case 5:var d=t.return;try{_o(t)}catch(v){kt(t,d,v)}}}catch(v){kt(t,t.return,v)}if(t===e){ve=null;break}var h=t.sibling;if(h!==null){h.return=t.return,ve=h;break}ve=t.return}}var lf=Math.ceil,Ha=se.ReactCurrentDispatcher,$o=se.ReactCurrentOwner,Pr=se.ReactCurrentBatchConfig,Ze=0,zt=null,It=null,Ht=0,hr=0,us=fn(0),Mt=0,Js=null,$n=0,Ka=0,Do=0,Ys=null,ir=null,Fo=0,cs=1/0,tn=null,Qa=!1,Mo=null,vn=null,Ja=!1,bn=null,Ya=0,Xs=0,Ao=null,Xa=-1,qa=0;function sr(){return(Ze&6)!==0?ut():Xa!==-1?Xa:Xa=ut()}function Nn(e){return(e.mode&1)===0?1:(Ze&2)!==0&&Ht!==0?Ht&-Ht:Bm.transition!==null?(qa===0&&(qa=et()),qa):(e=Be,e!==0||(e=window.event,e=e===void 0?16:ki(e.type)),e)}function Fr(e,t,n,s){if(50<Xs)throw Xs=0,Ao=null,Error(i(185));rr(e,n,s),((Ze&2)===0||e!==zt)&&(e===zt&&((Ze&2)===0&&(Ka|=n),Mt===4&&wn(e,Ht)),ur(e,s),n===1&&Ze===0&&(t.mode&1)===0&&(cs=ut()+500,Ca&&hn()))}function ur(e,t){var n=e.callbackNode;oe(e,t);var s=G(e,e===zt?Ht:0);if(s===0)n!==null&&zr(n),e.callbackNode=null,e.callbackPriority=0;else if(t=s&-s,e.callbackPriority!==t){if(n!=null&&zr(n),t===1)e.tag===0?Gm(kc.bind(null,e)):cu(kc.bind(null,e)),Am(function(){(Ze&6)===0&&hn()}),n=null;else{switch(wr(s)){case 1:n=xs;break;case 4:n=la;break;case 16:n=zn;break;case 536870912:n=vs;break;default:n=zn}n=Lc(n,Sc.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function Sc(e,t){if(Xa=-1,qa=0,(Ze&6)!==0)throw Error(i(327));var n=e.callbackNode;if(ds()&&e.callbackNode!==n)return null;var s=G(e,e===zt?Ht:0);if(s===0)return null;if((s&30)!==0||(s&e.expiredLanes)!==0||t)t=Za(e,s);else{t=s;var a=Ze;Ze|=2;var o=Pc();(zt!==e||Ht!==t)&&(tn=null,cs=ut()+500,Fn(e,t));do try{cf();break}catch(h){Cc(e,h)}while(!0);to(),Ha.current=o,Ze=a,It!==null?t=0:(zt=null,Ht=0,t=Mt)}if(t!==0){if(t===2&&(a=Ce(e),a!==0&&(s=a,t=Oo(e,a))),t===1)throw n=Js,Fn(e,0),wn(e,s),ur(e,ut()),n;if(t===6)wn(e,s);else{if(a=e.current.alternate,(s&30)===0&&!of(a)&&(t=Za(e,s),t===2&&(o=Ce(e),o!==0&&(s=o,t=Oo(e,o))),t===1))throw n=Js,Fn(e,0),wn(e,s),ur(e,ut()),n;switch(e.finishedWork=a,e.finishedLanes=s,t){case 0:case 1:throw Error(i(345));case 2:Mn(e,ir,tn);break;case 3:if(wn(e,s),(s&130023424)===s&&(t=Fo+500-ut(),10<t)){if(G(e,0)!==0)break;if(a=e.suspendedLanes,(a&s)!==s){sr(),e.pingedLanes|=e.suspendedLanes&a;break}e.timeoutHandle=Wl(Mn.bind(null,e,ir,tn),t);break}Mn(e,ir,tn);break;case 4:if(wn(e,s),(s&4194240)===s)break;for(t=e.eventTimes,a=-1;0<s;){var d=31-tr(s);o=1<<d,d=t[d],d>a&&(a=d),s&=~o}if(s=a,s=ut()-s,s=(120>s?120:480>s?480:1080>s?1080:1920>s?1920:3e3>s?3e3:4320>s?4320:1960*lf(s/1960))-s,10<s){e.timeoutHandle=Wl(Mn.bind(null,e,ir,tn),s);break}Mn(e,ir,tn);break;case 5:Mn(e,ir,tn);break;default:throw Error(i(329))}}}return ur(e,ut()),e.callbackNode===n?Sc.bind(null,e):null}function Oo(e,t){var n=Ys;return e.current.memoizedState.isDehydrated&&(Fn(e,t).flags|=256),e=Za(e,t),e!==2&&(t=ir,ir=n,t!==null&&Uo(t)),e}function Uo(e){ir===null?ir=e:ir.push.apply(ir,e)}function of(e){for(var t=e;;){if(t.flags&16384){var n=t.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var s=0;s<n.length;s++){var a=n[s],o=a.getSnapshot;a=a.value;try{if(!_r(o(),a))return!1}catch{return!1}}}if(n=t.child,t.subtreeFlags&16384&&n!==null)n.return=t,t=n;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function wn(e,t){for(t&=~Do,t&=~Ka,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-tr(t),s=1<<n;e[n]=-1,t&=~s}}function kc(e){if((Ze&6)!==0)throw Error(i(327));ds();var t=G(e,0);if((t&1)===0)return ur(e,ut()),null;var n=Za(e,t);if(e.tag!==0&&n===2){var s=Ce(e);s!==0&&(t=s,n=Oo(e,s))}if(n===1)throw n=Js,Fn(e,0),wn(e,t),ur(e,ut()),n;if(n===6)throw Error(i(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,Mn(e,ir,tn),ur(e,ut()),null}function zo(e,t){var n=Ze;Ze|=1;try{return e(t)}finally{Ze=n,Ze===0&&(cs=ut()+500,Ca&&hn())}}function Dn(e){bn!==null&&bn.tag===0&&(Ze&6)===0&&ds();var t=Ze;Ze|=1;var n=Pr.transition,s=Be;try{if(Pr.transition=null,Be=1,e)return e()}finally{Be=s,Pr.transition=n,Ze=t,(Ze&6)===0&&hn()}}function Go(){hr=us.current,ht(us)}function Fn(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(n!==-1&&(e.timeoutHandle=-1,Mm(n)),It!==null)for(n=It.return;n!==null;){var s=n;switch(Yl(s),s.tag){case 1:s=s.type.childContextTypes,s!=null&&Sa();break;case 3:ls(),ht(ar),ht(Jt),uo();break;case 5:oo(s);break;case 4:ls();break;case 13:ht(wt);break;case 19:ht(wt);break;case 10:ro(s.type._context);break;case 22:case 23:Go()}n=n.return}if(zt=e,It=e=jn(e.current,null),Ht=hr=t,Mt=0,Js=null,Do=Ka=$n=0,ir=Ys=null,_n!==null){for(t=0;t<_n.length;t++)if(n=_n[t],s=n.interleaved,s!==null){n.interleaved=null;var a=s.next,o=n.pending;if(o!==null){var d=o.next;o.next=a,s.next=d}n.pending=s}_n=null}return e}function Cc(e,t){do{var n=It;try{if(to(),Fa.current=Ua,Ma){for(var s=jt.memoizedState;s!==null;){var a=s.queue;a!==null&&(a.pending=null),s=s.next}Ma=!1}if(Ln=0,Ut=Ft=jt=null,Bs=!1,Ws=0,$o.current=null,n===null||n.return===null){Mt=1,Js=t,It=null;break}e:{var o=e,d=n.return,h=n,v=t;if(t=Ht,h.flags|=32768,v!==null&&typeof v=="object"&&typeof v.then=="function"){var $=v,Z=h,re=Z.tag;if((Z.mode&1)===0&&(re===0||re===11||re===15)){var q=Z.alternate;q?(Z.updateQueue=q.updateQueue,Z.memoizedState=q.memoizedState,Z.lanes=q.lanes):(Z.updateQueue=null,Z.memoizedState=null)}var pe=Xu(d);if(pe!==null){pe.flags&=-257,qu(pe,d,h,o,t),pe.mode&1&&Yu(o,$,t),t=pe,v=$;var Ne=t.updateQueue;if(Ne===null){var we=new Set;we.add(v),t.updateQueue=we}else Ne.add(v);break e}else{if((t&1)===0){Yu(o,$,t),Bo();break e}v=Error(i(426))}}else if(xt&&h.mode&1){var Et=Xu(d);if(Et!==null){(Et.flags&65536)===0&&(Et.flags|=256),qu(Et,d,h,o,t),Zl(os(v,h));break e}}o=v=os(v,h),Mt!==4&&(Mt=2),Ys===null?Ys=[o]:Ys.push(o),o=d;do{switch(o.tag){case 3:o.flags|=65536,t&=-t,o.lanes|=t;var S=Qu(o,v,t);Nu(o,S);break e;case 1:h=v;var N=o.type,I=o.stateNode;if((o.flags&128)===0&&(typeof N.getDerivedStateFromError=="function"||I!==null&&typeof I.componentDidCatch=="function"&&(vn===null||!vn.has(I)))){o.flags|=65536,t&=-t,o.lanes|=t;var ie=Ju(o,h,t);Nu(o,ie);break e}}o=o.return}while(o!==null)}Rc(n)}catch(je){t=je,It===n&&n!==null&&(It=n=n.return);continue}break}while(!0)}function Pc(){var e=Ha.current;return Ha.current=Ua,e===null?Ua:e}function Bo(){(Mt===0||Mt===3||Mt===2)&&(Mt=4),zt===null||($n&268435455)===0&&(Ka&268435455)===0||wn(zt,Ht)}function Za(e,t){var n=Ze;Ze|=2;var s=Pc();(zt!==e||Ht!==t)&&(tn=null,Fn(e,t));do try{uf();break}catch(a){Cc(e,a)}while(!0);if(to(),Ze=n,Ha.current=s,It!==null)throw Error(i(261));return zt=null,Ht=0,Mt}function uf(){for(;It!==null;)Ec(It)}function cf(){for(;It!==null&&!Un();)Ec(It)}function Ec(e){var t=Tc(e.alternate,e,hr);e.memoizedProps=e.pendingProps,t===null?Rc(e):It=t,$o.current=null}function Rc(e){var t=e;do{var n=t.alternate;if(e=t.return,(t.flags&32768)===0){if(n=tf(n,t,hr),n!==null){It=n;return}}else{if(n=rf(n,t),n!==null){n.flags&=32767,It=n;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{Mt=6,It=null;return}}if(t=t.sibling,t!==null){It=t;return}It=t=e}while(t!==null);Mt===0&&(Mt=5)}function Mn(e,t,n){var s=Be,a=Pr.transition;try{Pr.transition=null,Be=1,df(e,t,n,s)}finally{Pr.transition=a,Be=s}return null}function df(e,t,n,s){do ds();while(bn!==null);if((Ze&6)!==0)throw Error(i(327));n=e.finishedWork;var a=e.finishedLanes;if(n===null)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(i(177));e.callbackNode=null,e.callbackPriority=0;var o=n.lanes|n.childLanes;if(Fe(e,o),e===zt&&(It=zt=null,Ht=0),(n.subtreeFlags&2064)===0&&(n.flags&2064)===0||Ja||(Ja=!0,Lc(zn,function(){return ds(),null})),o=(n.flags&15990)!==0,(n.subtreeFlags&15990)!==0||o){o=Pr.transition,Pr.transition=null;var d=Be;Be=1;var h=Ze;Ze|=4,$o.current=null,sf(e,n),vc(n,e),Im(Gl),ca=!!zl,Gl=zl=null,e.current=n,af(n),ys(),Ze=h,Be=d,Pr.transition=o}else e.current=n;if(Ja&&(Ja=!1,bn=e,Ya=a),o=e.pendingLanes,o===0&&(vn=null),vl(n.stateNode),ur(e,ut()),t!==null)for(s=e.onRecoverableError,n=0;n<t.length;n++)a=t[n],s(a.value,{componentStack:a.stack,digest:a.digest});if(Qa)throw Qa=!1,e=Mo,Mo=null,e;return(Ya&1)!==0&&e.tag!==0&&ds(),o=e.pendingLanes,(o&1)!==0?e===Ao?Xs++:(Xs=0,Ao=e):Xs=0,hn(),null}function ds(){if(bn!==null){var e=wr(Ya),t=Pr.transition,n=Be;try{if(Pr.transition=null,Be=16>e?16:e,bn===null)var s=!1;else{if(e=bn,bn=null,Ya=0,(Ze&6)!==0)throw Error(i(331));var a=Ze;for(Ze|=4,ve=e.current;ve!==null;){var o=ve,d=o.child;if((ve.flags&16)!==0){var h=o.deletions;if(h!==null){for(var v=0;v<h.length;v++){var $=h[v];for(ve=$;ve!==null;){var Z=ve;switch(Z.tag){case 0:case 11:case 15:Qs(8,Z,o)}var re=Z.child;if(re!==null)re.return=Z,ve=re;else for(;ve!==null;){Z=ve;var q=Z.sibling,pe=Z.return;if(pc(Z),Z===$){ve=null;break}if(q!==null){q.return=pe,ve=q;break}ve=pe}}}var Ne=o.alternate;if(Ne!==null){var we=Ne.child;if(we!==null){Ne.child=null;do{var Et=we.sibling;we.sibling=null,we=Et}while(we!==null)}}ve=o}}if((o.subtreeFlags&2064)!==0&&d!==null)d.return=o,ve=d;else e:for(;ve!==null;){if(o=ve,(o.flags&2048)!==0)switch(o.tag){case 0:case 11:case 15:Qs(9,o,o.return)}var S=o.sibling;if(S!==null){S.return=o.return,ve=S;break e}ve=o.return}}var N=e.current;for(ve=N;ve!==null;){d=ve;var I=d.child;if((d.subtreeFlags&2064)!==0&&I!==null)I.return=d,ve=I;else e:for(d=N;ve!==null;){if(h=ve,(h.flags&2048)!==0)try{switch(h.tag){case 0:case 11:case 15:Va(9,h)}}catch(je){kt(h,h.return,je)}if(h===d){ve=null;break e}var ie=h.sibling;if(ie!==null){ie.return=h.return,ve=ie;break e}ve=h.return}}if(Ze=a,hn(),Nr&&typeof Nr.onPostCommitFiberRoot=="function")try{Nr.onPostCommitFiberRoot(Gn,e)}catch{}s=!0}return s}finally{Be=n,Pr.transition=t}}return!1}function Ic(e,t,n){t=os(n,t),t=Qu(e,t,1),e=yn(e,t,1),t=sr(),e!==null&&(rr(e,1,t),ur(e,t))}function kt(e,t,n){if(e.tag===3)Ic(e,e,n);else for(;t!==null;){if(t.tag===3){Ic(t,e,n);break}else if(t.tag===1){var s=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof s.componentDidCatch=="function"&&(vn===null||!vn.has(s))){e=os(n,e),e=Ju(t,e,1),t=yn(t,e,1),e=sr(),t!==null&&(rr(t,1,e),ur(t,e));break}}t=t.return}}function mf(e,t,n){var s=e.pingCache;s!==null&&s.delete(t),t=sr(),e.pingedLanes|=e.suspendedLanes&n,zt===e&&(Ht&n)===n&&(Mt===4||Mt===3&&(Ht&130023424)===Ht&&500>ut()-Fo?Fn(e,0):Do|=n),ur(e,t)}function _c(e,t){t===0&&((e.mode&1)===0?t=1:(t=Bn,Bn<<=1,(Bn&130023424)===0&&(Bn=4194304)));var n=sr();e=qr(e,t),e!==null&&(rr(e,t,n),ur(e,n))}function ff(e){var t=e.memoizedState,n=0;t!==null&&(n=t.retryLane),_c(e,n)}function pf(e,t){var n=0;switch(e.tag){case 13:var s=e.stateNode,a=e.memoizedState;a!==null&&(n=a.retryLane);break;case 19:s=e.stateNode;break;default:throw Error(i(314))}s!==null&&s.delete(t),_c(e,n)}var Tc;Tc=function(e,t,n){if(e!==null)if(e.memoizedProps!==t.pendingProps||ar.current)or=!0;else{if((e.lanes&n)===0&&(t.flags&128)===0)return or=!1,ef(e,t,n);or=(e.flags&131072)!==0}else or=!1,xt&&(t.flags&1048576)!==0&&du(t,Ea,t.index);switch(t.lanes=0,t.tag){case 2:var s=t.type;Ba(e,t),e=t.pendingProps;var a=Zn(t,Jt.current);as(t,n),a=fo(null,t,s,e,a,n);var o=po();return t.flags|=1,typeof a=="object"&&a!==null&&typeof a.render=="function"&&a.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,lr(s)?(o=!0,ka(t)):o=!1,t.memoizedState=a.state!==null&&a.state!==void 0?a.state:null,ao(t),a.updater=za,t.stateNode=a,a._reactInternals=t,bo(t,s,e,n),t=So(null,t,s,!0,o,n)):(t.tag=0,xt&&o&&Jl(t),nr(null,t,a,n),t=t.child),t;case 16:s=t.elementType;e:{switch(Ba(e,t),e=t.pendingProps,a=s._init,s=a(s._payload),t.type=s,a=t.tag=gf(s),e=Lr(s,e),a){case 0:t=jo(null,t,s,e,n);break e;case 1:t=sc(null,t,s,e,n);break e;case 11:t=Zu(null,t,s,e,n);break e;case 14:t=ec(null,t,s,Lr(s.type,e),n);break e}throw Error(i(306,s,""))}return t;case 0:return s=t.type,a=t.pendingProps,a=t.elementType===s?a:Lr(s,a),jo(e,t,s,a,n);case 1:return s=t.type,a=t.pendingProps,a=t.elementType===s?a:Lr(s,a),sc(e,t,s,a,n);case 3:e:{if(ac(t),e===null)throw Error(i(387));s=t.pendingProps,o=t.memoizedState,a=o.element,bu(e,t),$a(t,s,null,n);var d=t.memoizedState;if(s=d.element,o.isDehydrated)if(o={element:s,isDehydrated:!1,cache:d.cache,pendingSuspenseBoundaries:d.pendingSuspenseBoundaries,transitions:d.transitions},t.updateQueue.baseState=o,t.memoizedState=o,t.flags&256){a=os(Error(i(423)),t),t=lc(e,t,s,n,a);break e}else if(s!==a){a=os(Error(i(424)),t),t=lc(e,t,s,n,a);break e}else for(pr=mn(t.stateNode.containerInfo.firstChild),fr=t,xt=!0,Tr=null,n=xu(t,null,s,n),t.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(rs(),s===a){t=en(e,t,n);break e}nr(e,t,s,n)}t=t.child}return t;case 5:return ju(t),e===null&&ql(t),s=t.type,a=t.pendingProps,o=e!==null?e.memoizedProps:null,d=a.children,Bl(s,a)?d=null:o!==null&&Bl(s,o)&&(t.flags|=32),nc(e,t),nr(e,t,d,n),t.child;case 6:return e===null&&ql(t),null;case 13:return oc(e,t,n);case 4:return lo(t,t.stateNode.containerInfo),s=t.pendingProps,e===null?t.child=ns(t,null,s,n):nr(e,t,s,n),t.child;case 11:return s=t.type,a=t.pendingProps,a=t.elementType===s?a:Lr(s,a),Zu(e,t,s,a,n);case 7:return nr(e,t,t.pendingProps,n),t.child;case 8:return nr(e,t,t.pendingProps.children,n),t.child;case 12:return nr(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(s=t.type._context,a=t.pendingProps,o=t.memoizedProps,d=a.value,mt(_a,s._currentValue),s._currentValue=d,o!==null)if(_r(o.value,d)){if(o.children===a.children&&!ar.current){t=en(e,t,n);break e}}else for(o=t.child,o!==null&&(o.return=t);o!==null;){var h=o.dependencies;if(h!==null){d=o.child;for(var v=h.firstContext;v!==null;){if(v.context===s){if(o.tag===1){v=Zr(-1,n&-n),v.tag=2;var $=o.updateQueue;if($!==null){$=$.shared;var Z=$.pending;Z===null?v.next=v:(v.next=Z.next,Z.next=v),$.pending=v}}o.lanes|=n,v=o.alternate,v!==null&&(v.lanes|=n),no(o.return,n,t),h.lanes|=n;break}v=v.next}}else if(o.tag===10)d=o.type===t.type?null:o.child;else if(o.tag===18){if(d=o.return,d===null)throw Error(i(341));d.lanes|=n,h=d.alternate,h!==null&&(h.lanes|=n),no(d,n,t),d=o.sibling}else d=o.child;if(d!==null)d.return=o;else for(d=o;d!==null;){if(d===t){d=null;break}if(o=d.sibling,o!==null){o.return=d.return,d=o;break}d=d.return}o=d}nr(e,t,a.children,n),t=t.child}return t;case 9:return a=t.type,s=t.pendingProps.children,as(t,n),a=kr(a),s=s(a),t.flags|=1,nr(e,t,s,n),t.child;case 14:return s=t.type,a=Lr(s,t.pendingProps),a=Lr(s.type,a),ec(e,t,s,a,n);case 15:return tc(e,t,t.type,t.pendingProps,n);case 17:return s=t.type,a=t.pendingProps,a=t.elementType===s?a:Lr(s,a),Ba(e,t),t.tag=1,lr(s)?(e=!0,ka(t)):e=!1,as(t,n),Hu(t,s,a),bo(t,s,a,n),So(null,t,s,!0,e,n);case 19:return uc(e,t,n);case 22:return rc(e,t,n)}throw Error(i(156,t.tag))};function Lc(e,t){return Ur(e,t)}function hf(e,t,n,s){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=s,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Er(e,t,n,s){return new hf(e,t,n,s)}function Wo(e){return e=e.prototype,!(!e||!e.isReactComponent)}function gf(e){if(typeof e=="function")return Wo(e)?1:0;if(e!=null){if(e=e.$$typeof,e===xe)return 11;if(e===Ue)return 14}return 2}function jn(e,t){var n=e.alternate;return n===null?(n=Er(e.tag,t,e.key,e.mode),n.elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=e.flags&14680064,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function el(e,t,n,s,a,o){var d=2;if(s=e,typeof e=="function")Wo(e)&&(d=1);else if(typeof e=="string")d=5;else e:switch(e){case ue:return An(n.children,a,o,t);case C:d=8,a|=8;break;case O:return e=Er(12,n,t,a|2),e.elementType=O,e.lanes=o,e;case de:return e=Er(13,n,t,a),e.elementType=de,e.lanes=o,e;case ke:return e=Er(19,n,t,a),e.elementType=ke,e.lanes=o,e;case Ee:return tl(n,a,o,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case E:d=10;break e;case fe:d=9;break e;case xe:d=11;break e;case Ue:d=14;break e;case $e:d=16,s=null;break e}throw Error(i(130,e==null?e:typeof e,""))}return t=Er(d,n,t,a),t.elementType=e,t.type=s,t.lanes=o,t}function An(e,t,n,s){return e=Er(7,e,s,t),e.lanes=n,e}function tl(e,t,n,s){return e=Er(22,e,s,t),e.elementType=Ee,e.lanes=n,e.stateNode={isHidden:!1},e}function Vo(e,t,n){return e=Er(6,e,null,t),e.lanes=n,e}function Ho(e,t,n){return t=Er(4,e.children!==null?e.children:[],e.key,t),t.lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function yf(e,t,n,s,a){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Ot(0),this.expirationTimes=Ot(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Ot(0),this.identifierPrefix=s,this.onRecoverableError=a,this.mutableSourceEagerHydrationData=null}function Ko(e,t,n,s,a,o,d,h,v){return e=new yf(e,t,n,h,v),t===1?(t=1,o===!0&&(t|=8)):t=0,o=Er(3,null,null,t),e.current=o,o.stateNode=e,o.memoizedState={element:s,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},ao(o),e}function xf(e,t,n){var s=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Y,key:s==null?null:""+s,children:e,containerInfo:t,implementation:n}}function $c(e){if(!e)return pn;e=e._reactInternals;e:{if(At(e)!==e||e.tag!==1)throw Error(i(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(lr(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(i(171))}if(e.tag===1){var n=e.type;if(lr(n))return iu(e,n,t)}return t}function Dc(e,t,n,s,a,o,d,h,v){return e=Ko(n,s,!0,e,a,o,d,h,v),e.context=$c(null),n=e.current,s=sr(),a=Nn(n),o=Zr(s,a),o.callback=t??null,yn(n,o,a),e.current.lanes=a,rr(e,a,s),ur(e,s),e}function rl(e,t,n,s){var a=t.current,o=sr(),d=Nn(a);return n=$c(n),t.context===null?t.context=n:t.pendingContext=n,t=Zr(o,d),t.payload={element:e},s=s===void 0?null:s,s!==null&&(t.callback=s),e=yn(a,t,d),e!==null&&(Fr(e,a,d,o),La(e,a,d)),d}function nl(e){return e=e.current,e.child?(e.child.tag===5,e.child.stateNode):null}function Fc(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var n=e.retryLane;e.retryLane=n!==0&&n<t?n:t}}function Qo(e,t){Fc(e,t),(e=e.alternate)&&Fc(e,t)}function vf(){return null}var Mc=typeof reportError=="function"?reportError:function(e){console.error(e)};function Jo(e){this._internalRoot=e}sl.prototype.render=Jo.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(i(409));rl(e,t,null,null)},sl.prototype.unmount=Jo.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;Dn(function(){rl(null,e,null,null)}),t[Qr]=null}};function sl(e){this._internalRoot=e}sl.prototype.unstable_scheduleHydration=function(e){if(e){var t=bi();e={blockedOn:null,target:e,priority:t};for(var n=0;n<un.length&&t!==0&&t<un[n].priority;n++);un.splice(n,0,e),n===0&&ji(e)}};function Yo(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function al(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function Ac(){}function bf(e,t,n,s,a){if(a){if(typeof s=="function"){var o=s;s=function(){var $=nl(d);o.call($)}}var d=Dc(t,s,e,0,null,!1,!1,"",Ac);return e._reactRootContainer=d,e[Qr]=d.current,Ds(e.nodeType===8?e.parentNode:e),Dn(),d}for(;a=e.lastChild;)e.removeChild(a);if(typeof s=="function"){var h=s;s=function(){var $=nl(v);h.call($)}}var v=Ko(e,0,!1,null,null,!1,!1,"",Ac);return e._reactRootContainer=v,e[Qr]=v.current,Ds(e.nodeType===8?e.parentNode:e),Dn(function(){rl(t,v,n,s)}),v}function ll(e,t,n,s,a){var o=n._reactRootContainer;if(o){var d=o;if(typeof a=="function"){var h=a;a=function(){var v=nl(d);h.call(v)}}rl(t,d,e,a)}else d=bf(n,t,e,a,s);return nl(d)}xi=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=x(t.pendingLanes);n!==0&&(Ae(t,n|1),ur(t,ut()),(Ze&6)===0&&(cs=ut()+500,hn()))}break;case 13:Dn(function(){var s=qr(e,1);if(s!==null){var a=sr();Fr(s,e,1,a)}}),Qo(e,1)}},bl=function(e){if(e.tag===13){var t=qr(e,134217728);if(t!==null){var n=sr();Fr(t,e,134217728,n)}Qo(e,134217728)}},vi=function(e){if(e.tag===13){var t=Nn(e),n=qr(e,t);if(n!==null){var s=sr();Fr(n,e,t,s)}Qo(e,t)}},bi=function(){return Be},Ni=function(e,t){var n=Be;try{return Be=e,t()}finally{Be=n}},Ke=function(e,t,n){switch(t){case"input":if(Kt(e,n),t=n.name,n.type==="radio"&&t!=null){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var s=n[t];if(s!==e&&s.form===e.form){var a=ja(s);if(!a)throw Error(i(90));lt(s),Kt(s,a)}}}break;case"textarea":bt(e,n);break;case"select":t=n.value,t!=null&&be(e,!!n.multiple,t,!1)}},Tt=zo,dt=Dn;var Nf={usingClientEntryPoint:!1,Events:[As,Xn,ja,Nt,Rt,zo]},qs={findFiberByHostInstance:Pn,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},wf={bundleType:qs.bundleType,version:qs.version,rendererPackageName:qs.rendererPackageName,rendererConfig:qs.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:se.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=Or(e),e===null?null:e.stateNode},findFiberByHostInstance:qs.findFiberByHostInstance||vf,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var ol=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!ol.isDisabled&&ol.supportsFiber)try{Gn=ol.inject(wf),Nr=ol}catch{}}return cr.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Nf,cr.createPortal=function(e,t){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Yo(t))throw Error(i(200));return xf(e,t,null,n)},cr.createRoot=function(e,t){if(!Yo(e))throw Error(i(299));var n=!1,s="",a=Mc;return t!=null&&(t.unstable_strictMode===!0&&(n=!0),t.identifierPrefix!==void 0&&(s=t.identifierPrefix),t.onRecoverableError!==void 0&&(a=t.onRecoverableError)),t=Ko(e,1,!1,null,null,n,!1,s,a),e[Qr]=t.current,Ds(e.nodeType===8?e.parentNode:e),new Jo(t)},cr.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(i(188)):(e=Object.keys(e).join(","),Error(i(268,e)));return e=Or(t),e=e===null?null:e.stateNode,e},cr.flushSync=function(e){return Dn(e)},cr.hydrate=function(e,t,n){if(!al(t))throw Error(i(200));return ll(null,e,t,!0,n)},cr.hydrateRoot=function(e,t,n){if(!Yo(e))throw Error(i(405));var s=n!=null&&n.hydratedSources||null,a=!1,o="",d=Mc;if(n!=null&&(n.unstable_strictMode===!0&&(a=!0),n.identifierPrefix!==void 0&&(o=n.identifierPrefix),n.onRecoverableError!==void 0&&(d=n.onRecoverableError)),t=Dc(t,null,e,1,n??null,a,!1,o,d),e[Qr]=t.current,Ds(e),s)for(e=0;e<s.length;e++)n=s[e],a=n._getVersion,a=a(n._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[n,a]:t.mutableSourceEagerHydrationData.push(n,a);return new sl(t)},cr.render=function(e,t,n){if(!al(t))throw Error(i(200));return ll(null,e,t,!1,n)},cr.unmountComponentAtNode=function(e){if(!al(e))throw Error(i(40));return e._reactRootContainer?(Dn(function(){ll(null,null,e,!1,function(){e._reactRootContainer=null,e[Qr]=null})}),!0):!1},cr.unstable_batchedUpdates=zo,cr.unstable_renderSubtreeIntoContainer=function(e,t,n,s){if(!al(n))throw Error(i(200));if(e==null||e._reactInternals===void 0)throw Error(i(38));return ll(e,t,n,!1,s)},cr.version="18.3.1-next-f1338f8080-20240426",cr}var Hc;function If(){if(Hc)return Zo.exports;Hc=1;function l(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(l)}catch(u){console.error(u)}}return l(),Zo.exports=Rf(),Zo.exports}var Kc;function _f(){if(Kc)return il;Kc=1;var l=If();return il.createRoot=l.createRoot,il.hydrateRoot=l.hydrateRoot,il}var Tf=_f();var Qc="popstate";function Lf(l={}){function u(m,f){let{pathname:p,search:g,hash:b}=m.location;return oi("",{pathname:p,search:g,hash:b},f.state&&f.state.usr||null,f.state&&f.state.key||"default")}function i(m,f){return typeof f=="string"?f:ra(f)}return Df(u,i,null,l)}function vt(l,u){if(l===!1||l===null||typeof l>"u")throw new Error(u)}function yr(l,u){if(!l){typeof console<"u"&&console.warn(u);try{throw new Error(u)}catch{}}}function $f(){return Math.random().toString(36).substring(2,10)}function Jc(l,u){return{usr:l.state,key:l.key,idx:u}}function oi(l,u,i=null,m){return{pathname:typeof l=="string"?l:l.pathname,search:"",hash:"",...typeof u=="string"?ps(u):u,state:i,key:u&&u.key||m||$f()}}function ra({pathname:l="/",search:u="",hash:i=""}){return u&&u!=="?"&&(l+=u.charAt(0)==="?"?u:"?"+u),i&&i!=="#"&&(l+=i.charAt(0)==="#"?i:"#"+i),l}function ps(l){let u={};if(l){let i=l.indexOf("#");i>=0&&(u.hash=l.substring(i),l=l.substring(0,i));let m=l.indexOf("?");m>=0&&(u.search=l.substring(m),l=l.substring(0,m)),l&&(u.pathname=l)}return u}function Df(l,u,i,m={}){let{window:f=document.defaultView,v5Compat:p=!1}=m,g=f.history,b="POP",w=null,R=P();R==null&&(R=0,g.replaceState({...g.state,idx:R},""));function P(){return(g.state||{idx:null}).idx}function j(){b="POP";let D=P(),k=D==null?null:D-R;R=D,w&&w({action:b,location:ee.location,delta:k})}function z(D,k){b="PUSH";let _=oi(ee.location,D,k);R=P()+1;let X=Jc(_,R),se=ee.createHref(_);try{g.pushState(X,"",se)}catch(ne){if(ne instanceof DOMException&&ne.name==="DataCloneError")throw ne;f.location.assign(se)}p&&w&&w({action:b,location:ee.location,delta:1})}function K(D,k){b="REPLACE";let _=oi(ee.location,D,k);R=P();let X=Jc(_,R),se=ee.createHref(_);g.replaceState(X,"",se),p&&w&&w({action:b,location:ee.location,delta:0})}function J(D){return Ff(D)}let ee={get action(){return b},get location(){return l(f,g)},listen(D){if(w)throw new Error("A history only accepts one active listener");return f.addEventListener(Qc,j),w=D,()=>{f.removeEventListener(Qc,j),w=null}},createHref(D){return u(f,D)},createURL:J,encodeLocation(D){let k=J(D);return{pathname:k.pathname,search:k.search,hash:k.hash}},push:z,replace:K,go(D){return g.go(D)}};return ee}function Ff(l,u=!1){let i="http://localhost";typeof window<"u"&&(i=window.location.origin!=="null"?window.location.origin:window.location.href),vt(i,"No window.location.(origin|href) available to create URL");let m=typeof l=="string"?l:ra(l);return m=m.replace(/ $/,"%20"),!u&&m.startsWith("//")&&(m=i+m),new URL(m,i)}function yd(l,u,i="/"){return Mf(l,u,i,!1)}function Mf(l,u,i,m){let f=typeof u=="string"?ps(u):u,p=nn(f.pathname||"/",i);if(p==null)return null;let g=xd(l);Af(g);let b=null;for(let w=0;b==null&&w<g.length;++w){let R=Jf(p);b=Kf(g[w],R,m)}return b}function xd(l,u=[],i=[],m="",f=!1){let p=(g,b,w=f,R)=>{let P={relativePath:R===void 0?g.path||"":R,caseSensitive:g.caseSensitive===!0,childrenIndex:b,route:g};if(P.relativePath.startsWith("/")){if(!P.relativePath.startsWith(m)&&w)return;vt(P.relativePath.startsWith(m),`Absolute route path "${P.relativePath}" nested under path "${m}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),P.relativePath=P.relativePath.slice(m.length)}let j=rn([m,P.relativePath]),z=i.concat(P);g.children&&g.children.length>0&&(vt(g.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${j}".`),xd(g.children,u,z,j,w)),!(g.path==null&&!g.index)&&u.push({path:j,score:Vf(j,g.index),routesMeta:z})};return l.forEach((g,b)=>{if(g.path===""||!g.path?.includes("?"))p(g,b);else for(let w of vd(g.path))p(g,b,!0,w)}),u}function vd(l){let u=l.split("/");if(u.length===0)return[];let[i,...m]=u,f=i.endsWith("?"),p=i.replace(/\?$/,"");if(m.length===0)return f?[p,""]:[p];let g=vd(m.join("/")),b=[];return b.push(...g.map(w=>w===""?p:[p,w].join("/"))),f&&b.push(...g),b.map(w=>l.startsWith("/")&&w===""?"/":w)}function Af(l){l.sort((u,i)=>u.score!==i.score?i.score-u.score:Hf(u.routesMeta.map(m=>m.childrenIndex),i.routesMeta.map(m=>m.childrenIndex)))}var Of=/^:[\w-]+$/,Uf=3,zf=2,Gf=1,Bf=10,Wf=-2,Yc=l=>l==="*";function Vf(l,u){let i=l.split("/"),m=i.length;return i.some(Yc)&&(m+=Wf),u&&(m+=zf),i.filter(f=>!Yc(f)).reduce((f,p)=>f+(Of.test(p)?Uf:p===""?Gf:Bf),m)}function Hf(l,u){return l.length===u.length&&l.slice(0,-1).every((m,f)=>m===u[f])?l[l.length-1]-u[u.length-1]:0}function Kf(l,u,i=!1){let{routesMeta:m}=l,f={},p="/",g=[];for(let b=0;b<m.length;++b){let w=m[b],R=b===m.length-1,P=p==="/"?u:u.slice(p.length)||"/",j=pl({path:w.relativePath,caseSensitive:w.caseSensitive,end:R},P),z=w.route;if(!j&&R&&i&&!m[m.length-1].route.index&&(j=pl({path:w.relativePath,caseSensitive:w.caseSensitive,end:!1},P)),!j)return null;Object.assign(f,j.params),g.push({params:f,pathname:rn([p,j.pathname]),pathnameBase:Zf(rn([p,j.pathnameBase])),route:z}),j.pathnameBase!=="/"&&(p=rn([p,j.pathnameBase]))}return g}function pl(l,u){typeof l=="string"&&(l={path:l,caseSensitive:!1,end:!0});let[i,m]=Qf(l.path,l.caseSensitive,l.end),f=u.match(i);if(!f)return null;let p=f[0],g=p.replace(/(.)\/+$/,"$1"),b=f.slice(1);return{params:m.reduce((R,{paramName:P,isOptional:j},z)=>{if(P==="*"){let J=b[z]||"";g=p.slice(0,p.length-J.length).replace(/(.)\/+$/,"$1")}const K=b[z];return j&&!K?R[P]=void 0:R[P]=(K||"").replace(/%2F/g,"/"),R},{}),pathname:p,pathnameBase:g,pattern:l}}function Qf(l,u=!1,i=!0){yr(l==="*"||!l.endsWith("*")||l.endsWith("/*"),`Route path "${l}" will be treated as if it were "${l.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${l.replace(/\*$/,"/*")}".`);let m=[],f="^"+l.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(g,b,w)=>(m.push({paramName:b,isOptional:w!=null}),w?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return l.endsWith("*")?(m.push({paramName:"*"}),f+=l==="*"||l==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):i?f+="\\/*$":l!==""&&l!=="/"&&(f+="(?:(?=\\/|$))"),[new RegExp(f,u?void 0:"i"),m]}function Jf(l){try{return l.split("/").map(u=>decodeURIComponent(u).replace(/\//g,"%2F")).join("/")}catch(u){return yr(!1,`The URL path "${l}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${u}).`),l}}function nn(l,u){if(u==="/")return l;if(!l.toLowerCase().startsWith(u.toLowerCase()))return null;let i=u.endsWith("/")?u.length-1:u.length,m=l.charAt(i);return m&&m!=="/"?null:l.slice(i)||"/"}var bd=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Yf=l=>bd.test(l);function Xf(l,u="/"){let{pathname:i,search:m="",hash:f=""}=typeof l=="string"?ps(l):l,p;if(i)if(Yf(i))p=i;else{if(i.includes("//")){let g=i;i=i.replace(/\/\/+/g,"/"),yr(!1,`Pathnames cannot have embedded double slashes - normalizing ${g} -> ${i}`)}i.startsWith("/")?p=Xc(i.substring(1),"/"):p=Xc(i,u)}else p=u;return{pathname:p,search:ep(m),hash:tp(f)}}function Xc(l,u){let i=u.replace(/\/+$/,"").split("/");return l.split("/").forEach(f=>{f===".."?i.length>1&&i.pop():f!=="."&&i.push(f)}),i.length>1?i.join("/"):"/"}function ri(l,u,i,m){return`Cannot include a '${l}' character in a manually specified \`to.${u}\` field [${JSON.stringify(m)}].  Please separate it out to the \`to.${i}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function qf(l){return l.filter((u,i)=>i===0||u.route.path&&u.route.path.length>0)}function di(l){let u=qf(l);return u.map((i,m)=>m===u.length-1?i.pathname:i.pathnameBase)}function mi(l,u,i,m=!1){let f;typeof l=="string"?f=ps(l):(f={...l},vt(!f.pathname||!f.pathname.includes("?"),ri("?","pathname","search",f)),vt(!f.pathname||!f.pathname.includes("#"),ri("#","pathname","hash",f)),vt(!f.search||!f.search.includes("#"),ri("#","search","hash",f)));let p=l===""||f.pathname==="",g=p?"/":f.pathname,b;if(g==null)b=i;else{let j=u.length-1;if(!m&&g.startsWith("..")){let z=g.split("/");for(;z[0]==="..";)z.shift(),j-=1;f.pathname=z.join("/")}b=j>=0?u[j]:"/"}let w=Xf(f,b),R=g&&g!=="/"&&g.endsWith("/"),P=(p||g===".")&&i.endsWith("/");return!w.pathname.endsWith("/")&&(R||P)&&(w.pathname+="/"),w}var rn=l=>l.join("/").replace(/\/\/+/g,"/"),Zf=l=>l.replace(/\/+$/,"").replace(/^\/*/,"/"),ep=l=>!l||l==="?"?"":l.startsWith("?")?l:"?"+l,tp=l=>!l||l==="#"?"":l.startsWith("#")?l:"#"+l,rp=class{constructor(l,u,i,m=!1){this.status=l,this.statusText=u||"",this.internal=m,i instanceof Error?(this.data=i.toString(),this.error=i):this.data=i}};function np(l){return l!=null&&typeof l.status=="number"&&typeof l.statusText=="string"&&typeof l.internal=="boolean"&&"data"in l}function sp(l){return l.map(u=>u.route.path).filter(Boolean).join("/").replace(/\/\/*/g,"/")||"/"}var Nd=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";function wd(l,u){let i=l;if(typeof i!="string"||!bd.test(i))return{absoluteURL:void 0,isExternal:!1,to:i};let m=i,f=!1;if(Nd)try{let p=new URL(window.location.href),g=i.startsWith("//")?new URL(p.protocol+i):new URL(i),b=nn(g.pathname,u);g.origin===p.origin&&b!=null?i=b+g.search+g.hash:f=!0}catch{yr(!1,`<Link to="${i}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}return{absoluteURL:m,isExternal:f,to:i}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");var jd=["POST","PUT","PATCH","DELETE"];new Set(jd);var ap=["GET",...jd];new Set(ap);var hs=c.createContext(null);hs.displayName="DataRouter";var hl=c.createContext(null);hl.displayName="DataRouterState";var lp=c.createContext(!1),Sd=c.createContext({isTransitioning:!1});Sd.displayName="ViewTransition";var op=c.createContext(new Map);op.displayName="Fetchers";var ip=c.createContext(null);ip.displayName="Await";var xr=c.createContext(null);xr.displayName="Navigation";var na=c.createContext(null);na.displayName="Location";var Ir=c.createContext({outlet:null,matches:[],isDataRoute:!1});Ir.displayName="Route";var fi=c.createContext(null);fi.displayName="RouteError";var kd="REACT_ROUTER_ERROR",up="REDIRECT",cp="ROUTE_ERROR_RESPONSE";function dp(l){if(l.startsWith(`${kd}:${up}:{`))try{let u=JSON.parse(l.slice(28));if(typeof u=="object"&&u&&typeof u.status=="number"&&typeof u.statusText=="string"&&typeof u.location=="string"&&typeof u.reloadDocument=="boolean"&&typeof u.replace=="boolean")return u}catch{}}function mp(l){if(l.startsWith(`${kd}:${cp}:{`))try{let u=JSON.parse(l.slice(40));if(typeof u=="object"&&u&&typeof u.status=="number"&&typeof u.statusText=="string")return new rp(u.status,u.statusText,u.data)}catch{}}function fp(l,{relative:u}={}){vt(gs(),"useHref() may be used only in the context of a <Router> component.");let{basename:i,navigator:m}=c.useContext(xr),{hash:f,pathname:p,search:g}=sa(l,{relative:u}),b=p;return i!=="/"&&(b=p==="/"?i:rn([i,p])),m.createHref({pathname:b,search:g,hash:f})}function gs(){return c.useContext(na)!=null}function dr(){return vt(gs(),"useLocation() may be used only in the context of a <Router> component."),c.useContext(na).location}var Cd="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function Pd(l){c.useContext(xr).static||c.useLayoutEffect(l)}function Hr(){let{isDataRoute:l}=c.useContext(Ir);return l?Ep():pp()}function pp(){vt(gs(),"useNavigate() may be used only in the context of a <Router> component.");let l=c.useContext(hs),{basename:u,navigator:i}=c.useContext(xr),{matches:m}=c.useContext(Ir),{pathname:f}=dr(),p=JSON.stringify(di(m)),g=c.useRef(!1);return Pd(()=>{g.current=!0}),c.useCallback((w,R={})=>{if(yr(g.current,Cd),!g.current)return;if(typeof w=="number"){i.go(w);return}let P=mi(w,JSON.parse(p),f,R.relative==="path");l==null&&u!=="/"&&(P.pathname=P.pathname==="/"?u:rn([u,P.pathname])),(R.replace?i.replace:i.push)(P,R.state,R)},[u,i,p,f,l])}var hp=c.createContext(null);function gp(l){let u=c.useContext(Ir).outlet;return c.useMemo(()=>u&&c.createElement(hp.Provider,{value:l},u),[u,l])}function Cn(){let{matches:l}=c.useContext(Ir),u=l[l.length-1];return u?u.params:{}}function sa(l,{relative:u}={}){let{matches:i}=c.useContext(Ir),{pathname:m}=dr(),f=JSON.stringify(di(i));return c.useMemo(()=>mi(l,JSON.parse(f),m,u==="path"),[l,f,m,u])}function yp(l,u){return Ed(l,u)}function Ed(l,u,i,m,f){vt(gs(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:p}=c.useContext(xr),{matches:g}=c.useContext(Ir),b=g[g.length-1],w=b?b.params:{},R=b?b.pathname:"/",P=b?b.pathnameBase:"/",j=b&&b.route;{let _=j&&j.path||"";Id(R,!j||_.endsWith("*")||_.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${R}" (under <Route path="${_}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${_}"> to <Route path="${_==="/"?"*":`${_}/*`}">.`)}let z=dr(),K;if(u){let _=typeof u=="string"?ps(u):u;vt(P==="/"||_.pathname?.startsWith(P),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${P}" but pathname "${_.pathname}" was given in the \`location\` prop.`),K=_}else K=z;let J=K.pathname||"/",ee=J;if(P!=="/"){let _=P.replace(/^\//,"").split("/");ee="/"+J.replace(/^\//,"").split("/").slice(_.length).join("/")}let D=yd(l,{pathname:ee});yr(j||D!=null,`No routes matched location "${K.pathname}${K.search}${K.hash}" `),yr(D==null||D[D.length-1].route.element!==void 0||D[D.length-1].route.Component!==void 0||D[D.length-1].route.lazy!==void 0,`Matched leaf route at location "${K.pathname}${K.search}${K.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let k=wp(D&&D.map(_=>Object.assign({},_,{params:Object.assign({},w,_.params),pathname:rn([P,p.encodeLocation?p.encodeLocation(_.pathname.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:_.pathname]),pathnameBase:_.pathnameBase==="/"?P:rn([P,p.encodeLocation?p.encodeLocation(_.pathnameBase.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:_.pathnameBase])})),g,i,m,f);return u&&k?c.createElement(na.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...K},navigationType:"POP"}},k):k}function xp(){let l=Pp(),u=np(l)?`${l.status} ${l.statusText}`:l instanceof Error?l.message:JSON.stringify(l),i=l instanceof Error?l.stack:null,m="rgba(200,200,200, 0.5)",f={padding:"0.5rem",backgroundColor:m},p={padding:"2px 4px",backgroundColor:m},g=null;return console.error("Error handled by React Router default ErrorBoundary:",l),g=c.createElement(c.Fragment,null,c.createElement("p",null," Hey developer "),c.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",c.createElement("code",{style:p},"ErrorBoundary")," or"," ",c.createElement("code",{style:p},"errorElement")," prop on your route.")),c.createElement(c.Fragment,null,c.createElement("h2",null,"Unexpected Application Error!"),c.createElement("h3",{style:{fontStyle:"italic"}},u),i?c.createElement("pre",{style:f},i):null,g)}var vp=c.createElement(xp,null),Rd=class extends c.Component{constructor(l){super(l),this.state={location:l.location,revalidation:l.revalidation,error:l.error}}static getDerivedStateFromError(l){return{error:l}}static getDerivedStateFromProps(l,u){return u.location!==l.location||u.revalidation!=="idle"&&l.revalidation==="idle"?{error:l.error,location:l.location,revalidation:l.revalidation}:{error:l.error!==void 0?l.error:u.error,location:u.location,revalidation:l.revalidation||u.revalidation}}componentDidCatch(l,u){this.props.onError?this.props.onError(l,u):console.error("React Router caught the following error during render",l)}render(){let l=this.state.error;if(this.context&&typeof l=="object"&&l&&"digest"in l&&typeof l.digest=="string"){const i=mp(l.digest);i&&(l=i)}let u=l!==void 0?c.createElement(Ir.Provider,{value:this.props.routeContext},c.createElement(fi.Provider,{value:l,children:this.props.component})):this.props.children;return this.context?c.createElement(bp,{error:l},u):u}};Rd.contextType=lp;var ni=new WeakMap;function bp({children:l,error:u}){let{basename:i}=c.useContext(xr);if(typeof u=="object"&&u&&"digest"in u&&typeof u.digest=="string"){let m=dp(u.digest);if(m){let f=ni.get(u);if(f)throw f;let p=wd(m.location,i);if(Nd&&!ni.get(u))if(p.isExternal||m.reloadDocument)window.location.href=p.absoluteURL||p.to;else{const g=Promise.resolve().then(()=>window.__reactRouterDataRouter.navigate(p.to,{replace:m.replace}));throw ni.set(u,g),g}return c.createElement("meta",{httpEquiv:"refresh",content:`0;url=${p.absoluteURL||p.to}`})}}return l}function Np({routeContext:l,match:u,children:i}){let m=c.useContext(hs);return m&&m.static&&m.staticContext&&(u.route.errorElement||u.route.ErrorBoundary)&&(m.staticContext._deepestRenderedBoundaryId=u.route.id),c.createElement(Ir.Provider,{value:l},i)}function wp(l,u=[],i=null,m=null,f=null){if(l==null){if(!i)return null;if(i.errors)l=i.matches;else if(u.length===0&&!i.initialized&&i.matches.length>0)l=i.matches;else return null}let p=l,g=i?.errors;if(g!=null){let P=p.findIndex(j=>j.route.id&&g?.[j.route.id]!==void 0);vt(P>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(g).join(",")}`),p=p.slice(0,Math.min(p.length,P+1))}let b=!1,w=-1;if(i)for(let P=0;P<p.length;P++){let j=p[P];if((j.route.HydrateFallback||j.route.hydrateFallbackElement)&&(w=P),j.route.id){let{loaderData:z,errors:K}=i,J=j.route.loader&&!z.hasOwnProperty(j.route.id)&&(!K||K[j.route.id]===void 0);if(j.route.lazy||J){b=!0,w>=0?p=p.slice(0,w+1):p=[p[0]];break}}}let R=i&&m?(P,j)=>{m(P,{location:i.location,params:i.matches?.[0]?.params??{},unstable_pattern:sp(i.matches),errorInfo:j})}:void 0;return p.reduceRight((P,j,z)=>{let K,J=!1,ee=null,D=null;i&&(K=g&&j.route.id?g[j.route.id]:void 0,ee=j.route.errorElement||vp,b&&(w<0&&z===0?(Id("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),J=!0,D=null):w===z&&(J=!0,D=j.route.hydrateFallbackElement||null)));let k=u.concat(p.slice(0,z+1)),_=()=>{let X;return K?X=ee:J?X=D:j.route.Component?X=c.createElement(j.route.Component,null):j.route.element?X=j.route.element:X=P,c.createElement(Np,{match:j,routeContext:{outlet:P,matches:k,isDataRoute:i!=null},children:X})};return i&&(j.route.ErrorBoundary||j.route.errorElement||z===0)?c.createElement(Rd,{location:i.location,revalidation:i.revalidation,component:ee,error:K,children:_(),routeContext:{outlet:null,matches:k,isDataRoute:!0},onError:R}):_()},null)}function pi(l){return`${l} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function jp(l){let u=c.useContext(hs);return vt(u,pi(l)),u}function Sp(l){let u=c.useContext(hl);return vt(u,pi(l)),u}function kp(l){let u=c.useContext(Ir);return vt(u,pi(l)),u}function hi(l){let u=kp(l),i=u.matches[u.matches.length-1];return vt(i.route.id,`${l} can only be used on routes that contain a unique "id"`),i.route.id}function Cp(){return hi("useRouteId")}function Pp(){let l=c.useContext(fi),u=Sp("useRouteError"),i=hi("useRouteError");return l!==void 0?l:u.errors?.[i]}function Ep(){let{router:l}=jp("useNavigate"),u=hi("useNavigate"),i=c.useRef(!1);return Pd(()=>{i.current=!0}),c.useCallback(async(f,p={})=>{yr(i.current,Cd),i.current&&(typeof f=="number"?await l.navigate(f):await l.navigate(f,{fromRouteId:u,...p}))},[l,u])}var qc={};function Id(l,u,i){!u&&!qc[l]&&(qc[l]=!0,yr(!1,i))}c.memo(Rp);function Rp({routes:l,future:u,state:i,onError:m}){return Ed(l,void 0,i,m,u)}function _d({to:l,replace:u,state:i,relative:m}){vt(gs(),"<Navigate> may be used only in the context of a <Router> component.");let{static:f}=c.useContext(xr);yr(!f,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:p}=c.useContext(Ir),{pathname:g}=dr(),b=Hr(),w=mi(l,di(p),g,m==="path"),R=JSON.stringify(w);return c.useEffect(()=>{b(JSON.parse(R),{replace:u,state:i,relative:m})},[b,R,m,u,i]),null}function Ip(l){return gp(l.context)}function _t(l){vt(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function _p({basename:l="/",children:u=null,location:i,navigationType:m="POP",navigator:f,static:p=!1,unstable_useTransitions:g}){vt(!gs(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let b=l.replace(/^\/*/,"/"),w=c.useMemo(()=>({basename:b,navigator:f,static:p,unstable_useTransitions:g,future:{}}),[b,f,p,g]);typeof i=="string"&&(i=ps(i));let{pathname:R="/",search:P="",hash:j="",state:z=null,key:K="default"}=i,J=c.useMemo(()=>{let ee=nn(R,b);return ee==null?null:{location:{pathname:ee,search:P,hash:j,state:z,key:K},navigationType:m}},[b,R,P,j,z,K,m]);return yr(J!=null,`<Router basename="${b}"> is not able to match the URL "${R}${P}${j}" because it does not start with the basename, so the <Router> won't render anything.`),J==null?null:c.createElement(xr.Provider,{value:w},c.createElement(na.Provider,{children:u,value:J}))}function Tp({children:l,location:u}){return yp(ii(l),u)}function ii(l,u=[]){let i=[];return c.Children.forEach(l,(m,f)=>{if(!c.isValidElement(m))return;let p=[...u,f];if(m.type===c.Fragment){i.push.apply(i,ii(m.props.children,p));return}vt(m.type===_t,`[${typeof m.type=="string"?m.type:m.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),vt(!m.props.index||!m.props.children,"An index route cannot have child routes.");let g={id:m.props.id||p.join("-"),caseSensitive:m.props.caseSensitive,element:m.props.element,Component:m.props.Component,index:m.props.index,path:m.props.path,middleware:m.props.middleware,loader:m.props.loader,action:m.props.action,hydrateFallbackElement:m.props.hydrateFallbackElement,HydrateFallback:m.props.HydrateFallback,errorElement:m.props.errorElement,ErrorBoundary:m.props.ErrorBoundary,hasErrorBoundary:m.props.hasErrorBoundary===!0||m.props.ErrorBoundary!=null||m.props.errorElement!=null,shouldRevalidate:m.props.shouldRevalidate,handle:m.props.handle,lazy:m.props.lazy};m.props.children&&(g.children=ii(m.props.children,p)),i.push(g)}),i}var ml="get",fl="application/x-www-form-urlencoded";function gl(l){return typeof HTMLElement<"u"&&l instanceof HTMLElement}function Lp(l){return gl(l)&&l.tagName.toLowerCase()==="button"}function $p(l){return gl(l)&&l.tagName.toLowerCase()==="form"}function Dp(l){return gl(l)&&l.tagName.toLowerCase()==="input"}function Fp(l){return!!(l.metaKey||l.altKey||l.ctrlKey||l.shiftKey)}function Mp(l,u){return l.button===0&&(!u||u==="_self")&&!Fp(l)}function ui(l=""){return new URLSearchParams(typeof l=="string"||Array.isArray(l)||l instanceof URLSearchParams?l:Object.keys(l).reduce((u,i)=>{let m=l[i];return u.concat(Array.isArray(m)?m.map(f=>[i,f]):[[i,m]])},[]))}function Ap(l,u){let i=ui(l);return u&&u.forEach((m,f)=>{i.has(f)||u.getAll(f).forEach(p=>{i.append(f,p)})}),i}var ul=null;function Op(){if(ul===null)try{new FormData(document.createElement("form"),0),ul=!1}catch{ul=!0}return ul}var Up=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function si(l){return l!=null&&!Up.has(l)?(yr(!1,`"${l}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${fl}"`),null):l}function zp(l,u){let i,m,f,p,g;if($p(l)){let b=l.getAttribute("action");m=b?nn(b,u):null,i=l.getAttribute("method")||ml,f=si(l.getAttribute("enctype"))||fl,p=new FormData(l)}else if(Lp(l)||Dp(l)&&(l.type==="submit"||l.type==="image")){let b=l.form;if(b==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let w=l.getAttribute("formaction")||b.getAttribute("action");if(m=w?nn(w,u):null,i=l.getAttribute("formmethod")||b.getAttribute("method")||ml,f=si(l.getAttribute("formenctype"))||si(b.getAttribute("enctype"))||fl,p=new FormData(b,l),!Op()){let{name:R,type:P,value:j}=l;if(P==="image"){let z=R?`${R}.`:"";p.append(`${z}x`,"0"),p.append(`${z}y`,"0")}else R&&p.append(R,j)}}else{if(gl(l))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');i=ml,m=null,f=fl,g=l}return p&&f==="text/plain"&&(g=p,p=void 0),{action:m,method:i.toLowerCase(),encType:f,formData:p,body:g}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function gi(l,u){if(l===!1||l===null||typeof l>"u")throw new Error(u)}function Gp(l,u,i){let m=typeof l=="string"?new URL(l,typeof window>"u"?"server://singlefetch/":window.location.origin):l;return m.pathname==="/"?m.pathname=`_root.${i}`:u&&nn(m.pathname,u)==="/"?m.pathname=`${u.replace(/\/$/,"")}/_root.${i}`:m.pathname=`${m.pathname.replace(/\/$/,"")}.${i}`,m}async function Bp(l,u){if(l.id in u)return u[l.id];try{let i=await import(l.module);return u[l.id]=i,i}catch(i){return console.error(`Error loading route module \`${l.module}\`, reloading page...`),console.error(i),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function Wp(l){return l==null?!1:l.href==null?l.rel==="preload"&&typeof l.imageSrcSet=="string"&&typeof l.imageSizes=="string":typeof l.rel=="string"&&typeof l.href=="string"}async function Vp(l,u,i){let m=await Promise.all(l.map(async f=>{let p=u.routes[f.route.id];if(p){let g=await Bp(p,i);return g.links?g.links():[]}return[]}));return Jp(m.flat(1).filter(Wp).filter(f=>f.rel==="stylesheet"||f.rel==="preload").map(f=>f.rel==="stylesheet"?{...f,rel:"prefetch",as:"style"}:{...f,rel:"prefetch"}))}function Zc(l,u,i,m,f,p){let g=(w,R)=>i[R]?w.route.id!==i[R].route.id:!0,b=(w,R)=>i[R].pathname!==w.pathname||i[R].route.path?.endsWith("*")&&i[R].params["*"]!==w.params["*"];return p==="assets"?u.filter((w,R)=>g(w,R)||b(w,R)):p==="data"?u.filter((w,R)=>{let P=m.routes[w.route.id];if(!P||!P.hasLoader)return!1;if(g(w,R)||b(w,R))return!0;if(w.route.shouldRevalidate){let j=w.route.shouldRevalidate({currentUrl:new URL(f.pathname+f.search+f.hash,window.origin),currentParams:i[0]?.params||{},nextUrl:new URL(l,window.origin),nextParams:w.params,defaultShouldRevalidate:!0});if(typeof j=="boolean")return j}return!0}):[]}function Hp(l,u,{includeHydrateFallback:i}={}){return Kp(l.map(m=>{let f=u.routes[m.route.id];if(!f)return[];let p=[f.module];return f.clientActionModule&&(p=p.concat(f.clientActionModule)),f.clientLoaderModule&&(p=p.concat(f.clientLoaderModule)),i&&f.hydrateFallbackModule&&(p=p.concat(f.hydrateFallbackModule)),f.imports&&(p=p.concat(f.imports)),p}).flat(1))}function Kp(l){return[...new Set(l)]}function Qp(l){let u={},i=Object.keys(l).sort();for(let m of i)u[m]=l[m];return u}function Jp(l,u){let i=new Set;return new Set(u),l.reduce((m,f)=>{let p=JSON.stringify(Qp(f));return i.has(p)||(i.add(p),m.push({key:p,link:f})),m},[])}function Td(){let l=c.useContext(hs);return gi(l,"You must render this element inside a <DataRouterContext.Provider> element"),l}function Yp(){let l=c.useContext(hl);return gi(l,"You must render this element inside a <DataRouterStateContext.Provider> element"),l}var yi=c.createContext(void 0);yi.displayName="FrameworkContext";function Ld(){let l=c.useContext(yi);return gi(l,"You must render this element inside a <HydratedRouter> element"),l}function Xp(l,u){let i=c.useContext(yi),[m,f]=c.useState(!1),[p,g]=c.useState(!1),{onFocus:b,onBlur:w,onMouseEnter:R,onMouseLeave:P,onTouchStart:j}=u,z=c.useRef(null);c.useEffect(()=>{if(l==="render"&&g(!0),l==="viewport"){let ee=k=>{k.forEach(_=>{g(_.isIntersecting)})},D=new IntersectionObserver(ee,{threshold:.5});return z.current&&D.observe(z.current),()=>{D.disconnect()}}},[l]),c.useEffect(()=>{if(m){let ee=setTimeout(()=>{g(!0)},100);return()=>{clearTimeout(ee)}}},[m]);let K=()=>{f(!0)},J=()=>{f(!1),g(!1)};return i?l!=="intent"?[p,z,{}]:[p,z,{onFocus:ea(b,K),onBlur:ea(w,J),onMouseEnter:ea(R,K),onMouseLeave:ea(P,J),onTouchStart:ea(j,K)}]:[!1,z,{}]}function ea(l,u){return i=>{l&&l(i),i.defaultPrevented||u(i)}}function qp({page:l,...u}){let{router:i}=Td(),m=c.useMemo(()=>yd(i.routes,l,i.basename),[i.routes,l,i.basename]);return m?c.createElement(eh,{page:l,matches:m,...u}):null}function Zp(l){let{manifest:u,routeModules:i}=Ld(),[m,f]=c.useState([]);return c.useEffect(()=>{let p=!1;return Vp(l,u,i).then(g=>{p||f(g)}),()=>{p=!0}},[l,u,i]),m}function eh({page:l,matches:u,...i}){let m=dr(),{manifest:f,routeModules:p}=Ld(),{basename:g}=Td(),{loaderData:b,matches:w}=Yp(),R=c.useMemo(()=>Zc(l,u,w,f,m,"data"),[l,u,w,f,m]),P=c.useMemo(()=>Zc(l,u,w,f,m,"assets"),[l,u,w,f,m]),j=c.useMemo(()=>{if(l===m.pathname+m.search+m.hash)return[];let J=new Set,ee=!1;if(u.forEach(k=>{let _=f.routes[k.route.id];!_||!_.hasLoader||(!R.some(X=>X.route.id===k.route.id)&&k.route.id in b&&p[k.route.id]?.shouldRevalidate||_.hasClientLoader?ee=!0:J.add(k.route.id))}),J.size===0)return[];let D=Gp(l,g,"data");return ee&&J.size>0&&D.searchParams.set("_routes",u.filter(k=>J.has(k.route.id)).map(k=>k.route.id).join(",")),[D.pathname+D.search]},[g,b,m,f,R,u,l,p]),z=c.useMemo(()=>Hp(P,f),[P,f]),K=Zp(P);return c.createElement(c.Fragment,null,j.map(J=>c.createElement("link",{key:J,rel:"prefetch",as:"fetch",href:J,...i})),z.map(J=>c.createElement("link",{key:J,rel:"modulepreload",href:J,...i})),K.map(({key:J,link:ee})=>c.createElement("link",{key:J,nonce:i.nonce,...ee})))}function th(...l){return u=>{l.forEach(i=>{typeof i=="function"?i(u):i!=null&&(i.current=u)})}}var rh=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{rh&&(window.__reactRouterVersion="7.11.0")}catch{}function nh({basename:l,children:u,unstable_useTransitions:i,window:m}){let f=c.useRef();f.current==null&&(f.current=Lf({window:m,v5Compat:!0}));let p=f.current,[g,b]=c.useState({action:p.action,location:p.location}),w=c.useCallback(R=>{i===!1?b(R):c.startTransition(()=>b(R))},[i]);return c.useLayoutEffect(()=>p.listen(w),[p,w]),c.createElement(_p,{basename:l,children:u,location:g.location,navigationType:g.action,navigator:p,unstable_useTransitions:i})}var $d=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,ms=c.forwardRef(function({onClick:u,discover:i="render",prefetch:m="none",relative:f,reloadDocument:p,replace:g,state:b,target:w,to:R,preventScrollReset:P,viewTransition:j,unstable_defaultShouldRevalidate:z,...K},J){let{basename:ee,unstable_useTransitions:D}=c.useContext(xr),k=typeof R=="string"&&$d.test(R),_=wd(R,ee);R=_.to;let X=fp(R,{relative:f}),[se,ne,Y]=Xp(m,K),ue=oh(R,{replace:g,state:b,target:w,preventScrollReset:P,relative:f,viewTransition:j,unstable_defaultShouldRevalidate:z,unstable_useTransitions:D});function C(E){u&&u(E),E.defaultPrevented||ue(E)}let O=c.createElement("a",{...K,...Y,href:_.absoluteURL||X,onClick:_.isExternal||p?u:C,ref:th(J,ne),target:w,"data-discover":!k&&i==="render"?"true":void 0});return se&&!k?c.createElement(c.Fragment,null,O,c.createElement(qp,{page:X})):O});ms.displayName="Link";var sh=c.forwardRef(function({"aria-current":u="page",caseSensitive:i=!1,className:m="",end:f=!1,style:p,to:g,viewTransition:b,children:w,...R},P){let j=sa(g,{relative:R.relative}),z=dr(),K=c.useContext(hl),{navigator:J,basename:ee}=c.useContext(xr),D=K!=null&&fh(j)&&b===!0,k=J.encodeLocation?J.encodeLocation(j).pathname:j.pathname,_=z.pathname,X=K&&K.navigation&&K.navigation.location?K.navigation.location.pathname:null;i||(_=_.toLowerCase(),X=X?X.toLowerCase():null,k=k.toLowerCase()),X&&ee&&(X=nn(X,ee)||X);const se=k!=="/"&&k.endsWith("/")?k.length-1:k.length;let ne=_===k||!f&&_.startsWith(k)&&_.charAt(se)==="/",Y=X!=null&&(X===k||!f&&X.startsWith(k)&&X.charAt(k.length)==="/"),ue={isActive:ne,isPending:Y,isTransitioning:D},C=ne?u:void 0,O;typeof m=="function"?O=m(ue):O=[m,ne?"active":null,Y?"pending":null,D?"transitioning":null].filter(Boolean).join(" ");let E=typeof p=="function"?p(ue):p;return c.createElement(ms,{...R,"aria-current":C,className:O,ref:P,style:E,to:g,viewTransition:b},typeof w=="function"?w(ue):w)});sh.displayName="NavLink";var ah=c.forwardRef(({discover:l="render",fetcherKey:u,navigate:i,reloadDocument:m,replace:f,state:p,method:g=ml,action:b,onSubmit:w,relative:R,preventScrollReset:P,viewTransition:j,unstable_defaultShouldRevalidate:z,...K},J)=>{let{unstable_useTransitions:ee}=c.useContext(xr),D=dh(),k=mh(b,{relative:R}),_=g.toLowerCase()==="get"?"get":"post",X=typeof b=="string"&&$d.test(b),se=ne=>{if(w&&w(ne),ne.defaultPrevented)return;ne.preventDefault();let Y=ne.nativeEvent.submitter,ue=Y?.getAttribute("formmethod")||g,C=()=>D(Y||ne.currentTarget,{fetcherKey:u,method:ue,navigate:i,replace:f,state:p,relative:R,preventScrollReset:P,viewTransition:j,unstable_defaultShouldRevalidate:z});ee&&i!==!1?c.startTransition(()=>C()):C()};return c.createElement("form",{ref:J,method:_,action:k,onSubmit:m?w:se,...K,"data-discover":!X&&l==="render"?"true":void 0})});ah.displayName="Form";function lh(l){return`${l} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function Dd(l){let u=c.useContext(hs);return vt(u,lh(l)),u}function oh(l,{target:u,replace:i,state:m,preventScrollReset:f,relative:p,viewTransition:g,unstable_defaultShouldRevalidate:b,unstable_useTransitions:w}={}){let R=Hr(),P=dr(),j=sa(l,{relative:p});return c.useCallback(z=>{if(Mp(z,u)){z.preventDefault();let K=i!==void 0?i:ra(P)===ra(j),J=()=>R(l,{replace:K,state:m,preventScrollReset:f,relative:p,viewTransition:g,unstable_defaultShouldRevalidate:b});w?c.startTransition(()=>J()):J()}},[P,R,j,i,m,u,l,f,p,g,b,w])}function ih(l){yr(typeof URLSearchParams<"u","You cannot use the `useSearchParams` hook in a browser that does not support the URLSearchParams API. If you need to support Internet Explorer 11, we recommend you load a polyfill such as https://github.com/ungap/url-search-params.");let u=c.useRef(ui(l)),i=c.useRef(!1),m=dr(),f=c.useMemo(()=>Ap(m.search,i.current?null:u.current),[m.search]),p=Hr(),g=c.useCallback((b,w)=>{const R=ui(typeof b=="function"?b(new URLSearchParams(f)):b);i.current=!0,p("?"+R,w)},[p,f]);return[f,g]}var uh=0,ch=()=>`__${String(++uh)}__`;function dh(){let{router:l}=Dd("useSubmit"),{basename:u}=c.useContext(xr),i=Cp(),m=l.fetch,f=l.navigate;return c.useCallback(async(p,g={})=>{let{action:b,method:w,encType:R,formData:P,body:j}=zp(p,u);if(g.navigate===!1){let z=g.fetcherKey||ch();await m(z,i,g.action||b,{unstable_defaultShouldRevalidate:g.unstable_defaultShouldRevalidate,preventScrollReset:g.preventScrollReset,formData:P,body:j,formMethod:g.method||w,formEncType:g.encType||R,flushSync:g.flushSync})}else await f(g.action||b,{unstable_defaultShouldRevalidate:g.unstable_defaultShouldRevalidate,preventScrollReset:g.preventScrollReset,formData:P,body:j,formMethod:g.method||w,formEncType:g.encType||R,replace:g.replace,state:g.state,fromRouteId:i,flushSync:g.flushSync,viewTransition:g.viewTransition})},[m,f,u,i])}function mh(l,{relative:u}={}){let{basename:i}=c.useContext(xr),m=c.useContext(Ir);vt(m,"useFormAction must be used inside a RouteContext");let[f]=m.matches.slice(-1),p={...sa(l||".",{relative:u})},g=dr();if(l==null){p.search=g.search;let b=new URLSearchParams(p.search),w=b.getAll("index");if(w.some(P=>P==="")){b.delete("index"),w.filter(j=>j).forEach(j=>b.append("index",j));let P=b.toString();p.search=P?`?${P}`:""}}return(!l||l===".")&&f.route.index&&(p.search=p.search?p.search.replace(/^\?/,"?index&"):"?index"),i!=="/"&&(p.pathname=p.pathname==="/"?i:rn([i,p.pathname])),ra(p)}function fh(l,{relative:u}={}){let i=c.useContext(Sd);vt(i!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:m}=Dd("useViewTransitionState"),f=sa(l,{relative:u});if(!i.isTransitioning)return!1;let p=nn(i.currentLocation.pathname,m)||i.currentLocation.pathname,g=nn(i.nextLocation.pathname,m)||i.nextLocation.pathname;return pl(f.pathname,g)!=null||pl(f.pathname,p)!=null}const aa="/assets/gratlylogodash-hD-euz4M.png",Mr="http://localhost:8000";async function ai(l,u={}){const{body:i,headers:m,...f}=u,p=localStorage.getItem("userId"),g=localStorage.getItem("userSlug"),b=localStorage.getItem("selectedRestaurantId"),w=await fetch(`${Mr}${l}`,{...f,headers:{"Content-Type":"application/json",...p?{"X-User-Id":p}:{},...g?{"X-User-Slug":g}:{},...b?{"X-Restaurant-Id":b}:{},...m??{}},body:i===void 0?void 0:JSON.stringify(i)}),P=(w.headers.get("content-type")??"").includes("application/json")?await w.json():await w.text();if(!w.ok){const j=typeof P=="string"?P:JSON.stringify(P);throw new Error(`Request failed (${w.status}): ${j}`)}return P}const We={get:(l,u)=>ai(l,u),post:(l,u,i)=>ai(l,{...i,method:"POST",body:u}),put:(l,u,i)=>ai(l,{...i,method:"PUT",body:u})};async function fs(l){return We.get(`/user-permissions/${l}`)}async function ph(l,u,i){const m=new URLSearchParams;i&&m.set("actor_user_id",String(i));const f=m.toString(),p=f?`/user-permissions/${l}?${f}`:`/user-permissions/${l}`;return We.put(p,u)}async function Fd(){return We.get("/permissions/catalog")}const Md=[{key:"createPayoutSchedules",label:"Create Payout Schedules"},{key:"approvePayouts",label:"Approve Payouts"},{key:"manageTeam",label:"Manage Team"},{key:"adminAccess",label:"Admin Access"},{key:"managerAccess",label:"Manager Access"},{key:"employeeOnly",label:"Employee Only"}],gr={createPayoutSchedules:!1,approvePayouts:!1,manageTeam:!1,adminAccess:!1,superadminAccess:!1,managerAccess:!1,employeeOnly:!0},Rr=l=>{if(!l)return gr;const u=localStorage.getItem(`employeePermissions:${l}`);if(!u)return gr;try{const i=JSON.parse(u);return{...gr,...i}}catch{return gr}},ed=()=>{const[l,u]=c.useState(""),[i,m]=c.useState(""),[f,p]=c.useState(!1),[g,b]=c.useState(!1),[w,R]=c.useState(!1),[P,j]=c.useState("");c.useEffect(()=>{(async()=>{try{const X=window.fs;if(!X?.readFile)return;const se=await X.readFile("image.png"),ne=new Blob([se],{type:"image/png"}),Y=URL.createObjectURL(ne);j(Y)}catch(X){console.error("Error loading logo:",X)}})()},[]),c.useEffect(()=>{const _=localStorage.getItem("rememberedEmail");_&&(u(_),R(!0))},[]),c.useEffect(()=>{w?l&&localStorage.setItem("rememberedEmail",l):localStorage.removeItem("rememberedEmail")},[w,l]);const z=Hr(),K=dr(),J=()=>{const _=new URLSearchParams(K.search).get("redirect");return _&&_.startsWith("/")?_:null},ee=async()=>{b(!0);try{const _=new AbortController,X=window.setTimeout(()=>_.abort(),1e4),se=await fetch(`${Mr}/login`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:l,password:i}),signal:_.signal});window.clearTimeout(X);const ne=await se.json();if(!se.ok)throw new Error(ne?.detail||"Login request failed.");if(console.log(ne),ne.success){ne.user_id&&localStorage.setItem("userId",String(ne.user_id)),ne.user_slug&&localStorage.setItem("userSlug",ne.user_slug);const Y=`${ne.first_name||""} ${ne.last_name||""}`.trim();Y?localStorage.setItem("userName",Y):localStorage.removeItem("userName"),ne.restaurant_key&&(localStorage.setItem("selectedRestaurantId",String(ne.restaurant_key)),localStorage.setItem("restaurantKey",String(ne.restaurant_key))),ne.restaurant_name?localStorage.setItem("restaurantName",String(ne.restaurant_name)):localStorage.removeItem("restaurantName");const ue=J();if(ue&&ne.user_slug&&ue.startsWith(`/${ne.user_slug}/`)){z(ue);return}const C=ne.user_id?String(ne.user_id):"";let O=Rr(C);if(ne.user_id)try{O=await fs(ne.user_id),localStorage.setItem(`employeePermissions:${ne.user_id}`,JSON.stringify(O))}catch(E){console.warn("Failed to refresh permissions:",E)}ne.user_slug?z(`/${ne.user_slug}/home`):ne.restaurant_key?z(`/business/${ne.restaurant_key}/home`):z("/login")}else alert("Invalid login")}catch(_){console.error("Login failed:",_);const X=_ instanceof DOMException&&_.name==="AbortError"?"Login timed out. Make sure the backend server is running.":"Login failed. Check your credentials and server connection.";alert(X)}finally{b(!1)}},D=()=>{z("/forgot-password")},k=()=>{window.location.href="/signup"};return r.jsx("div",{className:"min-h-screen w-full flex items-center justify-center p-4",style:{backgroundColor:"#f4f2ee",minHeight:"100vh",width:"100vw"},children:r.jsxs("div",{className:"w-full max-w-md",children:[r.jsx("div",{className:"text-center mb-10",children:P?r.jsx("img",{src:P,alt:"Gratly Logo",className:"mx-auto",style:{width:"254px",height:"130px"}}):r.jsx("div",{style:{width:"254px",height:"130px"},className:"mx-auto flex items-center justify-center",children:r.jsx("div",{className:"GratlyLogo",children:r.jsx("img",{src:aa,alt:"Gratly Logo",className:"gratlylogomain"})})})}),r.jsxs("div",{className:"bg-white rounded-2xl shadow-xl p-8 border border-gray-200",children:[r.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-6 text-center",children:"Welcome Back"}),r.jsxs("form",{className:"space-y-5",onSubmit:_=>{_.preventDefault(),ee()},children:[r.jsxs("div",{children:[r.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700 mb-2",children:"Email Address"}),r.jsx("input",{id:"email",type:"email",value:l,onChange:_=>u(_.target.value),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-gray-900 focus:border-transparent outline-none transition-all",placeholder:"you@example.com"})]}),r.jsxs("div",{children:[r.jsx("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-700 mb-2",children:"Password"}),r.jsxs("div",{className:"relative",children:[r.jsx("input",{id:"password",type:f?"text":"password",value:i,onChange:_=>m(_.target.value),className:"w-full px-4 py-3 pr-12 border border-gray-300 rounded-lg focus:ring-2 focus:ring-gray-900 focus:border-transparent outline-none transition-all",placeholder:""}),r.jsx("button",{type:"button",onClick:()=>p(_=>!_),"aria-label":f?"Hide password":"Show password","aria-pressed":f,className:"absolute right-3 top-1/2 -translate-y-1/2 text-gray-500 hover:text-gray-800 text-sm font-medium",children:f?r.jsxs("svg",{"aria-hidden":"true",viewBox:"0 0 24 24",className:"h-5 w-5",fill:"none",stroke:"currentColor",strokeWidth:"1.75",strokeLinecap:"round",strokeLinejoin:"round",children:[r.jsx("path",{d:"M2.1 12s3.6-6 9.9-6 9.9 6 9.9 6-3.6 6-9.9 6-9.9-6-9.9-6Z"}),r.jsx("path",{d:"M9.9 12a2.1 2.1 0 1 0 4.2 0 2.1 2.1 0 0 0-4.2 0Z"})]}):r.jsxs("svg",{"aria-hidden":"true",viewBox:"0 0 24 24",className:"h-5 w-5",fill:"none",stroke:"currentColor",strokeWidth:"1.75",strokeLinecap:"round",strokeLinejoin:"round",children:[r.jsx("path",{d:"M3 3l18 18"}),r.jsx("path",{d:"M9.8 9.8a2.1 2.1 0 0 0 2.9 2.9"}),r.jsx("path",{d:"M6.2 6.2C4.2 7.6 2.7 9.6 2.1 12c1.4 3.5 5 6 9.9 6 1.6 0 3-.3 4.3-.9"}),r.jsx("path",{d:"M14.1 5.4c2.8.6 5.1 2.6 6.2 5.6-.6 1.4-1.5 2.6-2.7 3.6"})]})})]})]}),r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("label",{className:"flex items-center gap-2 text-sm text-gray-700",children:[r.jsx("input",{type:"checkbox",checked:w,onChange:_=>R(_.target.checked),className:"h-4 w-4 rounded border-gray-300 text-gray-900 focus:ring-gray-900"}),"Remember me"]}),r.jsx("button",{type:"button",onClick:D,className:"text-sm text-gray-600 hover:text-gray-900 font-medium transition-colors bg-transparent p-0",children:"Forgot Password?"})]}),r.jsx("button",{type:"submit",disabled:g,className:"w-full bg-[#cab99a] text-black py-3 rounded-lg font-semibold hover:bg-[#bfa986] transition-all disabled:opacity-50 disabled:cursor-not-allowed shadow-lg hover:shadow-xl",children:g?"Signing In...":"Sign In"})]}),r.jsxs("div",{className:"relative my-6",children:[r.jsx("div",{className:"absolute inset-0 flex items-center",children:r.jsx("div",{className:"w-full border-t border-gray-300"})}),r.jsx("div",{className:"relative flex justify-center text-sm",children:r.jsx("span",{className:"px-4 bg-white text-gray-500",children:"or"})})]}),r.jsx("button",{type:"button",onClick:k,className:"w-full bg-white text-gray-900 py-3 rounded-lg font-semibold border-2 border-gray-900 hover:bg-gray-50 transition-all shadow-md hover:shadow-lg",children:"Create New Account"})]}),r.jsxs("p",{className:"text-center text-sm text-gray-600 mt-6",children:["By continuing, you agree to Gratly's"," ",r.jsx("a",{className:"text-gray-900 underline hover:text-gray-700",href:"/terms.html",children:"Terms of Service"})," ","and"," ",r.jsx("a",{className:"text-gray-900 underline hover:text-gray-700",href:"/privacy.html",children:"Privacy Policy"})]})]})})},hh=()=>{const[l,u]=c.useState(""),[i,m]=c.useState(""),[f,p]=c.useState(!1),[g,b]=c.useState(""),[w,R]=c.useState(""),[P,j]=c.useState("+1 "),[z,K]=c.useState(!1),[J,ee]=c.useState(""),[D,k]=c.useState(""),[_,X]=c.useState({length:!1,uppercase:!1,number:!1,specialChar:!1}),[se,ne]=c.useState(""),[Y,ue]=c.useState(""),[C,O]=c.useState(""),E=B=>{const ae=B.includes("@"),Q=B.includes(".com");return!ae||!Q?(ne("Email must include @ and .com"),!1):(ne(""),!0)},fe=B=>{const ae=B.replace(/[^\d]/g,"");return(ae.startsWith("1")?ae.slice(1):ae).length===10?(ue(""),!0):(ue("Please enter a valid US phone number (10 digits)"),!1)},xe=B=>{let ae=B.target.value;ae.startsWith("+1 ")||(ae="+1 ");const y=ae.slice(3).replace(/[^\d]/g,"").slice(0,10);let M="+1 ";y.length>0&&(M+="(",M+=y.slice(0,3),y.length>=3&&(M+=") ",M+=y.slice(3,6),y.length>=6&&(M+="-",M+=y.slice(6,10)))),j(M),y?fe("+1"+y):ue("")},de=B=>{const y=/[A-Z]/.test(B),M=/[0-9]/.test(B),Ie=/[!@#$%^&*()_+\-=\[\]{};':"\\|,.<>\/?]/.test(B),T=B.length>=8&&B.length<=12;return X({length:T,uppercase:y,number:M,specialChar:Ie}),B.length<8?(k("Password must be at least 8 characters"),!1):B.length>12?(k("Password must be 12 characters or less"),!1):y?M?Ie?(k(""),!0):(k("Password must contain at least 1 special character"),!1):(k("Password must contain at least 1 number"),!1):(k("Password must contain at least 1 uppercase letter"),!1)};c.useEffect(()=>{(async()=>{try{const ae=window.fs;if(!ae?.readFile)return;const Q=await ae.readFile("image.png"),y=new Blob([Q],{type:"image/png"}),M=URL.createObjectURL(y);ee(M)}catch(ae){console.error("Error loading logo:",ae)}})()},[]);const ke=Hr(),Ue=dr();c.useEffect(()=>{const ae=new URLSearchParams(Ue.search).get("token");ae&&O(ae)},[Ue.search]);const $e=async()=>{K(!0);try{const B={firstName:g,lastName:w,email:l,phoneNumber:P,password:i,...C?{inviteToken:C}:{}},ae=await fetch(`${Mr}/signup`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(B)});let Q;try{Q=await ae.json()}catch(y){console.error("Failed to parse JSON response:",y),alert("An unexpected error occurred. Please try again later."),K(!1);return}if(Q.success){Q.user_id&&localStorage.setItem("userId",String(Q.user_id));const y=`${g} ${w}`.trim();y&&localStorage.setItem("userName",y),Q.restaurant_key&&localStorage.setItem("restaurantKey",String(Q.restaurant_key)),ke("/login")}else alert(Q.detail||"Signup failed")}catch(B){console.error("Signup request failed:",B),alert("Network error or server is unreachable. Please try again.")}finally{K(!1)}},Ee=()=>{window.location.href="/"};return r.jsx("div",{className:"min-h-screen w-full flex items-center justify-center p-4",style:{backgroundColor:"#f4f2ee",minHeight:"100vh",width:"100vw"},children:r.jsxs("div",{className:"w-full max-w-md",children:[r.jsx("div",{className:"text-center mb-10",children:J?r.jsx("img",{src:J,alt:"Gratly Logo",className:"mx-auto",style:{width:"254px",height:"130px"}}):r.jsx("div",{style:{width:"254px",height:"130px"},className:"mx-auto flex items-center justify-center",children:r.jsx("div",{className:"gratlylogo",children:r.jsx("img",{src:aa,alt:"Gratly Logo",className:"gratlylogomain"})})})}),r.jsxs("div",{className:"bg-white rounded-2xl shadow-xl p-8 border border-gray-200",children:[r.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-6 text-center",children:"Create Account"}),r.jsxs("div",{className:"space-y-5",children:[r.jsxs("div",{children:[r.jsx("label",{htmlFor:"firstName",className:"block text-sm font-medium text-gray-700 mb-2",children:"First Name"}),r.jsx("input",{id:"firstName",type:"text",value:g,onChange:B=>b(B.target.value),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-gray-900 focus:border-transparent outline-none transition-all",placeholder:"John"})]}),r.jsxs("div",{children:[r.jsx("label",{htmlFor:"lastName",className:"block text-sm font-medium text-gray-700 mb-2",children:"Last Name"}),r.jsx("input",{id:"lastName",type:"text",value:w,onChange:B=>R(B.target.value),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-gray-900 focus:border-transparent outline-none transition-all",placeholder:"Doe"})]}),r.jsxs("div",{children:[r.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700 mb-2",children:"Email Address"}),r.jsx("input",{id:"email",type:"email",value:l,onChange:B=>{u(B.target.value),B.target.value?E(B.target.value):ne("")},className:`w-full px-4 py-3 border rounded-lg focus:ring-2 focus:ring-gray-900 focus:border-transparent outline-none transition-all ${se?"border-red-500":"border-gray-300"}`,placeholder:"you@example.com"}),se&&r.jsx("p",{className:"text-red-600 text-xs mt-2",children:se})]}),r.jsxs("div",{children:[r.jsx("label",{htmlFor:"phoneNumber",className:"block text-sm font-medium text-gray-700 mb-2",children:"Phone Number"}),r.jsx("input",{id:"phoneNumber",type:"tel",value:P,onChange:xe,className:`w-full px-4 py-3 border rounded-lg focus:ring-2 focus:ring-gray-900 focus:border-transparent outline-none transition-all ${Y?"border-red-500":"border-gray-300"}`,placeholder:"+1 (555) 123-4567"}),Y&&r.jsx("p",{className:"text-red-600 text-xs mt-2",children:Y})]}),r.jsxs("div",{children:[r.jsx("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-700 mb-2",children:"Password"}),r.jsxs("div",{className:"relative",children:[r.jsx("input",{id:"password",type:f?"text":"password",value:i,onChange:B=>{m(B.target.value),B.target.value?de(B.target.value):k("")},className:`w-full px-4 py-3 pr-12 border rounded-lg focus:ring-2 focus:ring-gray-900 focus:border-transparent outline-none transition-all ${D?"border-red-500":"border-gray-300"}`,placeholder:""}),r.jsx("button",{type:"button",onClick:()=>p(B=>!B),"aria-label":f?"Hide password":"Show password","aria-pressed":f,className:"absolute right-3 top-1/2 -translate-y-1/2 text-gray-500 hover:text-gray-800 text-sm font-medium",children:f?r.jsxs("svg",{"aria-hidden":"true",viewBox:"0 0 24 24",className:"h-5 w-5",fill:"none",stroke:"currentColor",strokeWidth:"1.75",strokeLinecap:"round",strokeLinejoin:"round",children:[r.jsx("path",{d:"M2.1 12s3.6-6 9.9-6 9.9 6 9.9 6-3.6 6-9.9 6-9.9-6-9.9-6Z"}),r.jsx("path",{d:"M9.9 12a2.1 2.1 0 1 0 4.2 0 2.1 2.1 0 0 0-4.2 0Z"})]}):r.jsxs("svg",{"aria-hidden":"true",viewBox:"0 0 24 24",className:"h-5 w-5",fill:"none",stroke:"currentColor",strokeWidth:"1.75",strokeLinecap:"round",strokeLinejoin:"round",children:[r.jsx("path",{d:"M3 3l18 18"}),r.jsx("path",{d:"M9.8 9.8a2.1 2.1 0 0 0 2.9 2.9"}),r.jsx("path",{d:"M6.2 6.2C4.2 7.6 2.7 9.6 2.1 12c1.4 3.5 5 6 9.9 6 1.6 0 3-.3 4.3-.9"}),r.jsx("path",{d:"M14.1 5.4c2.8.6 5.1 2.6 6.2 5.6-.6 1.4-1.5 2.6-2.7 3.6"})]})})]}),D&&r.jsx("p",{className:"text-red-600 text-xs mt-2",children:D}),r.jsxs("div",{className:"mt-2 text-xs",children:[r.jsx("p",{className:"text-gray-600 mb-1",children:"Password must contain:"}),r.jsxs("ul",{className:"space-y-1",children:[r.jsxs("li",{className:`flex items-center ${_.length?"text-green-600":"text-gray-600"}`,children:[r.jsx("span",{className:"mr-2",children:_.length?"":""}),"8-12 characters"]}),r.jsxs("li",{className:`flex items-center ${_.uppercase?"text-green-600":"text-gray-600"}`,children:[r.jsx("span",{className:"mr-2",children:_.uppercase?"":""}),"At least 1 uppercase letter"]}),r.jsxs("li",{className:`flex items-center ${_.number?"text-green-600":"text-gray-600"}`,children:[r.jsx("span",{className:"mr-2",children:_.number?"":""}),"At least 1 number"]}),r.jsxs("li",{className:`flex items-center ${_.specialChar?"text-green-600":"text-gray-600"}`,children:[r.jsx("span",{className:"mr-2",children:_.specialChar?"":""}),"At least 1 special character"]})]})]})]}),r.jsx("button",{onClick:$e,disabled:z,className:"w-full bg-[#cab99a] text-black py-3 rounded-lg font-semibold hover:bg-[#bfa986] transition-all disabled:opacity-50 disabled:cursor-not-allowed shadow-lg hover:shadow-xl mt-2",children:z?"Creating Account...":"Create Account"})]}),r.jsxs("div",{className:"relative my-6",children:[r.jsx("div",{className:"absolute inset-0 flex items-center",children:r.jsx("div",{className:"w-full border-t border-gray-300"})}),r.jsx("div",{className:"relative flex justify-center text-sm",children:r.jsx("span",{className:"px-4 bg-white text-gray-500",children:"or"})})]}),r.jsx("button",{type:"button",onClick:Ee,className:"w-full bg-white text-gray-900 py-3 rounded-lg font-semibold border-2 border-gray-900 hover:bg-gray-50 transition-all shadow-md hover:shadow-lg",children:"Already have an account? Sign In"})]}),r.jsx("p",{className:"text-center text-sm text-gray-600 mt-6",children:"By continuing, you agree to Gratly's Terms of Service and Privacy Policy"})]})})};async function gh(l,u=5){const i=new URLSearchParams({user_id:String(l),limit:String(u)});return We.get(`/recent-settlements?${i.toString()}`)}async function yh(l,u){try{return u&&Number.isFinite(u)?await We.get(`/reports/yesterday?user_id=${u}`):l!==null?await We.get(`/reports/yesterday?restaurant_id=${l}`):{schedules:[]}}catch(i){return console.warn("Failed to load yesterday report:",i),{schedules:[]}}}async function xh(l){try{return await We.get(`/reports/weekly-tips-gratuities?user_id=${l}`)}catch(u){return console.warn("Failed to load weekly tips/gratuities:",u),{days:[]}}}async function vh(l){try{return await We.get(`/reports/pending-payouts?user_id=${l}`)}catch(u){return console.warn("Failed to load pending payouts:",u),{pendingPayouts:0}}}async function bh(l,u,i){try{const m=new URLSearchParams({user_id:String(l),start_date:u,end_date:i});return await We.get(`/reports/payroll?${m.toString()}`)}catch(m){return console.warn("Failed to load payroll report:",m),{employees:[]}}}async function Nh(l){try{return await We.get(`/reports/this-week?user_id=${l}`)}catch(u){return console.warn("Failed to load weekly report:",u),{employees:[]}}}async function wh(l){try{return await We.get(`/reports/this-month?user_id=${l}`)}catch(u){return console.warn("Failed to load monthly report:",u),{employees:[]}}}const jh="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%2024%2024'%20fill='none'%20stroke='currentColor'%20stroke-width='1.8'%20stroke-linecap='round'%20stroke-linejoin='round'%20aria-hidden='true'%3e%3crect%20x='3'%20y='6'%20width='18'%20height='12'%20rx='2'%20/%3e%3ccircle%20cx='12'%20cy='12'%20r='3.5'%20/%3e%3cpath%20d='M12%209.5v5'%20/%3e%3c/svg%3e",Sh=()=>r.jsxs("svg",{className:"h-5 w-5 text-gray-700",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.8",strokeLinecap:"round",strokeLinejoin:"round","aria-hidden":"true",children:[r.jsx("path",{d:"M3 7h18v10a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V7z"}),r.jsx("path",{d:"M3 7l9-4 9 4"}),r.jsx("path",{d:"M16 12h2"})]}),kh=()=>r.jsxs("svg",{className:"h-5 w-5 text-gray-700",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.8",strokeLinecap:"round",strokeLinejoin:"round","aria-hidden":"true",children:[r.jsx("circle",{cx:"8",cy:"9",r:"3"}),r.jsx("circle",{cx:"16",cy:"9",r:"3"}),r.jsx("path",{d:"M3 19c0-3 3-5 5-5"}),r.jsx("path",{d:"M21 19c0-3-3-5-5-5"})]}),Ch=()=>r.jsxs("svg",{className:"h-5 w-5 text-gray-700",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.8",strokeLinecap:"round",strokeLinejoin:"round","aria-hidden":"true",children:[r.jsx("circle",{cx:"12",cy:"12",r:"8"}),r.jsx("path",{d:"M12 8v5l3 3"})]}),Ph=()=>r.jsxs("svg",{className:"h-5 w-5 text-gray-700",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.8",strokeLinecap:"round",strokeLinejoin:"round","aria-hidden":"true",children:[r.jsx("path",{d:"M4 19h16"}),r.jsx("rect",{x:"6",y:"10",width:"3",height:"6",rx:"1"}),r.jsx("rect",{x:"11",y:"7",width:"3",height:"9",rx:"1"}),r.jsx("rect",{x:"16",y:"12",width:"3",height:"4",rx:"1"})]}),Eh=()=>r.jsxs("svg",{className:"h-5 w-5 text-gray-700",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.8",strokeLinecap:"round",strokeLinejoin:"round","aria-hidden":"true",children:[r.jsx("path",{d:"M8 6h13"}),r.jsx("path",{d:"M8 12h13"}),r.jsx("path",{d:"M8 18h13"}),r.jsx("circle",{cx:"4",cy:"6",r:"1"}),r.jsx("circle",{cx:"4",cy:"12",r:"1"}),r.jsx("circle",{cx:"4",cy:"18",r:"1"})]}),td=({label:l})=>r.jsxs("span",{className:"relative inline-flex items-center group","aria-label":l,children:[r.jsxs("svg",{className:"h-4 w-4 text-gray-500",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.8",strokeLinecap:"round",strokeLinejoin:"round","aria-hidden":"true",children:[r.jsx("circle",{cx:"12",cy:"12",r:"9"}),r.jsx("path",{d:"M12 10v6"}),r.jsx("path",{d:"M12 7.5h.01"})]}),r.jsx("span",{className:"pointer-events-none absolute left-1/2 top-full z-10 mt-2 w-56 -translate-x-1/2 rounded-lg border border-gray-200 bg-white px-3 py-2 text-xs text-gray-700 opacity-0 shadow-lg transition-opacity group-hover:opacity-100",children:l})]}),Rh=()=>{const l=["Mon","Tue","Wed","Thu","Fri","Sat","Sun"],i=(localStorage.getItem("userName")||"").trim().split(/\s+/)[0]||"there",[m,f]=c.useState({netSales:0,netSalesChange:0,totalTips:0,tipsChange:0,totalGratuity:0,gratuityChange:0,pendingPayouts:0,recentTransactions:[],weeklyTipsGratuities:l.map((E,fe)=>({day:E,date:`day-${fe}`,tips:0,gratuity:0}))});c.useEffect(()=>{(async()=>{try{const fe=localStorage.getItem("userId"),xe=fe?`?user_id=${encodeURIComponent(fe)}`:"",de=await We.get(`/total-gratuity${xe}`),ke=Number(de?.totalGratuity),Ue=Number(de?.gratuityChange),$e=Number(de?.totalTips),Ee=Number(de?.tipsChange),B=Number(de?.netSales),ae=Number(de?.netSalesChange);f(Q=>({...Q,totalGratuity:Number.isFinite(ke)?ke:Q.totalGratuity,gratuityChange:Number.isFinite(Ue)?Ue:Q.gratuityChange,totalTips:Number.isFinite($e)?$e:Q.totalTips,tipsChange:Number.isFinite(Ee)?Ee:Q.tipsChange,netSales:Number.isFinite(B)?B:Q.netSales,netSalesChange:Number.isFinite(ae)?ae:Q.netSalesChange}))}catch(fe){console.error("Failed to load tips/gratuity metrics:",fe)}})()},[]),c.useEffect(()=>{const E=localStorage.getItem("userId");if(!E)return;const fe=Number(E);Number.isFinite(fe)&&vh(fe).then(xe=>{f(de=>({...de,pendingPayouts:Number(xe.pendingPayouts)||0}))})},[]),c.useEffect(()=>{const E=localStorage.getItem("userId");if(!E){f(xe=>({...xe,recentTransactions:[]}));return}const fe=Number(E);Number.isFinite(fe)&&gh(fe).then(xe=>{const de=(xe.settlements||[]).map((ke,Ue)=>({id:ke.settlementId?`${ke.settlementId}-${ke.employeeGuid??Ue}`:`settlement-${Ue}`,employeeName:ke.employeeName??null,amount:Number(ke.amount)||0,businessDate:ke.businessDate??null,createdAt:ke.createdAt??null}));f(ke=>({...ke,recentTransactions:de}))}).catch(xe=>{console.warn("Failed to load recent settlements:",xe)})},[]),c.useEffect(()=>{const E=localStorage.getItem("userId");if(!E)return;const fe=Number(E);Number.isFinite(fe)&&xh(fe).then(xe=>{if(!Array.isArray(xe.days)||xe.days.length===0)return;const de=xe.days.map(ke=>{const Ue=b(ke.date);return{day:Ue?l[(Ue.getDay()+6)%7]:l[0],date:ke.date,tips:Number(ke.tips)||0,gratuity:Number(ke.gratuity)||0}});f(ke=>({...ke,weeklyTipsGratuities:de}))}).catch(xe=>{console.warn("Failed to load weekly tips/gratuities:",xe)})},[]);const p=E=>new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(E),g=E=>E?E.split("T")[0]?.split(" ")[0]||E:"Unknown date",b=E=>{const fe=E.split("T")[0]?.split(" ")[0]||E,xe=fe.split("-");if(xe.length===3){const ke=Number(xe[0]),Ue=Number(xe[1]),$e=Number(xe[2]);if(Number.isFinite(ke)&&Number.isFinite(Ue)&&Number.isFinite($e))return new Date(ke,Ue-1,$e)}const de=new Date(fe);return Number.isNaN(de.getTime())?null:de},w=E=>{const fe=b(E);return fe?new Intl.DateTimeFormat("en-US",{month:"2-digit",day:"2-digit"}).format(fe):E.split("T")[0]?.split(" ")[0]||E},R=E=>E>=0?"text-green-600":"text-red-600",P=E=>E>=0?"":"",j="#e6d7b8",z="#cab99a",K=Math.max(...m.weeklyTipsGratuities.map(E=>E.tips+E.gratuity),0),ee=(E=>E<=10?2:E<=50?5:E<=100?10:E<=250?25:E<=500?50:E<=1e3?100:E<=2500?250:E<=5e3?500:E<=1e4?1e3:5e3)(K||10),D=K>0?Math.ceil(K/ee)*ee:ee*5,k=0,_=D-k,X=Array.from({length:6},(E,fe)=>Math.round(D/5*fe)),se=m.totalTips-m.tipsChange,ne=m.tipsChange===0?0:se/m.tipsChange*100,Y=m.totalGratuity-m.gratuityChange,ue=m.gratuityChange===0?0:Y/m.gratuityChange*100,C=m.netSales-m.netSalesChange,O=m.netSalesChange===0?0:C/m.netSalesChange*100;return r.jsxs("div",{className:"p-8",children:[r.jsxs("div",{className:"mb-8",children:[r.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Dashboard Overview"}),r.jsxs("p",{className:"text-gray-600 mt-2",children:["Welcome back ",i,"! Here's what happened yesterday."]})]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-6",children:[r.jsxs("div",{className:"bg-white rounded-xl shadow-md p-6 border border-gray-200 hover:shadow-lg transition-shadow",children:[r.jsxs("div",{className:"flex items-center justify-between mb-2",children:[r.jsx("h3",{className:"text-sm font-medium text-gray-600",children:"Net Sales"}),r.jsx("div",{className:"w-10 h-10 rounded-lg flex items-center justify-center",style:{backgroundColor:"#e6d7b8"},children:r.jsx("img",{src:jh,alt:"",className:"h-5 w-5 text-gray-700","aria-hidden":"true"})})]}),r.jsx("div",{className:"mb-2",children:r.jsx("p",{className:"text-3xl font-bold text-gray-900",children:p(m.netSales)})}),r.jsxs("div",{className:`flex items-center text-sm ${R(O)}`,children:[r.jsxs("span",{className:"font-semibold",children:[P(O)," ",Math.abs(O).toFixed(1),"%"]}),r.jsx("span",{className:"ml-2 text-gray-500",children:"vs last week"})]})]}),r.jsxs("div",{className:"bg-white rounded-xl shadow-md p-6 border border-gray-200 hover:shadow-lg transition-shadow",children:[r.jsxs("div",{className:"flex items-center justify-between mb-2",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("h3",{className:"text-sm font-medium text-gray-600",children:"Total Tips"}),r.jsx(td,{label:"Includes tips made only by employees. Excludes tips from third party sources."})]}),r.jsx("div",{className:"w-10 h-10 rounded-lg flex items-center justify-center",style:{backgroundColor:"#e6d7b8"},children:r.jsx(Sh,{})})]}),r.jsx("div",{className:"mb-2",children:r.jsx("p",{className:"text-3xl font-bold text-gray-900",children:p(m.totalTips)})}),r.jsxs("div",{className:`flex items-center text-sm ${R(ne)}`,children:[r.jsxs("span",{className:"font-semibold",children:[P(ne)," ",Math.abs(ne).toFixed(1),"%"]}),r.jsx("span",{className:"ml-2 text-gray-500",children:"vs last week"})]})]}),r.jsxs("div",{className:"bg-white rounded-xl shadow-md p-6 border border-gray-200 hover:shadow-lg transition-shadow",children:[r.jsxs("div",{className:"flex items-center justify-between mb-2",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("h3",{className:"text-sm font-medium text-gray-600",children:"Total Gratuity"}),r.jsx(td,{label:"Includes gratuity made only by employees. Excludes gratuity from third party sources."})]}),r.jsx("div",{className:"w-10 h-10 rounded-lg flex items-center justify-center",style:{backgroundColor:"#e6d7b8"},children:r.jsx(kh,{})})]}),r.jsx("div",{className:"mb-2",children:r.jsx("p",{className:"text-3xl font-bold text-gray-900",children:p(m.totalGratuity)})}),r.jsxs("div",{className:`flex items-center text-sm ${R(ue)}`,children:[r.jsxs("span",{className:"font-semibold",children:[P(ue)," ",Math.abs(ue).toFixed(1),"%"]}),r.jsx("span",{className:"ml-2 text-gray-500",children:"vs last week"})]})]}),r.jsxs("div",{className:"bg-white rounded-xl shadow-md p-6 border border-gray-200 hover:shadow-lg transition-shadow",children:[r.jsxs("div",{className:"flex items-center justify-between mb-2",children:[r.jsx("h3",{className:"text-sm font-medium text-gray-600",children:"Pending Payouts"}),r.jsx("div",{className:"w-10 h-10 rounded-lg flex items-center justify-center",style:{backgroundColor:"#e6d7b8"},children:r.jsx(Ch,{})})]}),r.jsx("div",{className:"mb-2",children:r.jsx("p",{className:"text-3xl font-bold text-gray-900",children:p(m.pendingPayouts)})})]})]}),r.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[r.jsxs("div",{className:"bg-white rounded-xl shadow-md p-6 border border-gray-200 flex flex-col",children:[r.jsxs("div",{className:"flex items-center justify-between mb-6",children:[r.jsxs("div",{children:[r.jsx("h3",{className:"text-lg font-bold text-gray-900",children:"Weekly Tips & Gratuities"}),r.jsx("p",{className:"text-sm text-gray-600",children:"Last 7 days performance"})]}),r.jsxs("div",{className:"flex flex-col items-end gap-3",children:[r.jsx("div",{className:"w-10 h-10 rounded-lg flex items-center justify-center",style:{backgroundColor:"#e6d7b8"},children:r.jsx(Ph,{})}),r.jsxs("div",{className:"flex items-center gap-4 text-xs font-medium text-gray-600",children:[r.jsxs("span",{className:"flex items-center gap-2",children:[r.jsx("span",{className:"h-2.5 w-2.5 rounded-full",style:{backgroundColor:j}}),"Earned"]}),r.jsxs("span",{className:"flex items-center gap-2",children:[r.jsx("span",{className:"h-2.5 w-2.5 rounded-full",style:{backgroundColor:z}}),"Paid"]})]})]})]}),r.jsxs("div",{className:"mt-2 flex-1 flex flex-col",children:[r.jsxs("div",{className:"relative h-64",children:[X.map(E=>{const fe=_===0?100:100-E/_*100;return r.jsxs("div",{className:"absolute left-0 right-0 flex items-center",style:{top:`${fe}%`},children:[r.jsx("span",{className:"w-12 text-[11px] text-gray-500 -translate-y-1/2",children:p(E)}),r.jsx("div",{className:"flex-1 border-t border-gray-200 ml-2"})]},E)}),r.jsx("div",{className:"absolute left-12 right-0 bottom-0 top-0 flex items-end justify-between gap-2 px-1 pb-1",children:m.weeklyTipsGratuities.map(E=>{const fe=E.tips+E.gratuity,xe=Math.max(0,Math.min(1,_===0?0:(fe-k)/_)),de=j;return r.jsx("div",{className:"flex-1 flex items-end h-full",children:r.jsx("div",{className:"w-3/4 mx-auto rounded-t-lg overflow-hidden transition-all cursor-pointer",style:{height:`${xe*100}%`},title:`${E.day}: ${p(fe)}`,children:r.jsx("div",{className:"h-full w-full",style:{backgroundColor:de},title:`Tips & Gratuity: ${p(fe)}`})})},E.date)})})]}),r.jsx("div",{className:"ml-12 mt-2 flex justify-between gap-2 text-xs text-gray-600 font-medium",children:m.weeklyTipsGratuities.map(E=>r.jsxs("span",{className:"flex-1 text-center",children:[r.jsx("span",{className:"block",children:w(E.date)}),r.jsx("span",{className:"block text-[10px] text-gray-400",children:E.day})]},E.date))})]})]}),r.jsxs("div",{className:"bg-white rounded-xl shadow-md p-6 border border-gray-200",children:[r.jsxs("div",{className:"flex items-center justify-between mb-6",children:[r.jsxs("div",{children:[r.jsx("h3",{className:"text-lg font-bold text-gray-900",children:"Recent Transactions"}),r.jsx("p",{className:"text-sm text-gray-600",children:"Latest payout settlements"})]}),r.jsx("div",{className:"w-10 h-10 rounded-lg flex items-center justify-center",style:{backgroundColor:"#e6d7b8"},children:r.jsx(Eh,{})})]}),r.jsx("div",{className:"space-y-3",children:m.recentTransactions.length===0?r.jsx("div",{className:"rounded-lg border border-dashed border-gray-200 p-4 text-sm text-gray-500",children:"No recent settlements yet."}):m.recentTransactions.map(E=>{const fe=g(E.businessDate||E.createdAt);return r.jsxs("div",{className:"flex items-center justify-between p-3 rounded-lg hover:bg-gray-50 transition-colors border border-gray-100",children:[r.jsxs("div",{children:[r.jsx("p",{className:"font-medium text-gray-900",children:fe}),E.employeeName?r.jsx("p",{className:"text-xs text-gray-500",children:E.employeeName}):null]}),r.jsxs("div",{className:"text-right",children:[r.jsx("p",{className:"font-bold text-gray-900",children:p(E.amount)}),r.jsx("span",{className:"text-xs px-2 py-1 rounded-full bg-green-100 text-green-800",children:"completed"})]})]},E.id)})})]})]})]})};async function Ih(l){try{const u=new URLSearchParams;l?.restaurantId&&Number.isFinite(l.restaurantId)&&u.set("restaurant_id",String(l.restaurantId)),l?.userId&&Number.isFinite(l.userId)&&u.set("user_id",String(l.userId));const i=u.toString(),m=i?`/employees?${i}`:"/employees";return await We.get(m)}catch(u){return console.warn("Failed to load employees:",u),[]}}async function _h(l){try{return await We.get(`/employees/${l}`)}catch(u){return console.warn("Failed to load employee:",u),null}}async function Th(l){try{return await We.get(`/employees/active-by-job?restaurant_id=${l}`)}catch(u){return console.warn("Failed to load active employees by job:",u),[]}}const ta=l=>{if(!l)return"N/A";const u=l.trim();return u.length>0?u:"N/A"},Lh=l=>{if(!l)return"N/A";const u=l.replace(/\D/g,"");return u.length!==10?ta(l):`(${u.slice(0,3)})${u.slice(3,6)}-${u.slice(6)}`};function $h(){const{restaurantKey:l}=Cn(),[u,i]=c.useState(null),[m,f]=c.useState(null),[p,g]=c.useState([]),[b,w]=c.useState(!0),[R,P]=c.useState(!1),[j,z]=c.useState({}),[K,J]=c.useState({}),[ee,D]=c.useState({}),k=Y=>Y.trim().toLowerCase()==="inactive",_=p.filter(Y=>!k(Y.is_active)),X=R?p:_;c.useEffect(()=>{const Y=localStorage.getItem("userId");if(Y){const ue=Number(Y);Number.isFinite(ue)&&i(ue)}},[]),c.useEffect(()=>{const Y=l||localStorage.getItem("restaurantKey");if(Y){const ue=Number(Y);if(Number.isFinite(ue)){f(ue);return}}f(null)},[l]),c.useEffect(()=>{let Y=!0;return m===null&&u===null?()=>{Y=!1}:(w(!0),Ih(m!==null?{restaurantId:m}:u!==null?{userId:u}:void 0).then(C=>{Y&&g(C)}).finally(()=>{Y&&w(!1)}),()=>{Y=!1})},[m,u]);const se=(Y,ue)=>Y.employeeGuid??Y.email??`employee-${ue}`,ne=async(Y,ue)=>{if(Y.email){if(u===null){D(C=>({...C,[ue]:"Please log in again to send invites."}));return}J(C=>({...C,[ue]:!0})),D(C=>({...C,[ue]:""}));try{await We.post("/team/invite",{user_id:u,email:Y.email,first_name:Y.firstName,last_name:Y.lastName,employee_guid:Y.employeeGuid}),z(C=>({...C,[ue]:!0}))}catch(C){const O=C instanceof Error?C.message:"Failed to send invite";D(E=>({...E,[ue]:O}))}finally{J(C=>({...C,[ue]:!1}))}}};return r.jsxs("main",{className:"px-6 py-6",children:[r.jsx("div",{className:"mb-6",children:r.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-3",children:[r.jsxs("div",{children:[r.jsx("h1",{className:"text-2xl font-semibold text-gray-900",children:"Team"}),r.jsx("p",{className:"text-sm text-gray-500",children:"Roster and contact details for your employees."})]}),r.jsxs("label",{className:"ml-auto flex items-center gap-2 text-sm font-medium text-gray-700",children:[r.jsx("input",{type:"checkbox",checked:R,onChange:Y=>P(Y.target.checked),className:"h-4 w-4 rounded border-gray-300 text-gray-900 focus:ring-gray-900"}),"Show all employees"]})]})}),r.jsx("div",{className:"overflow-hidden rounded-xl border border-gray-200 bg-white shadow-sm",children:r.jsx("div",{className:"overflow-x-auto",children:r.jsxs("table",{className:"min-w-full text-sm",children:[r.jsx("thead",{className:"bg-gray-50 text-left text-xs uppercase tracking-wide text-gray-500",children:r.jsxs("tr",{children:[r.jsx("th",{className:"px-6 py-3 font-semibold",children:"First name"}),r.jsx("th",{className:"px-6 py-3 font-semibold",children:"Last name"}),r.jsx("th",{className:"px-6 py-3 font-semibold",children:"Phone"}),r.jsx("th",{className:"px-6 py-3 font-semibold",children:"Email"}),r.jsx("th",{className:"px-6 py-3 font-semibold",children:"POS Status"}),r.jsx("th",{className:"px-6 py-3 font-semibold",children:"Gratly Status"})]})}),r.jsx("tbody",{className:"divide-y divide-gray-100",children:b?r.jsx("tr",{children:r.jsx("td",{className:"px-6 py-4 text-gray-500",colSpan:6,children:"Loading team members..."})}):X.length===0?r.jsx("tr",{children:r.jsx("td",{className:"px-6 py-4 text-gray-500",colSpan:6,children:R?"No employees found.":"No active employees found."})}):X.map((Y,ue)=>{const C=se(Y,ue),E=k(Y.is_active)?"bg-rose-100 text-rose-700":"bg-emerald-100 text-emerald-700",fe=!!Y.userId,xe=!!j[C],de=fe?"Active":xe?"Awaiting":"Inactive",ke=fe?"bg-emerald-100 text-emerald-700":xe?"bg-amber-100 text-amber-700":"bg-rose-100 text-rose-700",Ue=!!Y.email,$e=!!K[C],Ee=ee[C];return r.jsxs("tr",{className:"text-gray-700",children:[r.jsx("td",{className:"px-6 py-4",children:Y.employeeGuid?r.jsx(ms,{className:"font-medium text-gray-900 hover:underline",to:`${Y.employeeGuid}`,children:ta(Y.firstName)}):ta(Y.firstName)}),r.jsx("td",{className:"px-6 py-4",children:ta(Y.lastName)}),r.jsx("td",{className:"px-6 py-4",children:Lh(Y.phoneNumber)}),r.jsx("td",{className:"px-6 py-4",children:ta(Y.email)}),r.jsx("td",{className:"px-6 py-4",children:r.jsx("span",{className:`inline-flex items-center rounded-full px-2.5 py-1 text-xs font-semibold ${E}`,children:Y.is_active})}),r.jsxs("td",{className:"px-6 py-4",children:[r.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[r.jsx("span",{className:`inline-flex items-center rounded-full px-2.5 py-1 text-xs font-semibold ${ke}`,children:de}),!fe&&!xe?r.jsx("button",{type:"button",className:"rounded-full border border-gray-300 px-3 py-1 text-xs font-semibold text-gray-700 transition hover:border-gray-400 hover:text-gray-900 disabled:cursor-not-allowed disabled:border-gray-200 disabled:text-gray-400",onClick:()=>ne(Y,C),disabled:!Ue||$e,children:$e?"Sending...":"Send Invite"}):null]}),Ee?r.jsx("p",{className:"mt-2 text-xs font-medium text-rose-600",children:Ee}):null]})]},`${C}-${ue}`)})})]})})})]})}const On=l=>{if(!l)return"N/A";const u=l.trim();return u.length>0?u:"N/A"};function Dh(){const{employeeGuid:l}=Cn(),u=Hr(),[i,m]=c.useState(null),[f,p]=c.useState(!0),[g,b]=c.useState(gr),[w,R]=c.useState(Md),[P,j]=c.useState(!1),[z]=c.useState(()=>Rr(localStorage.getItem("userId"))),K=c.useMemo(()=>{const D=i?.userId;return D?`employeePermissions:${D}`:l?`employeePermissions:${l}`:""},[i?.userId,l]);c.useEffect(()=>{if(!l){p(!1);return}let D=!0;return p(!0),_h(l).then(k=>{D&&m(k)}).finally(()=>{D&&p(!1)}),()=>{D=!1}},[l]),c.useEffect(()=>{if(!K)return;if(i?.userId){fs(i.userId).then(k=>{b({...gr,...k}),localStorage.setItem(K,JSON.stringify(k))}).catch(()=>{const k=localStorage.getItem(K);if(k)try{const _=JSON.parse(k);b({...gr,..._});return}catch{b(gr);return}b(gr)});return}const D=localStorage.getItem(K);if(D)try{const k=JSON.parse(D);b({...gr,...k})}catch{b(gr)}else b(gr)},[i?.userId,K]),c.useEffect(()=>{K&&localStorage.setItem(K,JSON.stringify(g))},[g,K]),c.useEffect(()=>{let D=!0;return Fd().then(k=>{D&&k.length&&R(k)}).catch(()=>{}),()=>{D=!1}},[]);const J=async(D,k)=>{const _={...g,[D]:k},X=g;if(b(_),!i?.userId)return;const se=Number(localStorage.getItem("userId"));j(!0);try{const ne=await ph(i.userId,_,Number.isFinite(se)?se:void 0);b({...gr,...ne}),localStorage.setItem(K,JSON.stringify(ne))}catch(ne){console.warn("Failed to update permissions:",ne),b(X)}finally{j(!1)}},ee=i?`${On(i.firstName)} ${On(i.lastName)}`:"Employee Profile";return r.jsxs("main",{className:"px-6 py-6",children:[r.jsxs("div",{className:"mb-6 flex flex-wrap items-center justify-between gap-3",children:[r.jsxs("div",{children:[r.jsx("button",{type:"button",onClick:()=>u(-1),className:"mb-2 text-sm font-semibold text-gray-500 hover:text-gray-800",children:"Back to team"}),r.jsx("h1",{className:"text-2xl font-semibold text-gray-900",children:ee}),r.jsx("p",{className:"text-sm text-gray-500",children:"Manage employee details, permissions, and security."})]}),r.jsx("span",{className:"rounded-full bg-gray-100 px-3 py-1 text-xs font-semibold text-gray-600",children:i?.is_active??"N/A"})]}),f?r.jsx("div",{className:"rounded-xl border border-gray-200 bg-white p-6 text-sm text-gray-500",children:"Loading employee profile..."}):i?r.jsxs("div",{className:"grid gap-6 lg:grid-cols-[1.2fr_0.8fr]",children:[r.jsxs("section",{className:"rounded-xl border border-gray-200 bg-white p-6 shadow-sm",children:[r.jsx("h2",{className:"mb-4 text-sm font-semibold uppercase tracking-wide text-gray-500",children:"Employee info"}),r.jsxs("div",{className:"grid gap-4 sm:grid-cols-2",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-xs uppercase tracking-wide text-gray-400",children:"First name"}),r.jsx("p",{className:"text-sm font-semibold text-gray-900",children:On(i.firstName)})]}),r.jsxs("div",{children:[r.jsx("p",{className:"text-xs uppercase tracking-wide text-gray-400",children:"Last name"}),r.jsx("p",{className:"text-sm font-semibold text-gray-900",children:On(i.lastName)})]}),r.jsxs("div",{children:[r.jsx("p",{className:"text-xs uppercase tracking-wide text-gray-400",children:"Phone"}),r.jsx("p",{className:"text-sm font-semibold text-gray-900",children:On(i.phoneNumber)})]}),r.jsxs("div",{children:[r.jsx("p",{className:"text-xs uppercase tracking-wide text-gray-400",children:"Email"}),r.jsx("p",{className:"text-sm font-semibold text-gray-900",children:On(i.email)})]})]})]}),r.jsxs("section",{className:"rounded-xl border border-gray-200 bg-white p-6 shadow-sm",children:[r.jsx("h2",{className:"mb-4 text-sm font-semibold uppercase tracking-wide text-gray-500",children:"Security"}),r.jsxs("div",{className:"space-y-3 text-sm text-gray-700",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-xs uppercase tracking-wide text-gray-400",children:"Account status"}),r.jsx("p",{className:"font-semibold text-gray-900",children:i.is_active})]}),r.jsxs("div",{children:[r.jsx("p",{className:"text-xs uppercase tracking-wide text-gray-400",children:"Employee GUID"}),r.jsx("p",{className:"break-all font-semibold text-gray-900",children:On(i.employeeGuid)})]})]})]}),r.jsxs("section",{className:"rounded-xl border border-gray-200 bg-white p-6 shadow-sm lg:col-span-2",children:[r.jsx("h2",{className:"mb-4 text-sm font-semibold uppercase tracking-wide text-gray-500",children:"Permissions"}),r.jsx("div",{className:"grid gap-4 sm:grid-cols-2 lg:grid-cols-3",children:w.map(D=>r.jsxs("label",{className:"flex items-center justify-between rounded-lg border border-gray-200 bg-gray-50 px-4 py-3 text-sm font-medium text-gray-700",children:[r.jsx("span",{children:D.label}),r.jsx("input",{type:"checkbox",checked:g[D.key],onChange:k=>J(D.key,k.target.checked),className:"h-4 w-4 rounded border-gray-300 text-gray-900 focus:ring-gray-900",disabled:!i?.userId||P||D.key==="adminAccess"&&!z.adminAccess})]},D.key))}),i?.userId?null:r.jsx("p",{className:"mt-3 text-xs font-medium text-gray-500",children:"Permissions unlock after the employee signs up."})]})]}):r.jsx("div",{className:"rounded-xl border border-gray-200 bg-white p-6 text-sm text-gray-500",children:"Employee not found."})]})}async function rd(l){try{return await We.get(`/approvals?restaurant_id=${l}`)}catch(u){return console.warn("Failed to load approvals:",u),{schedules:[]}}}async function nd(l){try{const u=await We.post("/approvals/overrides",l);return console.log("Saved approval overrides:",u),{success:!0}}catch(u){return console.error("Failed to save approval overrides:",u),{success:!1,error:String(u)}}}async function Fh(l){try{return await We.post("/approvals/approve",l)}catch(u){return console.warn("Failed to approve payout schedule:",u),null}}async function Mh(l){try{return await We.post("/approvals/snapshot",l)}catch(u){return console.warn("Failed to save approval snapshot:",u),null}}const sd=[{id:"yesterday",label:"Yesterday",description:"One-day snapshot of sales, tips, and payouts."},{id:"this-week",label:"This Week",description:"Week-to-date performance and payout coverage."},{id:"this-month",label:"This Month",description:"Month-to-date totals with trend highlights."},{id:"payroll",label:"Payroll",description:"Payroll-ready summary for the current cycle."}];function Ah(){const[l,u]=c.useState(sd[0]?.id??"yesterday"),[i,m]=c.useState(null),[f,p]=c.useState(null),[g,b]=c.useState([]),[w,R]=c.useState(!0),[P,j]=c.useState(!1),[z,K]=c.useState(""),[J,ee]=c.useState(""),[D,k]=c.useState([]),[_,X]=c.useState(!1),[se,ne]=c.useState([]),[Y,ue]=c.useState({}),[C,O]=c.useState(!1),[E,fe]=c.useState(!1),xe=c.useRef(null);c.useEffect(()=>{const T=localStorage.getItem("restaurantKey");if(T){const ce=Number(T);Number.isFinite(ce)&&m(ce)}const L=localStorage.getItem("userId");if(L){const ce=Number(L);Number.isFinite(ce)&&p(ce)}const F=Rr(L);j(F.adminAccess)},[]),c.useEffect(()=>{let T=!0;return i===null&&f===null?(R(!1),()=>{T=!1}):(yh(i,f).then(L=>{T&&b(L.schedules)}).finally(()=>{T&&R(!1)}),()=>{T=!1})},[i,f]);const de=T=>new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(T),ke=T=>{if(!T)return"";const L=T.replace(/\D/g,"");return L.length?L:T},Ue=(T,L)=>{if(T.length===8){const ce=Number(T.slice(0,4)),me=Number(T.slice(4,6)),te=Number(T.slice(6,8)),ge=new Date(ce,me-1,te);return Number.isNaN(ge.getTime())?null:ge}if(!L)return null;const F=new Date(L);return Number.isNaN(F.getTime())?null:F},$e=T=>{const L=ke(T),F=Ue(L,T);if(!F)return T??"Unknown date";const ce=F.toLocaleDateString("en-US",{weekday:"long"}),me=F.toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"});return`${ce}  ${me}`},Ee=c.useMemo(()=>{const T=new Date;T.setDate(T.getDate()-1);const L=T.getFullYear(),F=String(T.getMonth()+1).padStart(2,"0"),ce=String(T.getDate()).padStart(2,"0");return`${L}${F}${ce}`},[]),B=c.useMemo(()=>sd.filter(T=>T.id!=="payroll"||P),[P]);c.useEffect(()=>{!P&&l==="payroll"&&u(B[0]?.id??"yesterday")},[P,l,B]),c.useEffect(()=>{const T=L=>{const F=L.target;!F||!xe.current||xe.current.contains(F)||fe(!1)};return document.addEventListener("click",T),()=>{document.removeEventListener("click",T)}},[]),c.useEffect(()=>{if(l!=="payroll")return;const T=localStorage.getItem("userId"),L=T?Number(T):NaN;if(!Number.isFinite(L)||!z||!J){k([]);return}X(!0),bh(L,z,J).then(F=>{k(F.employees||[])}).finally(()=>{X(!1)})},[l,z,J]),c.useEffect(()=>{if(l!=="this-week"&&l!=="this-month"){ne([]),ue({});return}const T=localStorage.getItem("userId"),L=T?Number(T):NaN;if(!Number.isFinite(L))return;O(!0),(l==="this-week"?Nh:wh)(L).then(ce=>{ne(ce.employees||[]),ue({start:ce.startDate,end:ce.endDate})}).finally(()=>{O(!1)})},[l]);const ae=c.useMemo(()=>l!=="yesterday"?[]:g.filter(T=>ke(T.businessDate)===Ee).sort((T,L)=>L.payoutScheduleId-T.payoutScheduleId),[g,l,Ee]),Q=T=>{const L=T.contributors,F=L.reduce((te,ge)=>te+(ge.payoutTips||0),0),ce=L.reduce((te,ge)=>te+(ge.payoutGratuity||0),0),me=L.reduce((te,ge)=>{const He=ge.netPayout??(ge.payoutTips||0)+(ge.payoutGratuity||0);return te+He},0);return{entries:L,payoutTipsTotal:F,payoutGratuityTotal:ce,netPayoutTotal:me}},y=c.useMemo(()=>{if(l==="yesterday"){if(ae.length===0)return null;const T=["Schedule ID","Schedule Name","Business Date","Employee","Job Title","Total Sales","Total Tips","Total Gratuity","Paid Tips","Paid Gratuity","Net Payout"],L=ae.flatMap(F=>Q(F).entries.map(me=>{const te=me.netPayout??(me.payoutTips||0)+(me.payoutGratuity||0);return[String(F.payoutScheduleId),F.name||`Payout Schedule #${F.payoutScheduleId}`,F.businessDate||"",me.employeeName||"Unnamed",me.jobTitle||"Unassigned",String(me.totalSales||0),String(me.totalTips||0),String(me.totalGratuity||0),String(me.payoutTips||0),String(me.payoutGratuity||0),String(te)]}));return{title:"yesterday-report",headers:T,rows:L}}if(l==="payroll"){if(D.length===0||!z||!J)return null;const T=["Employee","Total Payout","Start Date","End Date"],L=D.map(F=>[F.employeeName,String(F.totalPayout),z,J]);return{title:"payroll-report",headers:T,rows:L}}if(l==="this-week"||l==="this-month"){if(se.length===0)return null;const T=["Employee","Total Payout","Start Date","End Date"],L=Y.start||"",F=Y.end||"",ce=se.map(me=>[me.employeeName,String(me.totalPayout),L,F]);return{title:`${l}-report`,headers:T,rows:ce}}return null},[l,ae,D,z,J,se,Y.start,Y.end]),M=T=>{if(!y)return;const L=ge=>`"${ge.replace(/"/g,'""')}"`,F=[y.headers.map(L).join(","),...y.rows.map(ge=>ge.map(L).join(","))].join(`
`),ce=new Blob([F],{type:"text/csv;charset=utf-8;"}),me=URL.createObjectURL(ce),te=document.createElement("a");te.href=me,te.download=`${y.title}.${T}`,document.body.appendChild(te),te.click(),te.remove(),URL.revokeObjectURL(me)},Ie=()=>{if(!y)return;const T=window.open("","_blank","width=900,height=700");if(!T)return;const L=y.rows.map(F=>`<tr>${F.map(ce=>`<td>${ce}</td>`).join("")}</tr>`).join("");T.document.write(`
      <html>
        <head>
          <title>${y.title}</title>
          <style>
            body { font-family: Arial, sans-serif; padding: 24px; }
            table { width: 100%; border-collapse: collapse; font-size: 12px; }
            th, td { border: 1px solid #ddd; padding: 8px; text-align: left; }
            th { background: #f4f2ee; text-transform: uppercase; font-size: 11px; letter-spacing: 0.04em; }
            h1 { font-size: 18px; margin-bottom: 16px; }
          </style>
        </head>
        <body>
          <h1>${y.title}</h1>
          <table>
            <thead>
              <tr>${y.headers.map(F=>`<th>${F}</th>`).join("")}</tr>
            </thead>
            <tbody>${L}</tbody>
          </table>
        </body>
      </html>
    `),T.document.close(),T.focus(),T.print()};return r.jsx("main",{className:"min-h-full bg-[#f4f2ee] p-8",children:r.jsxs("div",{className:"w-full",children:[r.jsxs("header",{children:[r.jsx("h1",{className:"text-3xl font-semibold text-gray-900",children:"Reports"}),r.jsx("p",{className:"mt-2 text-sm text-gray-600",children:"Choose a reporting window to review sales performance and payout coverage."})]}),r.jsxs("section",{className:"mt-8 rounded-2xl border border-[#e4dccf] bg-white p-6 shadow-sm",children:[r.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-3",children:[r.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"Report Range"}),r.jsxs("div",{ref:xe,className:"relative",children:[r.jsxs("button",{type:"button",onClick:()=>fe(T=>!T),disabled:!y,className:`flex items-center gap-2 rounded-lg border px-3 py-2 text-xs font-semibold uppercase tracking-wide ${y?"border-[#cab99a] bg-white text-gray-700 hover:bg-[#faf7f2]":"cursor-not-allowed border-gray-200 bg-gray-100 text-gray-400"}`,children:["Export",r.jsx("span",{className:"text-base leading-none",children:""})]}),E&&y?r.jsxs("div",{className:"absolute right-0 z-10 mt-2 w-40 rounded-lg border border-[#e4dccf] bg-white shadow-lg",children:[r.jsx("button",{type:"button",onClick:()=>M("csv"),className:"w-full px-4 py-2 text-left text-xs font-semibold uppercase tracking-wide text-gray-700 hover:bg-[#faf7f2]",children:"CSV"}),r.jsx("button",{type:"button",onClick:()=>M("xls"),className:"w-full px-4 py-2 text-left text-xs font-semibold uppercase tracking-wide text-gray-700 hover:bg-[#faf7f2]",children:"Excel"}),r.jsx("button",{type:"button",onClick:Ie,className:"w-full px-4 py-2 text-left text-xs font-semibold uppercase tracking-wide text-gray-700 hover:bg-[#faf7f2]",children:"PDF"})]}):null]})]}),r.jsxs("fieldset",{className:"mt-6 grid gap-4 sm:grid-cols-2 lg:grid-cols-4",children:[r.jsx("legend",{className:"sr-only",children:"Select a report range"}),B.map(T=>r.jsxs("label",{className:"group relative flex cursor-pointer items-start gap-4 rounded-xl border border-[#e4dccf] bg-[#faf7f2] p-4 transition hover:border-[#cab99a]",children:[r.jsx("input",{type:"radio",name:"report-range",value:T.id,checked:l===T.id,onChange:()=>u(T.id),className:"peer sr-only"}),r.jsx("span",{className:"mt-1 h-4 w-4 rounded-full border border-gray-400 bg-white shadow-inner transition peer-checked:border-[#cab99a] peer-checked:bg-[#cab99a]"}),r.jsxs("span",{className:"flex-1",children:[r.jsx("span",{className:"block text-sm font-semibold text-gray-900",children:T.label}),r.jsx("span",{className:"mt-1 block text-xs text-gray-600",children:T.description})]}),r.jsx("span",{className:"pointer-events-none absolute inset-0 rounded-xl border-2 border-transparent transition group-hover:border-[#cab99a]/40 peer-checked:border-[#cab99a]"})]},T.id))]}),l==="payroll"?r.jsxs("div",{className:"mt-6 rounded-xl border border-[#e4dccf] bg-[#faf7f2] p-4",children:[r.jsx("p",{className:"text-sm font-semibold text-gray-900",children:"Select your Pay period"}),r.jsxs("div",{className:"mt-3 grid gap-4 sm:grid-cols-2",children:[r.jsxs("label",{className:"text-sm font-medium text-gray-700",children:["Start date",r.jsx("input",{type:"date",value:z,onChange:T=>K(T.target.value),className:"mt-2 w-full rounded-lg border border-gray-300 bg-white px-3 py-2 text-sm text-gray-900 shadow-sm focus:border-[#cab99a] focus:outline-none focus:ring-2 focus:ring-[#cab99a]/30"})]}),r.jsxs("label",{className:"text-sm font-medium text-gray-700",children:["End date",r.jsx("input",{type:"date",value:J,onChange:T=>ee(T.target.value),className:"mt-2 w-full rounded-lg border border-gray-300 bg-white px-3 py-2 text-sm text-gray-900 shadow-sm focus:border-[#cab99a] focus:outline-none focus:ring-2 focus:ring-[#cab99a]/30"})]})]}),r.jsx("div",{className:"mt-4 rounded-xl border border-[#e4dccf] bg-white",children:_?r.jsx("div",{className:"p-4 text-sm text-gray-600",children:"Loading payroll totals..."}):z&&J?D.length===0?r.jsx("div",{className:"p-4 text-sm text-gray-600",children:"No settlements found for this period."}):r.jsxs("table",{className:"min-w-full text-sm",children:[r.jsx("thead",{className:"bg-[#f4f2ee] text-left text-xs uppercase tracking-wide text-gray-500",children:r.jsxs("tr",{children:[r.jsx("th",{className:"px-4 py-3",children:"Employee"}),r.jsx("th",{className:"px-4 py-3",children:"Total Payout"})]})}),r.jsx("tbody",{className:"divide-y divide-[#e4dccf]",children:D.map(T=>r.jsxs("tr",{children:[r.jsx("td",{className:"px-4 py-3 font-medium text-gray-900",children:T.employeeName}),r.jsx("td",{className:"px-4 py-3 text-gray-700",children:de(T.totalPayout)})]},T.employeeGuid??T.employeeName))})]}):r.jsx("div",{className:"p-4 text-sm text-gray-600",children:"Choose a start and end date to view payroll totals."})})]}):null]}),l==="yesterday"?r.jsxs("section",{className:"mt-8 rounded-2xl border border-[#e4dccf] bg-white p-6 shadow-sm",children:[r.jsx("div",{className:"flex items-center justify-between",children:r.jsxs("div",{children:[r.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"Yesterday"}),r.jsx("p",{className:"mt-1 text-sm text-gray-600",children:"Detailed payout results for the previous business day."})]})}),w?r.jsx("div",{className:"mt-6 rounded-xl border border-dashed border-[#e4dccf] bg-[#faf7f2] p-6 text-sm text-gray-600",children:"Loading report data..."}):i===null?r.jsx("div",{className:"mt-6 rounded-xl border border-dashed border-[#e4dccf] bg-[#faf7f2] p-6 text-sm text-gray-600",children:"Select a restaurant to view report details."}):ae.length===0?r.jsx("div",{className:"mt-6 rounded-xl border border-dashed border-[#e4dccf] bg-[#faf7f2] p-6 text-sm text-gray-600",children:"No payouts found for yesterday."}):r.jsx("div",{className:"mt-6 space-y-6",children:ae.map(T=>{const L=Q(T);return r.jsxs("article",{className:"rounded-2xl border border-[#e4dccf] bg-[#faf7f2] p-5",children:[r.jsx("div",{className:"flex flex-wrap items-start justify-between gap-4",children:r.jsxs("div",{children:[r.jsx("h3",{className:"text-base font-semibold text-gray-900",children:T.name||`Payout Schedule #${T.payoutScheduleId}`}),r.jsx("p",{className:"mt-1 text-sm text-gray-600",children:$e(T.businessDate)})]})}),r.jsxs("div",{className:"mt-5 grid gap-4 rounded-xl border border-[#e4dccf] bg-white p-4 text-sm text-gray-700 sm:grid-cols-2 lg:grid-cols-4",children:[r.jsxs("div",{children:[r.jsx("span",{className:"block text-xs uppercase tracking-wide text-gray-500",children:"Total Sales"}),r.jsx("span",{className:"font-semibold",children:de(T.totalSales||0)})]}),r.jsxs("div",{children:[r.jsx("span",{className:"block text-xs uppercase tracking-wide text-gray-500",children:"Total Tips"}),r.jsx("span",{className:"font-semibold",children:de(T.totalTips||0)})]}),r.jsxs("div",{children:[r.jsx("span",{className:"block text-xs uppercase tracking-wide text-gray-500",children:"Total Gratuity"}),r.jsx("span",{className:"font-semibold",children:de(T.totalGratuity||0)})]}),r.jsxs("div",{children:[r.jsx("span",{className:"block text-xs uppercase tracking-wide text-gray-500",children:"Net Payout"}),r.jsx("span",{className:"font-semibold",children:de(L.netPayoutTotal)})]})]}),r.jsx("div",{className:"mt-6 overflow-x-auto rounded-xl border border-[#e4dccf] bg-white",children:r.jsxs("table",{className:"min-w-full text-sm",children:[r.jsx("thead",{className:"bg-[#f4f2ee] text-left text-xs uppercase tracking-wide text-gray-500",children:r.jsxs("tr",{children:[r.jsx("th",{className:"px-4 py-3",children:"Employee"}),r.jsx("th",{className:"px-4 py-3",children:"Job Title"}),r.jsx("th",{className:"px-4 py-3",children:"Total Sales"}),r.jsx("th",{className:"px-4 py-3",children:"Total Tips"}),r.jsx("th",{className:"px-4 py-3",children:"Total Gratuity"}),r.jsx("th",{className:"px-4 py-3",children:"Paid Tips"}),r.jsx("th",{className:"px-4 py-3",children:"Paid Gratuity"}),r.jsx("th",{className:"px-4 py-3",children:"Net Payout"})]})}),r.jsx("tbody",{className:"divide-y divide-[#e4dccf]",children:L.entries.map(F=>{const ce=F.netPayout??(F.payoutTips||0)+(F.payoutGratuity||0);return r.jsxs("tr",{children:[r.jsx("td",{className:"px-4 py-3 font-medium text-gray-900",children:F.employeeName||"Unnamed"}),r.jsx("td",{className:"px-4 py-3 text-gray-700",children:F.jobTitle||"Unassigned"}),r.jsx("td",{className:"px-4 py-3 text-gray-700",children:de(F.totalSales||0)}),r.jsx("td",{className:"px-4 py-3 text-gray-700",children:de(F.totalTips||0)}),r.jsx("td",{className:"px-4 py-3 text-gray-700",children:de(F.totalGratuity||0)}),r.jsx("td",{className:"px-4 py-3 text-gray-700",children:de(F.payoutTips||0)}),r.jsx("td",{className:"px-4 py-3 text-gray-700",children:de(F.payoutGratuity||0)}),r.jsx("td",{className:"px-4 py-3 font-semibold text-gray-900",children:de(ce)})]},`${F.employeeGuid}-${F.payoutReceiverId}`)})})]})})]},`${T.payoutScheduleId}-${T.businessDate??"unknown"}`)})})]}):null,l==="this-week"||l==="this-month"?r.jsxs("section",{className:"mt-8 rounded-2xl border border-[#e4dccf] bg-white p-6 shadow-sm",children:[r.jsx("div",{className:"flex items-center justify-between",children:r.jsxs("div",{children:[r.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:l==="this-week"?"This Week":"This Month"}),r.jsx("p",{className:"mt-1 text-sm text-gray-600",children:"Total payouts by employee for the selected period."})]})}),C?r.jsx("div",{className:"mt-6 rounded-xl border border-dashed border-[#e4dccf] bg-[#faf7f2] p-6 text-sm text-gray-600",children:"Loading report data..."}):se.length===0?r.jsx("div",{className:"mt-6 rounded-xl border border-dashed border-[#e4dccf] bg-[#faf7f2] p-6 text-sm text-gray-600",children:"No settlements found for this period."}):r.jsxs("div",{className:"mt-6 space-y-4",children:[Y.start&&Y.end?r.jsxs("p",{className:"text-sm text-gray-600",children:[Y.start," through ",Y.end]}):null,r.jsx("div",{className:"overflow-x-auto rounded-xl border border-[#e4dccf] bg-white",children:r.jsxs("table",{className:"min-w-full text-sm",children:[r.jsx("thead",{className:"bg-[#f4f2ee] text-left text-xs uppercase tracking-wide text-gray-500",children:r.jsxs("tr",{children:[r.jsx("th",{className:"px-4 py-3",children:"Employee"}),r.jsx("th",{className:"px-4 py-3",children:"Total Payout"})]})}),r.jsx("tbody",{className:"divide-y divide-[#e4dccf]",children:se.map(T=>r.jsxs("tr",{children:[r.jsx("td",{className:"px-4 py-3 font-medium text-gray-900",children:T.employeeName}),r.jsx("td",{className:"px-4 py-3 text-gray-700",children:de(T.totalPayout)})]},T.employeeGuid??T.employeeName))})]})})]})]}):null]})})}async function Oh(l){return We.get(`/superadmin/restaurants?user_id=${l}`)}async function Ad(l){return We.get(`/superadmin/restaurant-details?user_id=${l}`)}async function ad(l,u){return We.get(`/superadmin/onboarding-details?user_id=${l}&restaurant_guid=${u}`)}async function Uh(l){return We.post("/superadmin/onboard-restaurant",l)}function zh(){const l=Number(localStorage.getItem("userId")||""),[u,i]=c.useState([]),[m,f]=c.useState([]),[p,g]=c.useState(""),[b,w]=c.useState(null),[R,P]=c.useState(!1),[j,z]=c.useState(null),[K,J]=c.useState(null),[ee,D]=c.useState(!1),[k,_]=c.useState({userId:l,restaurantGuid:"",payoutFeePayer:"",payoutFee:"",activationDate:"",freePeriod:"",billingDate:"",billingAmount:"",adminName:"",adminPhone:"",adminEmail:""}),[X,se]=c.useState(null),ne=()=>Oh(l).then(O=>(f(O),O)),Y=()=>Ad(l).then(O=>{i(O);const E=O[0]?.restaurantGuid??"";return g(fe=>fe||E),O});c.useEffect(()=>{if(!l){w("Missing user context.");return}Y().catch(O=>{w(O instanceof Error?O.message:"Failed to load restaurants.")}),ne().catch(O=>{w(O instanceof Error?O.message:"Failed to load restaurants.")})},[l]);const ue=c.useMemo(()=>p?u.find(O=>O.restaurantGuid===p)??null:null,[u,p]),C=c.useMemo(()=>p?m.find(O=>O.restaurantGuid===p)??null:null,[m,p]);return r.jsxs("div",{className:"mx-auto w-full max-w-6xl px-4 py-10",children:[r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"rounded-2xl border border-gray-200 bg-white p-8 shadow-sm",children:[r.jsxs("div",{className:"flex flex-col gap-4 sm:flex-row sm:items-start sm:justify-between",children:[r.jsxs("div",{children:[r.jsx("h1",{className:"text-2xl font-semibold text-gray-900",children:"Settings"}),r.jsx("p",{className:"mt-2 text-sm text-gray-600",children:"Select a restaurant to review admin ownership."})]}),r.jsx("button",{type:"button",onClick:async()=>{const O=ue?.restaurantGuid??"";if(z(null),J(null),_(E=>({...E,userId:l,restaurantGuid:O})),P(!0),!!O)try{const E=await ad(l,O);se(E),_(E?fe=>({...fe,payoutFeePayer:E.payoutFeePayer??"",payoutFee:E.payoutFee??"",activationDate:E.activationDate??"",freePeriod:E.freePeriod??"",billingDate:E.billingDate??"",billingAmount:E.billingAmount??"",adminName:E.adminName??"",adminPhone:E.adminPhone??"",adminEmail:E.adminEmail??""}):fe=>({...fe,payoutFeePayer:"",payoutFee:"",activationDate:"",freePeriod:"",billingDate:"",billingAmount:"",adminName:"",adminPhone:"",adminEmail:""}))}catch(E){z(E instanceof Error?E.message:"Failed to load settings.")}},disabled:!ue?.restaurantGuid,className:"inline-flex items-center justify-center rounded-lg bg-gray-900 px-4 py-2 text-sm font-semibold text-white transition hover:bg-gray-800 disabled:cursor-not-allowed disabled:opacity-50",children:"Update Restaurant Settings"})]}),b?r.jsx("div",{className:"mt-6 rounded-lg border border-red-200 bg-red-50 px-4 py-3 text-sm text-red-700",children:b}):null,r.jsxs("div",{className:"mt-6 grid gap-6 md:grid-cols-[minmax(0,2fr)_minmax(0,1fr)]",children:[r.jsxs("div",{children:[r.jsx("label",{className:"text-xs font-semibold uppercase tracking-wide text-gray-500",children:"Restaurant"}),r.jsx("select",{value:p,onChange:O=>g(O.target.value),className:"mt-2 w-full rounded-lg border border-gray-200 bg-white px-4 py-2 text-sm text-gray-900 focus:border-gray-400 focus:outline-none",children:u.map(O=>r.jsxs("option",{value:O.restaurantGuid??"",children:[O.restaurantName??"Unknown Restaurant",O.restaurantId?` (ID ${O.restaurantId})`:""]},O.restaurantGuid??O.restaurantId??"unknown"))})]}),r.jsxs("div",{className:"rounded-lg border border-gray-200 bg-gray-50 px-4 py-3 text-sm text-gray-700",children:[r.jsx("div",{className:"text-xs font-semibold uppercase tracking-wide text-gray-500",children:"Admin users"}),r.jsx("div",{className:"mt-2 text-sm font-semibold text-gray-900",children:ue?.restaurantName??"No restaurant selected"}),r.jsx("div",{className:"mt-1 text-xs text-gray-600",children:C?.adminUsers??"Not assigned"})]})]})]}),r.jsxs("div",{className:"rounded-2xl border border-gray-200 bg-white p-8 shadow-sm",children:[r.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"Global Admin"}),r.jsx("p",{className:"mt-2 text-sm text-gray-600",children:"Details update based on the selected restaurant."}),r.jsx("div",{className:"mt-6 grid gap-4 sm:grid-cols-2",children:r.jsxs("div",{className:"rounded-lg border border-gray-200 bg-gray-50 px-4 py-3 sm:col-span-2",children:[r.jsx("div",{className:"text-xs font-semibold uppercase tracking-wide text-gray-500",children:"Admin Users"}),r.jsx("div",{className:"mt-2 text-sm text-gray-700",children:C?.adminUsers??"Not assigned"})]})})]})]}),R?r.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/40 px-4 py-6",children:r.jsxs("div",{className:"w-full max-w-2xl rounded-2xl bg-white p-8 shadow-xl",children:[r.jsxs("div",{className:"flex items-start justify-between",children:[r.jsxs("div",{children:[r.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"Update Restaurant Settings"}),r.jsx("p",{className:"mt-1 text-sm text-gray-600",children:"Update payout fees and billing details for the selected restaurant."})]}),r.jsx("button",{type:"button",onClick:()=>P(!1),className:"text-sm text-gray-500 hover:text-gray-700",children:"Close"})]}),r.jsxs("div",{className:"mt-6 space-y-4",children:[r.jsxs("div",{className:"rounded-lg border border-gray-200 bg-gray-50 px-4 py-3 text-sm",children:[r.jsx("div",{className:"text-xs font-semibold uppercase tracking-wide text-gray-500",children:"Restaurant Name"}),r.jsx("div",{className:"mt-2 text-sm font-semibold text-gray-900",children:ue?.restaurantName??"Unknown Restaurant"}),r.jsx("div",{className:"mt-1 text-xs text-gray-600",children:ue?.restaurantGuid??"No restaurant GUID available"})]}),X?r.jsx("div",{className:"rounded-lg border border-blue-100 bg-blue-50 px-4 py-2 text-xs text-blue-700",children:"Loaded saved settings. Update any fields and click save to apply changes."}):null,r.jsxs("div",{className:"grid gap-4 sm:grid-cols-2",children:[r.jsxs("div",{className:"text-sm text-gray-700 sm:col-span-2",children:[r.jsx("span",{className:"block text-sm text-gray-700",children:"Who pays payout fee per transaction"}),r.jsxs("div",{className:"mt-2 flex flex-wrap gap-4",children:[r.jsxs("label",{className:"inline-flex items-center gap-2 text-sm text-gray-700",children:[r.jsx("input",{type:"radio",name:"payoutFeePayer",value:"restaurant",checked:k.payoutFeePayer==="restaurant",onChange:O=>_(E=>({...E,payoutFeePayer:O.target.value})),className:"h-4 w-4"}),"Restaurant"]}),r.jsxs("label",{className:"inline-flex items-center gap-2 text-sm text-gray-700",children:[r.jsx("input",{type:"radio",name:"payoutFeePayer",value:"employees",checked:k.payoutFeePayer==="employees",onChange:O=>_(E=>({...E,payoutFeePayer:O.target.value})),className:"h-4 w-4"}),"Employees"]})]})]}),r.jsxs("label",{className:"text-sm text-gray-700",children:["Fees",r.jsx("input",{value:k.payoutFee??"",onChange:O=>_(E=>({...E,payoutFee:O.target.value})),className:"mt-2 w-full rounded-lg border border-gray-200 px-3 py-2 text-sm"})]}),r.jsxs("label",{className:"text-sm text-gray-700",children:["Activation Date",r.jsx("input",{type:"date",value:k.activationDate??"",onChange:O=>_(E=>({...E,activationDate:O.target.value})),className:"mt-2 w-full rounded-lg border border-gray-200 px-3 py-2 text-sm"})]}),r.jsxs("label",{className:"text-sm text-gray-700",children:["Free Period",r.jsx("input",{value:k.freePeriod??"",onChange:O=>_(E=>({...E,freePeriod:O.target.value})),className:"mt-2 w-full rounded-lg border border-gray-200 px-3 py-2 text-sm"})]}),r.jsxs("label",{className:"text-sm text-gray-700",children:["Billing Date",r.jsx("input",{type:"date",value:k.billingDate??"",onChange:O=>_(E=>({...E,billingDate:O.target.value})),className:"mt-2 w-full rounded-lg border border-gray-200 px-3 py-2 text-sm"})]}),r.jsxs("label",{className:"text-sm text-gray-700",children:["Billing Amount",r.jsx("input",{value:k.billingAmount??"",onChange:O=>_(E=>({...E,billingAmount:O.target.value})),className:"mt-2 w-full rounded-lg border border-gray-200 px-3 py-2 text-sm"})]}),r.jsxs("label",{className:"text-sm text-gray-700",children:["Admin Name",r.jsx("input",{value:k.adminName??"",onChange:O=>_(E=>({...E,adminName:O.target.value})),className:"mt-2 w-full rounded-lg border border-gray-200 px-3 py-2 text-sm"})]}),r.jsxs("label",{className:"text-sm text-gray-700",children:["Admin Phone",r.jsx("input",{value:k.adminPhone??"",onChange:O=>_(E=>({...E,adminPhone:O.target.value})),className:"mt-2 w-full rounded-lg border border-gray-200 px-3 py-2 text-sm"})]}),r.jsxs("label",{className:"text-sm text-gray-700 sm:col-span-2",children:["Admin Email",r.jsx("input",{type:"email",value:k.adminEmail??"",onChange:O=>_(E=>({...E,adminEmail:O.target.value})),className:"mt-2 w-full rounded-lg border border-gray-200 px-3 py-2 text-sm"})]})]})]}),j?r.jsx("div",{className:"mt-4 rounded-lg border border-red-200 bg-red-50 px-4 py-2 text-sm text-red-700",children:j}):null,K?r.jsx("div",{className:"mt-4 rounded-lg border border-green-200 bg-green-50 px-4 py-2 text-sm text-green-700",children:K}):null,r.jsxs("div",{className:"mt-6 flex justify-end gap-3",children:[r.jsx("button",{type:"button",onClick:()=>P(!1),className:"rounded-lg border border-gray-200 px-4 py-2 text-sm font-semibold text-gray-700 hover:bg-gray-50",children:"Cancel"}),r.jsx("button",{type:"button",disabled:ee,onClick:async()=>{D(!0),z(null),J(null);try{const O={...k,userId:l},E=await Uh(O);if(J("Restaurant settings updated."),_({userId:l,restaurantGuid:"",payoutFeePayer:"",payoutFee:"",activationDate:"",freePeriod:"",billingDate:"",billingAmount:"",adminName:"",adminPhone:"",adminEmail:""}),se(null),O.restaurantGuid){const de=await ad(l,O.restaurantGuid);se(de),de&&_(ke=>({...ke,restaurantGuid:O.restaurantGuid,payoutFeePayer:de.payoutFeePayer??"",payoutFee:de.payoutFee??"",activationDate:de.activationDate??"",freePeriod:de.freePeriod??"",billingDate:de.billingDate??"",billingAmount:de.billingAmount??"",adminName:de.adminName??"",adminPhone:de.adminPhone??"",adminEmail:de.adminEmail??""}))}const xe=(await ne()).find(de=>de.restaurantId===E.restaurantId);xe?.restaurantGuid&&g(xe.restaurantGuid)}catch(O){z(O instanceof Error?O.message:"Failed to onboard restaurant.")}finally{D(!1)}},className:"rounded-lg bg-gray-900 px-4 py-2 text-sm font-semibold text-white transition hover:bg-gray-800 disabled:cursor-not-allowed disabled:opacity-50",children:ee?"Saving...":"Save Settings"})]})]})}):null]})}async function Od(l){return We.get(`/api/billing/summary?restaurant_id=${l}`)}async function Ud(l){return(await We.get(`/api/restaurants/${l}/moov/payment-methods`)).methods||[]}async function Gh(l,u=10){return(await We.get(`/api/billing/invoices?restaurant_id=${l}&limit=${u}`)).invoices||[]}async function zd(l,u,i){return We.post(`/api/restaurants/${l}/moov/onboarding-link`,{returnUrl:u,refreshUrl:i})}async function Gd(l){return(await We.post(`/api/restaurants/${l}/moov/payment-methods/refresh`,{})).methods||[]}async function Bd(l,u){return We.post(`/api/restaurants/${l}/moov/payment-methods/preferred`,{paymentMethodId:u})}const Bh=l=>{if(!l)return"";const u=new Date(l);return Number.isNaN(u.getTime())?l:u.toLocaleDateString()},ld=(l,u)=>{const i=u?u.toUpperCase():"USD";try{return new Intl.NumberFormat("en-US",{style:"currency",currency:i}).format(l/100)}catch{return`${l/100} ${i}`}};function Wh(){const[l,u]=c.useState(null),[i,m]=c.useState([]),[f,p]=c.useState([]),[g,b]=c.useState(!0),[w,R]=c.useState(!0),[P,j]=c.useState(!1),[z,K]=c.useState(!1),[J,ee]=c.useState(!1),[D,k]=c.useState(null),[_,X]=c.useState(null),se=Number(localStorage.getItem("restaurantKey")||"0");c.useEffect(()=>{if(!se){k("Restaurant ID not found. Please log in again."),b(!1),R(!1);return}b(!0),Od(se).then(C=>{u(C)}).catch(C=>{k(C instanceof Error?C.message:"Failed to load billing summary.")}).finally(()=>b(!1))},[se]),c.useEffect(()=>{se&&(R(!0),Gh(se,50).then(C=>{m(Array.isArray(C)?C:[])}).catch(C=>{k(C instanceof Error?C.message:"Failed to load invoices.")}).finally(()=>R(!1)))},[se]),c.useEffect(()=>{!se||!l?.config||(j(!0),Ud(se).then(C=>{p(Array.isArray(C)?C:[])}).catch(C=>{console.error("Failed to load payment methods:",C)}).finally(()=>j(!1)))},[se,l]);const ne=async()=>{if(se)try{K(!0),k(null);const C=`${window.location.origin}/billing`,E=await zd(se,C,C);E.redirectUrl?window.location.href=E.redirectUrl:k("Failed to start onboarding")}catch(C){k(C instanceof Error?C.message:"Failed to start onboarding")}finally{K(!1)}},Y=async()=>{if(se)try{ee(!0),k(null);const C=await Gd(se);p(Array.isArray(C)?C:[]),X("Payment methods synced successfully"),setTimeout(()=>X(null),3e3)}catch(C){k(C instanceof Error?C.message:"Failed to refresh payment methods")}finally{ee(!1)}},ue=async C=>{if(se)try{k(null),await Bd(se,C),p(f.map(O=>({...O,isPreferred:O.moovPaymentMethodId===C}))),X("Preferred payment method updated"),setTimeout(()=>X(null),3e3)}catch(O){k(O instanceof Error?O.message:"Failed to set preferred method")}};return r.jsxs("div",{className:"mx-auto w-full max-w-6xl px-6 py-10",children:[r.jsxs("div",{className:"mb-8 flex flex-col gap-3",children:[r.jsx("h1",{className:"text-2xl font-semibold text-gray-900",children:"Billing"}),r.jsx("p",{className:"text-sm text-gray-600",children:"Manage your Gratly subscription, payment methods, and invoice history."})]}),D?r.jsx("div",{className:"mb-6 rounded-xl border border-red-200 bg-red-50 px-4 py-3 text-sm text-red-700",children:D}):null,_?r.jsx("div",{className:"mb-6 rounded-xl border border-emerald-200 bg-emerald-50 px-4 py-3 text-sm text-emerald-700",children:_}):null,r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"rounded-2xl border border-gray-200 bg-white p-6 shadow-sm",children:[r.jsx("h2",{className:"mb-4 text-lg font-semibold text-gray-900",children:"Billing Summary"}),g?r.jsx("div",{className:"text-sm text-gray-500",children:"Loading billing summary..."}):l?r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{className:"rounded-lg border border-gray-200 p-4",children:[r.jsx("p",{className:"text-sm text-gray-600",children:"Monthly Charge"}),r.jsx("p",{className:"mt-1 text-2xl font-semibold text-gray-900",children:l?.monthlyCharge?ld(l.monthlyCharge,"USD"):""})]}),r.jsxs("div",{className:"rounded-lg border border-gray-200 p-4",children:[r.jsx("p",{className:"text-sm text-gray-600",children:"Status"}),r.jsx("p",{className:"mt-1 text-lg font-semibold text-gray-900",children:"Active"})]})]}):r.jsx("div",{className:"text-sm text-gray-600",children:"No billing information available."})]}),r.jsxs("div",{className:"rounded-2xl border border-gray-200 bg-white p-6 shadow-sm",children:[r.jsx("h2",{className:"mb-4 text-lg font-semibold text-gray-900",children:"Moov Account"}),g?r.jsx("div",{className:"text-sm text-gray-500",children:"Loading account status..."}):l?.config?r.jsxs(r.Fragment,{children:[r.jsxs("div",{className:"mb-4 rounded-lg border border-gray-200 p-4",children:[r.jsx("p",{className:"text-sm text-gray-600",children:"Account Status"}),r.jsx("p",{className:"mt-1 text-lg font-semibold text-gray-900",children:l.config.moovAccountId?" Active":"Not Created"}),l.config.moovAccountId&&r.jsxs("p",{className:"mt-2 text-xs text-gray-500",children:["Account ID: ",l.config.moovAccountId.slice(0,12),"..."]})]}),!l.config.moovAccountId&&r.jsx("button",{onClick:ne,disabled:z,className:"w-full rounded-lg bg-blue-600 px-6 py-3 font-semibold text-white transition hover:bg-blue-700 disabled:cursor-not-allowed disabled:opacity-50",children:z?"Starting...":"Create Moov Account"})]}):null]}),r.jsxs("div",{className:"rounded-2xl border border-gray-200 bg-white p-6 shadow-sm",children:[r.jsxs("div",{className:"mb-4 flex items-center justify-between",children:[r.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"Payment Methods"}),r.jsx("button",{onClick:Y,disabled:J||P,className:"text-xs font-semibold text-blue-600 hover:text-blue-700 disabled:cursor-not-allowed disabled:text-gray-400",children:J?"Syncing...":"Sync from Moov"})]}),P?r.jsx("p",{className:"text-sm text-gray-500",children:"Loading payment methods..."}):f.length===0?r.jsx("p",{className:"text-sm text-gray-600",children:"No payment methods linked yet."}):r.jsx("div",{className:"space-y-2",children:f.map(C=>r.jsxs("div",{className:`flex items-center justify-between rounded-lg border p-3 transition ${C.isPreferred?"border-blue-200 bg-blue-50":"border-gray-200 hover:bg-gray-50"}`,children:[r.jsxs("div",{className:"flex-1",children:[r.jsxs("p",{className:"font-semibold text-gray-900",children:[C.brand||C.methodType,C.last4&&`  ${C.last4}`]}),r.jsxs("p",{className:"text-xs text-gray-500",children:[C.isVerified?" Verified":"Unverified","  ",C.status]})]}),r.jsxs("div",{className:"ml-4 flex items-center gap-2",children:[C.isPreferred&&r.jsx("span",{className:"rounded-full bg-blue-100 px-2 py-1 text-[10px] font-semibold text-blue-700",children:"Preferred"}),!C.isPreferred&&r.jsx("button",{onClick:()=>ue(C.moovPaymentMethodId),className:"text-[10px] font-semibold text-gray-600 hover:text-gray-900",children:"Set Preferred"})]})]},C.moovPaymentMethodId))}),l?.config?.moovAccountId&&f.length===0&&!P&&r.jsx("button",{onClick:ne,disabled:z,className:"mt-4 w-full rounded-lg bg-gray-900 px-4 py-2 text-sm font-semibold text-white transition hover:bg-gray-800 disabled:cursor-not-allowed disabled:opacity-50",children:z?"Starting...":"Add Payment Method"})]}),r.jsxs("div",{className:"rounded-2xl border border-gray-200 bg-white p-6 shadow-sm",children:[r.jsx("h2",{className:"mb-4 text-lg font-semibold text-gray-900",children:"Invoice History"}),w?r.jsx("div",{className:"text-sm text-gray-500",children:"Loading invoices..."}):i.length===0?r.jsx("div",{className:"text-sm text-gray-600",children:"No invoices yet."}):r.jsx("div",{className:"overflow-hidden rounded-xl border border-gray-200",children:r.jsxs("table",{className:"min-w-full text-left text-sm",children:[r.jsx("thead",{className:"bg-gray-50 text-xs font-semibold uppercase tracking-wide text-gray-500",children:r.jsxs("tr",{children:[r.jsx("th",{className:"px-4 py-3",children:"Invoice"}),r.jsx("th",{className:"px-4 py-3",children:"Status"}),r.jsx("th",{className:"px-4 py-3",children:"Amount"}),r.jsx("th",{className:"px-4 py-3",children:"Date"})]})}),r.jsx("tbody",{className:"divide-y divide-gray-200",children:i.map(C=>r.jsxs("tr",{children:[r.jsx("td",{className:"px-4 py-3 font-semibold text-gray-900",children:C.billingPeriod??`Invoice ${C.id}`}),r.jsx("td",{className:"px-4 py-3 text-gray-700",children:C.paymentStatus??C.moovInvoiceStatus??""}),r.jsx("td",{className:"px-4 py-3 text-gray-700",children:ld(C.amountCents,C.currency)}),r.jsx("td",{className:"px-4 py-3 text-gray-700",children:Bh(C.createdAt)})]},C.id))})]})})]})]})]})}async function Vh(l){try{const u=await We.get(`/job-titles?user_id=${l}`);return Array.isArray(u)?u:[]}catch(u){return console.warn("Failed to load job titles:",u),[]}}const cl=l=>l||"N/A",Xe=l=>new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(l),dl=l=>l<0?{text:`(${Xe(Math.abs(l))})`,className:"text-red-600"}:{text:Xe(l),className:l>0?"text-green-600":"text-gray-500"},li=(l,u,i,m)=>u+i+m,od=l=>{if(!l)return"";const u=l.replace(/\D/g,"");return u.length?u:l},Hh=l=>{if(!l)return"";const u=l.replace(/\D/g,""),i=m=>Number.isNaN(m.getTime())?"":new Intl.DateTimeFormat("en-US",{weekday:"long"}).format(m);if(u.length===8){const m=Number(u.slice(0,4)),f=Number(u.slice(4,6))-1,p=Number(u.slice(6,8));return i(new Date(m,f,p))}return i(new Date(l))},Kh=l=>[...l].sort((u,i)=>{const m=od(u.businessDate),f=od(i.businessDate);return m===f?i.payoutScheduleId-u.payoutScheduleId:m<f?1:-1});function Qh(){const[l,u]=c.useState(null),[i,m]=c.useState(null),[f,p]=c.useState([]),[g,b]=c.useState(new Set),w=c.useRef({}),[R,P]=c.useState({}),[j,z]=c.useState(null),[K,J]=c.useState(0),[ee,D]=c.useState([]),[k,_]=c.useState({}),[X,se]=c.useState({}),[ne,Y]=c.useState({}),[ue,C]=c.useState({}),[O,E]=c.useState({}),[fe,xe]=c.useState(null),[de,ke]=c.useState(!0),[Ue,$e]=c.useState(new Set),[Ee,B]=c.useState([]),[ae,Q]=c.useState({}),[y,M]=c.useState({}),Ie=W=>{const V=Kh(W.schedules);p(V),b(new Set),z(null),$e(new Set(V.filter(be=>be.isApproved).map(be=>`${be.payoutScheduleId}-${be.businessDate}`)))},T=async(W,V=!0)=>{V&&ke(!0);try{const be=await rd(W);Ie(be)}finally{V&&ke(!1)}};c.useEffect(()=>{const W=localStorage.getItem("restaurantKey");if(W){const V=Number(W);Number.isFinite(V)&&u(V)}},[]),c.useEffect(()=>{const W=localStorage.getItem("userId");if(W){const V=Number(W);Number.isFinite(V)&&m(V)}},[]),c.useEffect(()=>{let W=!0;return l===null?(ke(!1),()=>{W=!1}):(rd(l).then(V=>{W&&Ie(V)}).finally(()=>{W&&ke(!1)}),()=>{W=!1})},[l]),c.useEffect(()=>{const W=V=>{const be=V.target;be&&(be.closest('[data-add-member-dropdown="true"]')||be.closest('[data-custom-receiver-dropdown="true"]'))||(se({}),M({}))};return document.addEventListener("click",W),()=>{document.removeEventListener("click",W)}},[]);const L=W=>{const V=W.replace(/[^0-9.-]/g,""),be=Number(V);return Number.isFinite(be)?be:null},F=W=>Math.round(W*100)/100,ce=W=>{const V=W.replace(/[^0-9.-]/g,""),be=Number(V);return Number.isFinite(be)?be:null},me=W=>(W.isContributor||"").toLowerCase()==="no"&&Number(W.payoutPercentage||0)>0&&Number(W.totalTips||0)===0&&Number(W.totalGratuity||0)===0&&W.inTime===null&&W.outTime===null,te=W=>{Q(V=>{const be=V[W]??[];return{...V,[W]:[...be,{id:`custom-${Date.now()}-${Math.random().toString(16).slice(2)}`,employeeGuid:null,employeeName:"",jobTitle:"",payoutPercentage:""}]}})},ge=(W,V,be)=>{Q(_e=>({..._e,[W]:(_e[W]??[]).map(Ve=>Ve.id===V?{...Ve,...be}:Ve)}))},He=(W,V)=>{Q(be=>({...be,[W]:(be[W]??[]).filter(_e=>_e.id!==V)}))},lt=W=>{const V=W.contributors.find(be=>be.overallTips||be.overallGratuity);return{overallTips:V?.overallTips??W.totalTips,overallGratuity:V?.overallGratuity??W.totalGratuity}},ct=W=>(W||"").trim().toLowerCase(),ot=W=>{const V=W.contributors.filter(H=>(H.isContributor||"").toLowerCase()==="no"),be=W.receiverRoles.reduce((H,ye)=>{const Pe=ct(ye.receiverId);return H[Pe]=Number(ye.payoutPercentage||0),H},{}),_e=V.reduce((H,ye)=>{if(Number(ye.payoutPercentage||0)>0&&Number(ye.totalTips||0)===0&&Number(ye.totalGratuity||0)===0&&ye.inTime===null&&ye.outTime===null)return H;const Me=ct(ye.jobTitle??ye.payoutReceiverId);return H[Me]=(H[Me]??0)+1,H},{}),{overallTips:Ve,overallGratuity:bt}=lt(W),De=[];for(const H of V){if(!(Number(H.payoutPercentage||0)>0&&Number(H.totalTips||0)===0&&Number(H.totalGratuity||0)===0&&H.inTime===null&&H.outTime===null||(H.hoursWorked??0)>0))continue;const Me=ct(H.jobTitle??H.payoutReceiverId),it=be[Me]??0,Re=_e[Me]??0,le=Re>0?it/Re:0,ze=Number(H.payoutPercentage||0),Ke=ze>0?ze:le;Ke/100*(Ve+bt)>0&&De.push({receiver:H,percentage:Ke})}const Se=De.reduce((H,ye)=>H+ye.percentage,0),ft=W.contributors.reduce((H,ye)=>H+(ye.prepayoutDeduction||0),0),Ge=W.contributors.find(H=>(H.payoutFee||0)>0)?.payoutFee||0,Ct=W.contributors.map(H=>{const ye=(H.isContributor||"").toLowerCase()==="yes",Pe=!ye&&Number(H.payoutPercentage||0)>0&&Number(H.totalTips||0)===0&&Number(H.totalGratuity||0)===0&&H.inTime===null&&H.outTime===null,Me=Pe||(H.hoursWorked??0)>0,it=ct(H.jobTitle??H.payoutReceiverId),Re=_e[it]??0,le=be[it]??0,ze=!ye&&Re>0?le/Re:0,Ke=Number(H.payoutPercentage||0),Ye=!ye&&Ke>0?Ke:ze,Qe=Number(H.totalTips||0)+Number(H.totalGratuity||0),qe=ye?Qe>0?F(-(Se/100)*Number(H.totalTips||0)):0:Me?F(Ye/100*Ve):0,Nt=ye?Qe>0?F(-(Se/100)*Number(H.totalGratuity||0)):0:Me?F(Ye/100*bt):0,Rt=qe+Nt,Tt=ye?Qe>0:Rt>0;return{item:H,isContributor:ye,isManual:Pe,hasHours:Me,receiverPayoutPercentage:Ye,payoutTips:qe,payoutGratuity:Nt,payoutAmount:Rt,hasEarnings:Tt}}),St=Ct.filter(H=>H.hasEarnings).length,U=St>0&&ft>0?F(ft/St):0;return Ct.map(({item:H,isContributor:ye,receiverPayoutPercentage:Pe,payoutTips:Me,payoutGratuity:it,payoutAmount:Re,hasEarnings:le})=>{const ze=le?U:0,Ke=le?Ge:0,Ye=Number(H.totalTips||0)+Number(H.totalGratuity||0)+Re,Qe=Math.max(0,Ye-ze-Ke);return{employeeGuid:H.employeeGuid,employeeName:H.employeeName,jobTitle:H.jobTitle,isContributor:H.isContributor,payoutReceiverId:H.payoutReceiverId,payoutPercentage:ye?H.payoutPercentage:Pe,totalSales:H.totalSales,netSales:H.netSales,totalTips:H.totalTips,totalGratuity:H.totalGratuity,overallTips:H.overallTips,overallGratuity:H.overallGratuity,payoutTips:Me,payoutGratuity:it,netPayout:Qe,prepayoutDeduction:ze,payoutFee:Ke}})},vr=W=>{const V=new Set(W.contributors.map(be=>be.jobTitle).filter(be=>!!be));return W.receiverRoles.reduce((be,_e)=>(!_e.receiverId||V.has(_e.receiverId)||be.some(Ve=>Ve.receiverId===_e.receiverId)||be.push(_e),be),[])},Bt=W=>{const V=W.contributors.filter(De=>(De.isContributor||"").toLowerCase()==="no"),be=W.receiverRoles.reduce((De,Se)=>{const ft=ct(Se.receiverId);return De[ft]=Number(Se.payoutPercentage||0),De},{}),_e=V.reduce((De,Se)=>{if(me(Se))return De;const ft=ct(Se.jobTitle??Se.payoutReceiverId);return De[ft]=(De[ft]??0)+1,De},{}),{overallTips:Ve,overallGratuity:bt}=lt(W);return V.reduce((De,Se)=>{if(!(me(Se)||(Se.hoursWorked??0)>0))return De;const Ge=ct(Se.jobTitle??Se.payoutReceiverId),Ct=be[Ge]??0,St=_e[Ge]??0,U=St>0?Ct/St:0,H=Number(Se.payoutPercentage||0),ye=H>0?H:U;return ye/100*(Number(Ve||0)+Number(bt||0))<=0?De:De+ye},0)},Kt=c.useMemo(()=>{const W=new Set;return ee.reduce((V,be)=>{if(!be.employeeGuid)return V;const _e=[be.firstName,be.lastName].filter(Boolean).join(" ").trim();if(!_e)return V;const Ve=`${be.employeeGuid}-${_e}`;return W.has(Ve)||(W.add(Ve),V.push({id:be.employeeGuid,name:_e,jobTitle:be.jobTitle??""})),V},[])},[ee]);c.useEffect(()=>{let W=!0;return l===null?(D([]),()=>{W=!1}):(Th(l).then(V=>{W&&D(V)}),()=>{W=!1})},[l]),c.useEffect(()=>{let W=!0;return i===null?(B([]),()=>{W=!1}):(Vh(i).then(V=>{W&&B(V)}),()=>{W=!1})},[i]);const Kr=c.useMemo(()=>{if(de)return"Loading contributors...";if(f.length===0)return"No payout schedules found yet.";const W=f.reduce((V,be)=>V+be.contributorCount,0);return`${W} contributor${W===1?"":"s"}`},[de,f]);return r.jsxs("main",{className:"px-6 py-6",children:[fe&&r.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/50",children:r.jsxs("div",{className:"mx-4 max-w-md rounded-lg bg-white p-6 shadow-xl",children:[r.jsxs("div",{className:"mb-4 flex items-center gap-3",children:[r.jsx("div",{className:"flex h-10 w-10 items-center justify-center rounded-full bg-red-100",children:r.jsx("svg",{className:"h-6 w-6 text-red-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})})}),r.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Validation Error"})]}),r.jsx("p",{className:"mb-6 text-sm text-gray-600",children:fe}),r.jsx("div",{className:"flex justify-end",children:r.jsx("button",{type:"button",onClick:()=>xe(null),className:"rounded-lg bg-red-600 px-4 py-2 text-sm font-semibold text-white shadow-md transition hover:bg-red-700",children:"OK"})})]})}),r.jsxs("div",{className:"mb-6 flex items-start justify-between gap-4",children:[r.jsxs("div",{children:[r.jsx("h1",{className:"text-2xl font-semibold text-gray-900",children:"Approvals"}),r.jsxs("p",{className:"text-sm text-gray-500",children:["Read-only payout summaries by contributor. ",Kr]})]}),r.jsxs("label",{className:"mt-1 inline-flex items-center gap-2 text-sm text-gray-700",children:[r.jsx("input",{type:"checkbox",checked:!1,onChange:()=>{b(W=>f.length>0&&W.size===f.length?new Set:new Set(f.map(be=>`${be.payoutScheduleId}-${be.businessDate}`)))},className:"h-4 w-4 rounded border-gray-300 text-gray-900"}),g.size===f.length&&f.length>0?"Collapse All":"Expand All"]})]}),r.jsx("div",{className:"mb-6 rounded-lg border border-blue-200 bg-blue-50 p-4",children:r.jsxs("div",{className:"flex items-start gap-3",children:[r.jsx("svg",{className:"h-5 w-5 text-blue-600 mt-0.5",fill:"currentColor",viewBox:"0 0 20 20",children:r.jsx("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z",clipRule:"evenodd"})}),r.jsxs("div",{className:"flex-1",children:[r.jsx("h3",{className:"text-sm font-semibold text-blue-900",children:"Payout Processing"}),r.jsx("p",{className:"mt-1 text-sm text-blue-700",children:"Approved payouts are queued for processing. Restaurant debits and employee payouts run automatically during nightly batch jobs."})]})]})}),r.jsx("div",{className:"space-y-4",children:de?r.jsx("div",{className:"rounded-xl border border-gray-200 bg-white p-6 text-sm text-gray-500 shadow-sm",children:"Loading approval details..."}):f.length===0?r.jsx("div",{className:"rounded-xl border border-gray-200 bg-white p-6 text-sm text-gray-500 shadow-sm",children:"No approvals to show yet."}):f.map(W=>{const V=`${W.payoutScheduleId}-${W.businessDate}`,be=g.has(V);return r.jsxs("section",{ref:_e=>{w.current[V]=_e},className:"rounded-xl border border-gray-200 bg-white p-6 shadow-lg",children:[r.jsxs("div",{className:"grid w-full cursor-pointer items-center gap-3 text-left sm:grid-cols-[1fr_auto_1fr]",role:"button",tabIndex:0,onClick:()=>{b(_e=>{const Ve=new Set(_e);return Ve.has(V)?Ve.delete(V):Ve.add(V),Ve})},onKeyDown:_e=>{(_e.key==="Enter"||_e.key===" ")&&(_e.preventDefault(),b(Ve=>{const bt=new Set(Ve);return bt.has(V)?bt.delete(V):bt.add(V),bt}))},children:[r.jsx("div",{className:"flex flex-wrap items-center gap-3",children:r.jsxs("div",{children:[r.jsxs("h2",{className:"text-lg font-semibold text-gray-900",children:[W.name??"Payout Schedule",W.businessDate?r.jsxs("span",{className:"ml-2 font-semibold text-gray-900",children:["(",W.businessDate,")"]}):null]}),(()=>{const _e=Hh(W.businessDate);return _e?r.jsx("p",{className:"mt-1 text-sm text-gray-500",children:_e}):null})()]})}),r.jsxs("div",{className:"flex flex-wrap items-center justify-center gap-2 text-sm text-gray-600",children:[r.jsx("span",{className:"rounded-full border border-gray-200 bg-white px-3 py-1 text-black",children:W.payoutRuleLabel}),r.jsxs("span",{className:"rounded-full border border-gray-200 bg-white px-3 py-1 text-black",children:["Contributors: ",W.contributors.filter(_e=>_e.isContributor==="Yes").length]}),r.jsxs("span",{className:"rounded-full border border-gray-200 bg-white px-3 py-1 text-black",children:["Receivers: ",W.contributors.filter(_e=>_e.isContributor==="No"&&(_e.hoursWorked??0)>0).length]})]}),r.jsx("div",{className:"flex justify-end",children:r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("button",{type:"button",onClick:async _e=>{if(_e.stopPropagation(),!l||!W.businessDate||i===null)return;const Ve=ot(W);await nd({restaurantId:l,payoutScheduleId:W.payoutScheduleId,businessDate:W.businessDate,userId:i,items:Ve}),(await Fh({restaurantId:l,payoutScheduleId:W.payoutScheduleId,businessDate:W.businessDate,userId:i}))?.success&&(p(De=>De.filter(Se=>`${Se.payoutScheduleId}-${Se.businessDate}`!==V)),b(De=>{const Se=new Set(De);return Se.delete(V),Se}),z(De=>De===V?null:De),$e(De=>{const Se=new Set(De);return Se.add(V),Se}),await T(l,!1))},className:"rounded-lg bg-[#cab99a] px-5 py-2.5 text-base font-semibold text-black shadow-md transition hover:bg-[#bfa986] hover:shadow-lg",children:"Approve"}),r.jsx("button",{type:"button",onClick:async _e=>{if(_e.stopPropagation(),l&&i&&W.businessDate){const De=W.contributors.map(Se=>({employeeGuid:Se.employeeGuid,employeeName:Se.employeeName,jobTitle:Se.jobTitle,fieldName:"PAYOUT_PERCENTAGE",currentValue:String(Se.payoutPercentage??0)}));W.contributors.forEach(Se=>{De.push({employeeGuid:Se.employeeGuid,employeeName:Se.employeeName,jobTitle:Se.jobTitle,fieldName:"NET_PAYOUT",currentValue:String(Se.netPayout??0)})}),await Mh({restaurantId:l,payoutScheduleId:W.payoutScheduleId,businessDate:W.businessDate,userId:i,items:De})}b(De=>{const Se=new Set(De);return Se.add(V),Se}),z(V),Q(De=>({...De,[V]:[]})),M({});const Ve=W.contributors.reduce((De,Se)=>{const ft=`${V}-${Se.employeeGuid}-${Se.jobTitle??"role"}`;return De[ft]=!0,De},{});P(De=>({...De,...Ve}));const bt=vr(W);if(bt.length>0){const De=Date.now();Y(Se=>{const ft={...Se};return bt.forEach((Ge,Ct)=>{const St=`${V}-role-${Ge.receiverId??"role"}`;(!ft[St]||ft[St].length===0)&&(ft[St]=[`slot-${De}-${Ct}`])}),ft})}},disabled:Ue.has(V),className:`min-w-[112px] rounded-lg px-5 py-2.5 text-base font-semibold shadow-md transition ${Ue.has(V)?"cursor-not-allowed bg-gray-200 text-gray-400":"bg-[#cab99a] text-black hover:bg-[#bfa986] hover:shadow-lg"}`,children:"Edit"})]})})]}),r.jsxs("div",{className:"mt-4 rounded-lg border border-gray-200 bg-white p-4",children:[r.jsx("h3",{className:"mb-3 text-sm font-semibold uppercase tracking-wide text-gray-500",children:"Payout Summary"}),r.jsxs("div",{className:"grid gap-4 sm:grid-cols-2 lg:grid-cols-4",children:[r.jsxs("div",{className:"rounded-md bg-gray-50 p-3",children:[r.jsx("p",{className:"text-xs font-medium text-gray-500",children:"Tips"}),r.jsx("p",{className:"mt-1 text-lg font-semibold text-gray-900",children:Xe(W.totalTips)})]}),r.jsxs("div",{className:"rounded-md bg-gray-50 p-3",children:[r.jsx("p",{className:"text-xs font-medium text-gray-500",children:"Gratuity"}),r.jsx("p",{className:"mt-1 text-lg font-semibold text-gray-900",children:Xe(W.totalGratuity)})]}),r.jsxs("div",{className:"rounded-md bg-green-50 p-3",children:[r.jsx("p",{className:"text-xs font-medium text-green-700",children:"Total (Tips + Gratuity)"}),r.jsx("p",{className:"mt-1 text-lg font-semibold text-green-800",children:Xe(W.totalTips+W.totalGratuity)})]}),r.jsxs("div",{className:"rounded-md bg-gray-50 p-3",children:[r.jsx("p",{className:"text-xs font-medium text-gray-500",children:"Total Orders"}),r.jsx("p",{className:"mt-1 text-lg font-semibold text-gray-900",children:(W.orderCount??0).toLocaleString()})]}),r.jsxs("div",{className:"rounded-md bg-gray-50 p-3",children:[r.jsx("p",{className:"text-xs font-medium text-gray-500",children:"Total Sales"}),r.jsx("p",{className:"mt-1 text-lg font-semibold text-gray-900",children:Xe(W.totalSales)})]}),r.jsxs("div",{className:"rounded-md bg-gray-50 p-3",children:[r.jsx("p",{className:"text-xs font-medium text-gray-500",children:"Net Sales"}),r.jsx("p",{className:"mt-1 text-lg font-semibold text-gray-900",children:Xe(W.netSales)})]}),(()=>{const _e=W.contributors.reduce((Ge,Ct)=>Ge+(Ct.prepayoutDeduction||0),0),Ve=W.contributors.filter(Ge=>(Ge.prepayoutDeduction||0)>0).length,bt=Ve>0?_e/Ve:0,De=W.contributors.reduce((Ge,Ct)=>Ge+(Ct.payoutFee||0),0),Se=W.contributors.filter(Ge=>(Ge.payoutFee||0)>0).length,ft=Se>0?De/Se:0;return r.jsxs(r.Fragment,{children:[r.jsxs("div",{className:"rounded-md bg-amber-50 p-3",children:[r.jsx("p",{className:"text-xs font-medium text-amber-700",children:"Prepayout Amount"}),r.jsxs("p",{className:"mt-1 text-lg font-semibold text-amber-800",children:[Xe(_e),Ve>0?r.jsxs("span",{className:"ml-1 text-xs font-normal text-amber-600",children:["(",Xe(bt),"/person  ",Ve,")"]}):null]})]}),r.jsxs("div",{className:"rounded-md bg-amber-50 p-3",children:[r.jsx("p",{className:"text-xs font-medium text-amber-700",children:"Payout Transfer Fee"}),r.jsxs("p",{className:"mt-1 text-lg font-semibold text-amber-800",children:[Xe(De),Se>0?r.jsxs("span",{className:"ml-1 text-xs font-normal text-amber-600",children:["(",Xe(ft),"/person  ",Se,")"]}):null]})]})]})})()]})]}),be?r.jsx("div",{className:"mt-6 space-y-6 border-t border-gray-100 pt-6",children:W.contributors.length===0?r.jsx("div",{className:"text-sm text-gray-500",children:"No contributors assigned."}):(()=>{const _e=W.contributors.filter(U=>U.isContributor==="Yes").slice().sort((U,H)=>{const ye=(U.employeeName||"").trim().split(/\s+/)[0]||"",Pe=(H.employeeName||"").trim().split(/\s+/)[0]||"";return ye.localeCompare(Pe,void 0,{sensitivity:"base"})}),Ve=W.contributors.filter(U=>U.isContributor==="No").slice().sort((U,H)=>(U.jobTitle||"").localeCompare(H.jobTitle||"",void 0,{sensitivity:"base"})),bt=Ve.reduce((U,H)=>{if(me(H))return U;const ye=ct(H.jobTitle??H.payoutReceiverId);return U[ye]=(U[ye]??0)+1,U},{}),De=W.receiverRoles.reduce((U,H)=>{const ye=ct(H.receiverId);return U[ye]=Number(H.payoutPercentage||0),U},{}),Se=Bt(W),{overallTips:ft,overallGratuity:Ge}=lt(W),Ct=vr(W),St=ae[V]??[];return r.jsxs(r.Fragment,{children:[r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{children:[r.jsx("h4",{className:"text-sm font-semibold text-gray-900",children:"Contributors"}),r.jsx("div",{className:"mt-3 space-y-4",children:_e.length===0?r.jsx("div",{className:"text-sm text-gray-500",children:"No contributors assigned."}):_e.map(U=>{const H=`${V}-${U.employeeGuid}-${U.jobTitle??"role"}`,ye=!!R[H],Pe=Number(U.totalTips||0)+Number(U.totalGratuity||0),Me=Pe>0,it=Me?F(-(Se/100)*Number(U.totalTips||0)):0,Re=Me?F(-(Se/100)*Number(U.totalGratuity||0)):0,le=it+Re,ze=Me?Math.abs(Se):0,Ke=Me?F(ze/100*Pe):0,Ye=Math.max(0,li(U.isContributor,U.totalTips,U.totalGratuity,le));return r.jsxs("div",{className:"rounded-lg border border-gray-200 bg-white overflow-hidden",children:[r.jsxs("div",{className:"flex items-center justify-between px-4 py-3 cursor-pointer hover:bg-gray-50 transition-colors",role:"button",tabIndex:0,onClick:()=>P(Qe=>({...Qe,[H]:!Qe[H]})),onKeyDown:Qe=>{(Qe.key==="Enter"||Qe.key===" ")&&(Qe.preventDefault(),P(qe=>({...qe,[H]:!qe[H]})))},children:[r.jsxs("div",{className:"flex items-center gap-3 min-w-0 flex-1",children:[r.jsx("svg",{className:`h-4 w-4 text-gray-400 transition-transform ${ye?"rotate-90":""}`,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})}),r.jsxs("div",{className:"min-w-0",children:[r.jsx("span",{className:"font-medium text-gray-900 truncate",children:U.employeeName}),U.jobTitle&&r.jsxs("span",{className:"ml-2 text-sm text-gray-500",children:["(",U.jobTitle,")"]})]})]}),(()=>{const Qe=Number(U.totalTips||0),qe=Number(U.totalGratuity||0),Nt=Qe+qe,Rt=ze,Tt=-Ke,dt=U.prepayoutDeduction||0,gt=U.payoutFee||0,nt=U.netPayout??Ye,Lt=dl(Tt),Qt=dl(nt);return r.jsxs("div",{className:"grid grid-cols-8 gap-2 text-sm",style:{minWidth:"700px"},children:[r.jsxs("div",{className:"text-right",children:[r.jsx("span",{className:"text-gray-500",children:"Tips: "}),r.jsx("span",{className:"font-medium",children:Xe(Qe)})]}),r.jsxs("div",{className:"text-right",children:[r.jsx("span",{className:"text-gray-500",children:"Gratuity: "}),r.jsx("span",{className:"font-medium",children:Xe(qe)})]}),r.jsxs("div",{className:"text-right",children:[r.jsx("span",{className:"text-gray-500",children:"Total: "}),r.jsx("span",{className:"font-medium",children:Xe(Nt)})]}),r.jsxs("div",{className:"text-right",children:[r.jsx("span",{className:"text-gray-500",children:"Rate: "}),r.jsxs("span",{className:"font-medium",children:[Rt.toFixed(2),"%"]})]}),r.jsxs("div",{className:"text-right",children:[r.jsx("span",{className:"text-gray-500",children:"Payout: "}),r.jsx("span",{className:`font-medium ${Lt.className}`,children:Lt.text})]}),r.jsxs("div",{className:"text-right",children:[r.jsx("span",{className:"text-gray-500",children:"Prepayout: "}),r.jsx("span",{className:`font-medium ${dt>0?"text-red-600":""}`,children:dt>0?`(${Xe(dt)})`:Xe(0)})]}),r.jsxs("div",{className:"text-right",children:[r.jsx("span",{className:"text-gray-500",children:"Fee: "}),r.jsx("span",{className:`font-medium ${gt>0?"text-red-600":""}`,children:gt>0?`(${Xe(gt)})`:Xe(0)})]}),r.jsxs("div",{className:"text-right",children:[r.jsx("span",{className:"text-gray-500",children:"Net: "}),r.jsx("span",{className:`font-medium ${Qt.className}`,children:Qt.text})]})]})})()]}),ye&&r.jsxs("div",{className:"border-t border-gray-100 bg-gray-50 px-4 py-4",children:[r.jsxs("div",{className:"grid gap-4 sm:grid-cols-2 lg:grid-cols-4",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-xs font-medium uppercase text-gray-500",children:"Shift Time"}),r.jsxs("p",{className:"mt-1 text-sm text-gray-900",children:[cl(U.inTime)," - ",cl(U.outTime)]}),r.jsxs("p",{className:"text-xs text-gray-500",children:[U.hoursWorked?.toFixed(2)??"0.00"," hours"]})]}),r.jsxs("div",{children:[r.jsx("p",{className:"text-xs font-medium uppercase text-gray-500",children:"Sales"}),r.jsxs("p",{className:"mt-1 text-sm text-gray-900",children:["Total: ",Xe(U.totalSales)]}),r.jsxs("p",{className:"text-xs text-gray-500",children:["Net: ",Xe(U.netSales)]})]}),r.jsxs("div",{children:[r.jsx("p",{className:"text-xs font-medium uppercase text-gray-500",children:"Orders"}),r.jsx("p",{className:"mt-1 text-sm text-gray-900",children:(U.orderCount??0).toLocaleString()})]}),r.jsxs("div",{children:[r.jsx("p",{className:"text-xs font-medium uppercase text-gray-500",children:"Payout Breakdown"}),r.jsxs("p",{className:"mt-1 text-sm text-gray-900",children:["Rate: ",r.jsxs("span",{className:"font-medium text-red-600",children:[ze.toFixed(2),"%"]})]}),r.jsxs("p",{className:"text-xs text-gray-500",children:["Tips: ",Xe(it)," | Gratuity: ",Xe(Re)]})]}),(U.prepayoutDeduction||U.payoutFee)&&r.jsxs("div",{className:"sm:col-span-2",children:[r.jsx("p",{className:"text-xs font-medium uppercase text-gray-500",children:"Deductions"}),r.jsxs("div",{className:"mt-1 flex gap-4 text-sm",children:[U.prepayoutDeduction?r.jsxs("span",{children:["Prepayout: ",r.jsxs("span",{className:"text-red-600",children:["(",Xe(U.prepayoutDeduction),")"]})]}):null,U.payoutFee?r.jsxs("span",{children:["Transfer Fee: ",r.jsxs("span",{className:"text-red-600",children:["(",Xe(U.payoutFee),")"]})]}):null]})]}),j===V&&r.jsx("div",{className:"sm:col-span-2",children:r.jsxs("label",{className:"text-xs font-medium uppercase text-gray-500",children:["Edit Net Amount",r.jsx("input",{value:O[`${V}-net-${U.employeeGuid}-${U.jobTitle??"role"}`]??`$${(U.netPayout??Ye).toFixed(2)}`,onChange:Qe=>{const qe=`${V}-net-${U.employeeGuid}-${U.jobTitle??"role"}`;E(Nt=>({...Nt,[qe]:Qe.target.value}))},className:"mt-1 block w-full max-w-[140px] rounded-lg border border-gray-300 bg-white px-3 py-2 text-sm text-gray-700 focus:border-amber-500 focus:ring-1 focus:ring-amber-500"},`${V}-net-${U.employeeGuid}-${U.jobTitle??"role"}-${K}`)]})})]}),r.jsxs("p",{className:"mt-3 text-xs text-gray-400",children:["ID: ",U.employeeGuid]})]})]},H)})})]}),r.jsxs("div",{children:[r.jsx("h4",{className:"text-sm font-semibold text-gray-900",children:"Receivers"}),r.jsx("div",{className:"mt-3 space-y-4",children:Ve.length===0&&Ct.length===0?r.jsx("div",{className:"text-sm text-gray-500",children:"No receivers assigned."}):r.jsxs(r.Fragment,{children:[Ve.map(U=>{const H=`${V}-${U.employeeGuid}-${U.jobTitle??"role"}`,ye=!!R[H],Pe=ct(U.jobTitle??U.payoutReceiverId),Me=bt[Pe]??0,it=De[Pe]??0,Re=Me>0?it/Me:0,le=Number(U.payoutPercentage||0),ze=le>0?le:Re,Ke=me(U)||(U.hoursWorked??0)>0,Ye=Ke?F(ze/100*ft):0,Qe=Ke?F(ze/100*Ge):0,qe=Ye+Qe,Nt=Math.max(0,qe),Rt=Math.max(0,li(U.isContributor,U.totalTips,U.totalGratuity,qe)),Tt=Ke?ze:0;return r.jsxs("div",{className:"rounded-lg border border-gray-200 bg-white overflow-hidden",children:[r.jsxs("div",{className:"flex items-center justify-between px-4 py-3 cursor-pointer hover:bg-gray-50 transition-colors",role:"button",tabIndex:0,onClick:()=>P(dt=>({...dt,[H]:!dt[H]})),onKeyDown:dt=>{(dt.key==="Enter"||dt.key===" ")&&(dt.preventDefault(),P(gt=>({...gt,[H]:!gt[H]})))},children:[r.jsxs("div",{className:"flex items-center gap-3 min-w-0 flex-1",children:[r.jsx("svg",{className:`h-4 w-4 text-gray-400 transition-transform ${ye?"rotate-90":""}`,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})}),r.jsxs("div",{className:"min-w-0",children:[r.jsx("span",{className:"font-medium text-gray-900 truncate",children:U.employeeName}),U.jobTitle&&r.jsxs("span",{className:"ml-2 text-sm text-gray-500",children:["(",U.jobTitle,")"]})]})]}),(()=>{const dt=Tt,gt=Nt,nt=U.prepayoutDeduction||0,Lt=U.payoutFee||0,Qt=U.netPayout??Rt,he=dl(gt),rt=dl(Qt);return r.jsxs("div",{className:"grid grid-cols-8 gap-2 text-sm",style:{minWidth:"700px"},children:[r.jsx("div",{}),r.jsx("div",{}),r.jsx("div",{}),r.jsxs("div",{className:"text-right",children:[r.jsx("span",{className:"text-gray-500",children:"Rate: "}),r.jsxs("span",{className:"font-medium",children:[dt.toFixed(2),"%"]})]}),r.jsxs("div",{className:"text-right",children:[r.jsx("span",{className:"text-gray-500",children:"Payout: "}),r.jsx("span",{className:`font-medium ${he.className}`,children:he.text})]}),r.jsxs("div",{className:"text-right",children:[r.jsx("span",{className:"text-gray-500",children:"Prepayout: "}),r.jsx("span",{className:`font-medium ${nt>0?"text-red-600":""}`,children:nt>0?`(${Xe(nt)})`:Xe(0)})]}),r.jsxs("div",{className:"text-right",children:[r.jsx("span",{className:"text-gray-500",children:"Fee: "}),r.jsx("span",{className:`font-medium ${Lt>0?"text-red-600":""}`,children:Lt>0?`(${Xe(Lt)})`:Xe(0)})]}),r.jsxs("div",{className:"text-right",children:[r.jsx("span",{className:"text-gray-500",children:"Net: "}),r.jsx("span",{className:`font-medium ${rt.className}`,children:rt.text})]})]})})()]}),ye&&r.jsxs("div",{className:"border-t border-gray-100 bg-gray-50 px-4 py-4",children:[r.jsxs("div",{className:"grid gap-4 sm:grid-cols-2 lg:grid-cols-4",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-xs font-medium uppercase text-gray-500",children:"Shift Time"}),r.jsxs("p",{className:"mt-1 text-sm text-gray-900",children:[cl(U.inTime)," - ",cl(U.outTime)]}),r.jsxs("p",{className:"text-xs text-gray-500",children:[U.hoursWorked?.toFixed(2)??"0.00"," hours"]})]}),r.jsxs("div",{children:[r.jsx("p",{className:"text-xs font-medium uppercase text-gray-500",children:"Sales"}),r.jsxs("p",{className:"mt-1 text-sm text-gray-900",children:["Total: ",Xe(U.totalSales)]}),r.jsxs("p",{className:"text-xs text-gray-500",children:["Net: ",Xe(U.netSales)]})]}),r.jsxs("div",{children:[r.jsx("p",{className:"text-xs font-medium uppercase text-gray-500",children:"Orders"}),r.jsx("p",{className:"mt-1 text-sm text-gray-900",children:(U.orderCount??0).toLocaleString()})]}),r.jsxs("div",{children:[r.jsx("p",{className:"text-xs font-medium uppercase text-gray-500",children:"Payout Breakdown"}),r.jsxs("p",{className:"mt-1 text-sm text-gray-900",children:["Tips: ",r.jsx("span",{className:"font-medium text-emerald-600",children:Xe(Ye)})]}),r.jsxs("p",{className:"text-xs text-gray-500",children:["Gratuity: ",Xe(Qe)]})]}),j===V&&r.jsx("div",{className:"sm:col-span-2",children:r.jsxs("label",{className:"text-xs font-medium uppercase text-gray-500",children:["Edit Payout Percentage",r.jsx("input",{value:ue[`${V}-${U.employeeGuid}-${U.jobTitle??"role"}`]??`${Tt.toFixed(2)}%`,onChange:dt=>{const gt=`${V}-${U.employeeGuid}-${U.jobTitle??"role"}`;C(nt=>({...nt,[gt]:dt.target.value}))},className:"mt-1 block w-full max-w-[140px] rounded-lg border border-gray-300 bg-white px-3 py-2 text-sm text-gray-700 focus:border-amber-500 focus:ring-1 focus:ring-amber-500"},`${V}-${U.employeeGuid}-${U.jobTitle??"role"}-${K}`)]})}),j===V&&r.jsx("div",{className:"sm:col-span-2",children:r.jsxs("label",{className:"text-xs font-medium uppercase text-gray-500",children:["Edit Net Amount",r.jsx("input",{value:O[`${V}-net-${U.employeeGuid}-${U.jobTitle??"role"}`]??`$${(U.netPayout??Rt).toFixed(2)}`,onChange:dt=>{const gt=`${V}-net-${U.employeeGuid}-${U.jobTitle??"role"}`;E(nt=>({...nt,[gt]:dt.target.value}))},className:"mt-1 block w-full max-w-[140px] rounded-lg border border-gray-300 bg-white px-3 py-2 text-sm text-gray-700 focus:border-amber-500 focus:ring-1 focus:ring-amber-500"},`${V}-net-${U.employeeGuid}-${U.jobTitle??"role"}-${K}`)]})}),(U.prepayoutDeduction||U.payoutFee)&&r.jsxs("div",{className:"sm:col-span-2",children:[r.jsx("p",{className:"text-xs font-medium uppercase text-gray-500",children:"Deductions"}),r.jsxs("div",{className:"mt-1 flex gap-4 text-sm",children:[U.prepayoutDeduction?r.jsxs("span",{children:["Prepayout: ",r.jsxs("span",{className:"text-amber-600",children:["-",Xe(U.prepayoutDeduction)]})]}):null,U.payoutFee?r.jsxs("span",{children:["Transfer Fee: ",r.jsxs("span",{className:"text-amber-600",children:["-",Xe(U.payoutFee)]})]}):null]})]})]}),r.jsxs("p",{className:"mt-3 text-xs text-gray-400",children:["ID: ",U.employeeGuid]})]})]},H)}),Ct.map(U=>r.jsxs("div",{className:"rounded-lg border border-dashed border-gray-200 bg-white p-5 text-sm text-gray-600",children:[(()=>{const H=`${V}-role-${U.receiverId??"role"}`,ye=U.receiverId??"",Pe=ee.reduce((Re,le)=>{if(le.jobTitle!==ye||!le.employeeGuid)return Re;const Ke=[le.firstName,le.lastName].filter(Boolean).join(" ").trim()||le.employeeGuid,Ye=`${le.employeeGuid}-${Ke}`;return Re.seen.has(Ye)||(Re.seen.add(Ye),Re.items.push({id:le.employeeGuid,name:Ke})),Re},{items:[],seen:new Set}),Me=ne[H]??[],it=!!(k[H]&&Object.values(k[H]).some(Boolean));return r.jsxs(r.Fragment,{children:[r.jsxs("div",{className:"grid items-center gap-2 grid-cols-[minmax(0,1fr)_minmax(220px,1fr)_minmax(160px,auto)_minmax(160px,auto)]",children:[r.jsx("div",{className:"font-semibold text-gray-900",children:U.receiverId}),r.jsx("div",{}),r.jsx("div",{}),r.jsx("div",{})]}),j===V?(Me.length?Me:["slot-0"]).map(Re=>r.jsxs("div",{className:"mt-3 grid items-center gap-2 grid-cols-[minmax(0,1fr)_minmax(220px,1fr)_minmax(160px,auto)_minmax(160px,auto)]",children:[r.jsx("div",{}),r.jsxs("label",{className:"-ml-[72px] text-xs font-semibold uppercase tracking-wide text-gray-500",children:["Add Team Member",r.jsxs("div",{className:"relative mt-2","data-add-member-dropdown":"true",children:[r.jsxs("button",{type:"button",onClick:()=>se(le=>({...le,[H]:{...le[H],[Re]:!le[H]?.[Re]}})),className:"flex w-[220px] items-center justify-between gap-3 rounded-lg border border-gray-300 bg-white px-4 py-3 text-left text-sm font-normal text-gray-700 outline-none focus:ring-2 focus:ring-gray-900",children:[r.jsx("span",{className:k[H]?.[Re]?.name?"text-gray-900":"text-gray-400",children:k[H]?.[Re]?.name??"Select Team Member"}),r.jsx("span",{className:"ml-2 text-gray-500",children:""})]}),X[H]?.[Re]?r.jsx("div",{className:"absolute z-10 mt-2 w-[220px] max-h-60 overflow-auto rounded-lg border border-gray-200 bg-white shadow-lg",children:Pe.items.map(le=>r.jsx("button",{type:"button",onClick:()=>{_(ze=>({...ze,[H]:{...ze[H],[Re]:le}})),se({})},className:"w-full px-4 py-2 text-left text-sm text-gray-900 hover:bg-gray-50",children:le.name},le.id))}):null]})]}),r.jsxs("label",{className:"-ml-[36px] text-xs font-semibold uppercase tracking-wide text-gray-500",children:["Payout percentage",r.jsx("input",{value:ue[`${H}-${Re}`]??`${U.payoutPercentage.toFixed(2)}%`,readOnly:j!==V,onChange:le=>{C(ze=>({...ze,[`${H}-${Re}`]:le.target.value}))},className:"mt-2 w-[140px] rounded-lg border border-gray-200 bg-white px-3 py-2 text-sm text-gray-700"},`${H}-${Re}-${K}`)]}),r.jsx("div",{})]},`${H}-${Re}`)):null,j===V&&it?r.jsx("div",{className:"mt-3",children:(()=>{const le=(ne[H]??["slot-0"]).length>=5;return r.jsx("button",{type:"button",onClick:()=>{Y(ze=>{const Ke=ze[H]??["slot-0"];return Ke.length>=5?ze:{...ze,[H]:[...Ke,`slot-${Date.now()}`]}})},disabled:le,className:`rounded-lg border px-4 py-2 text-xs font-semibold uppercase tracking-wide shadow-sm transition ${le?"cursor-not-allowed border-gray-200 bg-gray-100 text-gray-400":"border-gray-300 bg-white text-gray-700 hover:bg-gray-50"}`,children:"Add More"})})()}):null]})})(),r.jsx("p",{className:"mt-2 text-xs text-gray-500",children:"No employee assigned for this job title."})]},`${V}-role-${U.receiverId}`)),j===V?r.jsxs("div",{className:"rounded-lg border border-dashed border-gray-200 bg-white p-5 text-sm text-gray-600",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx("div",{className:"text-sm font-semibold text-gray-900",children:"Add receiver"}),r.jsx("button",{type:"button",onClick:()=>te(V),className:"rounded-lg border border-gray-300 bg-white px-3 py-1.5 text-xs font-semibold uppercase tracking-wide text-gray-700 shadow-sm transition hover:bg-gray-50",children:"Add Person"})]}),St.length===0?r.jsx("p",{className:"mt-3 text-sm text-gray-500",children:"Add a person, select a job title, and enter a payout percentage."}):St.map(U=>{const H=`${V}-custom-${U.id}`,ye=`${H}-person`,Pe=`${H}-job`,Me=new Set,it=new Set;W.contributors.forEach(le=>{const ze=(le.isContributor||"").toLowerCase()==="no",Ke=Number(le.payoutTips||0)+Number(le.payoutGratuity||0),Ye=Math.max(0,li(le.isContributor,le.totalTips,le.totalGratuity,Ke)),Qe=(le.isContributor||"").toLowerCase()==="yes"&&Ye>0;if(!ze&&!Qe)return;const qe=(le.employeeName||"").trim().toLowerCase();qe&&Me.add(qe);const Nt=(le.employeeGuid||"").trim();Nt&&it.add(Nt)});const Re=Kt.filter(le=>{const ze=le.name.trim().toLowerCase();return Me.has(ze)||it.has(le.id)?!1:le.name.toLowerCase().includes(U.employeeName.trim().toLowerCase())});return r.jsxs("div",{className:"mt-4 grid items-center gap-3 md:grid-cols-[minmax(0,1fr)_minmax(220px,1fr)_minmax(160px,auto)_minmax(120px,auto)]",children:[r.jsxs("label",{className:"text-xs font-semibold uppercase tracking-wide text-gray-500",children:["Team Member",r.jsxs("div",{className:"relative mt-2","data-custom-receiver-dropdown":"true",children:[r.jsx("input",{value:U.employeeName,onChange:le=>{ge(V,U.id,{employeeGuid:null,employeeName:le.target.value}),M(ze=>({...ze,[ye]:!0}))},onFocus:()=>M(le=>({...le,[ye]:!0})),placeholder:"Select or add person",className:"w-full rounded-lg border border-gray-300 bg-white px-4 py-3 text-sm text-gray-700 outline-none focus:ring-2 focus:ring-gray-900"}),y[ye]?r.jsx("div",{className:"absolute z-10 mt-2 w-full max-h-60 overflow-auto rounded-lg border border-gray-200 bg-white shadow-lg",children:Re.length===0?r.jsx("div",{className:"px-4 py-3 text-sm text-gray-500",children:"No matching employees"}):Re.map(le=>r.jsx("button",{type:"button",onClick:()=>{ge(V,U.id,{employeeGuid:le.id,employeeName:le.name,jobTitle:U.jobTitle||le.jobTitle||""}),M({})},className:"w-full px-4 py-2 text-left text-sm text-gray-900 hover:bg-gray-50",children:le.name},le.id))}):null]})]}),r.jsxs("label",{className:"text-xs font-semibold uppercase tracking-wide text-gray-500",children:["Job Title",r.jsxs("div",{className:"relative mt-2","data-custom-receiver-dropdown":"true",children:[r.jsxs("button",{type:"button",onClick:()=>M(le=>({...le,[Pe]:!le[Pe]})),className:"flex w-full items-center justify-between gap-3 rounded-lg border border-gray-300 bg-white px-4 py-3 text-left text-sm font-normal text-gray-700 outline-none focus:ring-2 focus:ring-gray-900",children:[r.jsx("span",{className:U.jobTitle?"text-gray-900":"text-gray-400",children:U.jobTitle||"Select job title"}),r.jsx("span",{className:"ml-2 text-gray-500",children:""})]}),y[Pe]?r.jsx("div",{className:"absolute z-10 mt-2 w-full max-h-60 overflow-auto rounded-lg border border-gray-200 bg-white shadow-lg",children:Ee.length===0?r.jsx("div",{className:"px-4 py-3 text-sm text-gray-500",children:"No job titles available"}):Ee.map(le=>r.jsx("button",{type:"button",onClick:()=>{ge(V,U.id,{jobTitle:le}),M({})},className:"w-full px-4 py-2 text-left text-sm text-gray-900 hover:bg-gray-50",children:le},le))}):null]})]}),r.jsxs("label",{className:"text-xs font-semibold uppercase tracking-wide text-gray-500",children:["Payout percentage",r.jsx("input",{value:U.payoutPercentage,onChange:le=>ge(V,U.id,{payoutPercentage:le.target.value}),placeholder:"0.00%",className:"mt-2 w-[140px] rounded-lg border border-gray-200 bg-white px-3 py-2 text-sm text-gray-700"})]}),r.jsx("div",{className:"flex justify-end",children:r.jsx("button",{type:"button",onClick:()=>He(V,U.id),className:"rounded-lg border border-gray-300 bg-white px-3 py-2 text-xs font-semibold uppercase tracking-wide text-gray-700 shadow-sm transition hover:bg-gray-50",children:"Remove"})})]},U.id)})]}):null]})})]})]}),j===V?r.jsxs("div",{className:"flex justify-end gap-3 border-t border-gray-100 pt-4",children:[r.jsx("button",{type:"button",onClick:async U=>{if(U.stopPropagation(),l===null)return;if(Object.entries(O).filter(([Pe])=>Pe.startsWith(`${V}-net-`)).length>0){const Pe=f.find(Me=>`${Me.payoutScheduleId}-${Me.businessDate}`===V);if(Pe){const{overallTips:Me,overallGratuity:it}=lt(Pe),Re=Me+it;let le=0,ze=0,Ke=0;for(const qe of Pe.contributors){const Nt=`${V}-net-${qe.employeeGuid}-${qe.jobTitle??"role"}`,Rt=O[Nt],Tt=Rt!==void 0?ce(Rt)??0:qe.netPayout??0;le+=Tt,ze+=qe.prepayoutDeduction||0,Ke+=qe.payoutFee||0}const Ye=F(le+ze+Ke),Qe=F(Re);if(Math.abs(Ye-Qe)>.05){xe(`Total mismatch: Sum of Net amounts ($${le.toFixed(2)}) + Prepayout ($${ze.toFixed(2)}) + Transfer Fee ($${Ke.toFixed(2)}) = $${Ye.toFixed(2)}, but Total Tips + Gratuity = $${Qe.toFixed(2)}. Please adjust the values to match.`);return}}}const ye={payloadItems:null,scheduleId:null,businessDate:null};if(p(Pe=>Pe.map(Me=>{if(`${Me.payoutScheduleId}-${Me.businessDate}`!==V)return Me;const{overallTips:Re,overallGratuity:le}=lt(Me),ze=Me.contributors.map(he=>{const rt=he.isContributor!=="No",st=`${V}-net-${he.employeeGuid}-${he.jobTitle??"role"}`,at=`${V}-${he.employeeGuid}-${he.jobTitle??"role"}`,Pt=O[st],yt=ue[at];if(Pt!==void 0){const $t=ce(Pt)??0,Wt=he.prepayoutDeduction||0,Dt=he.payoutFee||0,At=Re+le;if(rt){const br=Number(he.totalTips||0),Zt=Number(he.totalGratuity||0),Ar=br+Zt;if(Ar>0){const Or=Ar-$t-Wt-Dt,er=F(Or/Ar*100),Ur=F(-(er/100)*br),zr=F(-(er/100)*Zt);return{...he,payoutPercentage:er,payoutTips:Ur,payoutGratuity:zr,netPayout:$t,overallTips:Re,overallGratuity:le}}}else if(At>0){const br=$t+Wt+Dt,Zt=F(br/At*100),Ar=F(Zt/100*Re),Or=F(Zt/100*le);return{...he,payoutPercentage:Zt,payoutTips:Ar,payoutGratuity:Or,netPayout:$t,overallTips:Re,overallGratuity:le}}}if(!rt&&yt!==void 0){const $t=L(yt);if($t!==null){const Wt=F($t/100*Re),Dt=F($t/100*le);return{...he,payoutPercentage:$t,payoutTips:Wt,payoutGratuity:Dt,overallTips:Re,overallGratuity:le}}}return he}),Ke=new Set(ze.map(he=>`${he.employeeGuid}-${he.jobTitle??""}-${he.isContributor}`)),Ye=(ae[V]??[]).reduce((he,rt)=>{const st=rt.employeeName.trim(),at=rt.jobTitle.trim();if(!st||!at)return he;const Pt=rt.payoutPercentage?L(rt.payoutPercentage):null;if(Pt===null)return he;const yt=rt.employeeGuid??`custom-${rt.id}`,$t=`${yt}-${at}-No`;if(Ke.has($t))return he;Ke.add($t);const Wt=F(Pt/100*Re),Dt=F(Pt/100*le);return he.push({employeeGuid:yt,employeeName:st,jobTitle:at,businessDate:Me.businessDate,inTime:null,outTime:null,hoursWorked:1,isContributor:"No",payoutReceiverId:at,payoutPercentage:Pt,totalSales:0,netSales:0,totalTips:0,totalGratuity:0,overallTips:Re,overallGratuity:le,payoutTips:Wt,payoutGratuity:Dt}),he},[]),Qe=Me.receiverRoles.reduce((he,rt)=>{const st=`${V}-role-${rt.receiverId??"role"}`,at=k[st];return at&&Object.entries(at).forEach(([Pt,yt])=>{if(!yt)return;const $t=`${yt.id}-${rt.receiverId??""}-No`;if(Ke.has($t))return;const Wt=ue[`${st}-${Pt}`],At=(Wt?L(Wt):null)??rt.payoutPercentage??0,br=F(At/100*Re),Zt=F(At/100*le);he.push({employeeGuid:yt.id,employeeName:yt.name,jobTitle:rt.receiverId??null,businessDate:Me.businessDate,inTime:null,outTime:null,hoursWorked:0,isContributor:"No",payoutReceiverId:rt.receiverId??null,payoutPercentage:At,totalSales:0,netSales:0,totalTips:0,totalGratuity:0,overallTips:Re,overallGratuity:le,payoutTips:br,payoutGratuity:Zt})}),he},[]),qe=Me.receiverRoles.map(he=>{const rt=`${V}-role-${he.receiverId??"role"}`,st=ue[rt],at=st?L(st):null;return at!==null?{...he,payoutPercentage:at}:he}),Nt=new Set(qe.map(he=>ct(he.receiverId))),Rt=(ae[V]??[]).reduce((he,rt)=>{const st=rt.jobTitle.trim();if(!st)return he;const at=rt.payoutPercentage?L(rt.payoutPercentage):null;if(at===null)return he;const Pt=ct(st);return Nt.has(Pt)||(Nt.add(Pt),he.push({receiverId:st,payoutPercentage:at,isContributor:!1})),he},[]),Tt={...Me,contributors:[...ze,...Qe,...Ye],receiverRoles:[...qe,...Rt]},dt=Tt.contributors.filter(he=>he.isContributor!=="No").length,gt=Tt.contributors.filter(he=>he.isContributor==="No").length,nt={...Tt,contributorCount:dt,receiverCount:gt},Lt=ot(nt);ye.payloadItems=Lt,ye.scheduleId=nt.payoutScheduleId,ye.businessDate=nt.businessDate;const Qt=Lt.map(he=>{const rt=nt.contributors.find(yt=>yt.employeeGuid===he.employeeGuid&&yt.jobTitle===he.jobTitle&&yt.isContributor===he.isContributor),st=`${V}-net-${he.employeeGuid}-${he.jobTitle??"role"}`,at=O[st],Pt=at!==void 0?ce(at)??he.netPayout:he.netPayout;return{...rt,...he,netPayout:Pt}});return{...nt,contributors:Qt}})),ye.payloadItems&&ye.scheduleId&&ye.businessDate&&i!==null){console.log("Saving approval overrides:",{restaurantId:l,payoutScheduleId:ye.scheduleId,businessDate:ye.businessDate,itemCount:ye.payloadItems.length});const Pe=await nd({restaurantId:l,payoutScheduleId:ye.scheduleId,businessDate:ye.businessDate,userId:i,items:ye.payloadItems});if(!Pe.success){console.error("Failed to save:",Pe.error),xe(`Failed to save changes: ${Pe.error}`);return}console.log("Save successful")}z(null),J(Pe=>Pe+1),C({}),E({}),_({}),se({}),Y({}),Q(Pe=>({...Pe,[V]:[]})),M({})},className:"rounded-lg bg-[#cab99a] px-4 py-2 text-sm font-semibold text-black shadow-md transition hover:bg-[#bfa986] hover:shadow-lg",children:"Save"}),r.jsx("button",{type:"button",onClick:U=>{U.stopPropagation(),z(null),b(new Set),P({}),J(H=>H+1),C({}),E({}),_({}),se({}),Y({}),Q(H=>({...H,[V]:[]})),M({}),requestAnimationFrame(()=>{const H=w.current[V];H&&H.scrollIntoView({behavior:"smooth",block:"start"})})},className:"rounded-lg border border-gray-300 bg-white px-4 py-2 text-sm font-semibold text-gray-700 shadow-sm transition hover:bg-gray-50",children:"Cancel"})]}):null]})})()}):null]},V)})})]})}const Jh=()=>{const[l,u]=c.useState(null),[i,m]=c.useState("existing"),[f,p]=c.useState([]),[g,b]=c.useState(!1),[w,R]=c.useState(""),[P,j]=c.useState(""),[z,K]=c.useState(!1),[J,ee]=c.useState(!1),[D,k]=c.useState(""),[_,X]=c.useState(""),[se,ne]=c.useState(null),[Y,ue]=c.useState(null),[C,O]=c.useState(!1),[E,fe]=c.useState(!1),[xe,de]=c.useState(""),[ke,Ue]=c.useState(""),[$e,Ee]=c.useState([]),[B,ae]=c.useState(""),[Q,y]=c.useState(null),[M,Ie]=c.useState(""),[T,L]=c.useState({}),[F,ce]=c.useState({}),[me,te]=c.useState(!1),[ge,He]=c.useState(!1),[lt,ct]=c.useState(""),[ot,vr]=c.useState(""),[Bt,Kt]=c.useState(""),[Kr,W]=c.useState(""),[V,be]=c.useState(""),[_e,Ve]=c.useState([{name:"Gratuity",selected:!0,percentage:100},{name:"Tips",selected:!0,percentage:100}]),bt=Array.from({length:96},(x,G)=>{const A=Math.floor(G/4),oe=G%4*15;return`${String(A).padStart(2,"0")}:${String(oe).padStart(2,"0")}`}),De=["Mon","Tue","Wed","Thu","Fri","Sat","Sun"],Se=x=>{if(!x)return"";const[G,A]=x.split(":").map(Number);if(!Number.isFinite(G)||!Number.isFinite(A))return x;const oe=G>=12?"PM":"AM";return`${G%12===0?12:G%12}:${String(A).padStart(2,"0")} ${oe}`},ft=x=>{const G=Number(x);return Number.isFinite(G)?G.toFixed(2):""},[Ge,Ct]=c.useState([]),[St,U]=c.useState(!1),[H,ye]=c.useState(""),[Pe,Me]=c.useState([]),[it,Re]=c.useState(!1),[le,ze]=c.useState(""),[Ke,Ye]=c.useState(!1),[Qe,qe]=c.useState(!1),[Nt,Rt]=c.useState(!1),[Tt,dt]=c.useState(!1),[gt,nt]=c.useState([]),[Lt,Qt]=c.useState(null),[he,rt]=c.useState({}),[st,at]=c.useState([]),[Pt,yt]=c.useState(null),[$t,Wt]=c.useState(""),[Dt,At]=c.useState("Job Weighted Payout"),[br,Zt]=c.useState(""),[Ar,Or]=c.useState(""),[er,Ur]=c.useState({}),zr=M?`prePayoutAccounts:restaurant:${M}`:null,Un=(x,G)=>{const A=new Set(x.map(Ce=>Ce.toLowerCase())),oe=[...x];return G.forEach(Ce=>{const et=Ce.trim();if(!et)return;const Ot=et.toLowerCase();A.has(Ot)||(A.add(Ot),oe.push(et))}),oe},ys=x=>{zr&&localStorage.setItem(zr,JSON.stringify(x))};c.useEffect(()=>{const x=localStorage.getItem("userId");if(x){const A=Number(x);Number.isFinite(A)&&u(A)}const G=localStorage.getItem("restaurantKey");G&&Ie(G)},[]),c.useEffect(()=>{if(!zr)return;const x=localStorage.getItem(zr);if(x)try{const G=JSON.parse(x);if(Array.isArray(G)){const A=G.filter(oe=>typeof oe=="string"&&oe.trim());at(oe=>Un(oe,A))}}catch{}},[zr]),c.useEffect(()=>{if(!se)return;f.some(G=>G.payout_schedule_id===se)||(ne(null),Y===se&&ue(null))},[Y,f,se]),c.useEffect(()=>{(async()=>{if(l===null){Ee([]);return}ae("");try{const G=await fetch(`${Mr}/job-titles?user_id=${l}`);if(!G.ok)throw new Error(`Failed to fetch job titles (${G.status})`);const A=await G.json();Ee(Array.isArray(A)?A:[])}catch(G){const A=G instanceof Error?G.message:"Failed to fetch job titles";ae(A)}})()},[M,l]),c.useEffect(()=>{const x=G=>{const A=G.target;A&&(St&&!A.closest('[data-payout-dropdown="true"]')&&U(!1),it&&!A.closest('[data-receiver-dropdown="true"]')&&Re(!1),Ke&&!A.closest('[data-start-day-dropdown="true"]')&&Ye(!1),Qe&&!A.closest('[data-end-day-dropdown="true"]')&&qe(!1),Nt&&!A.closest('[data-start-time-dropdown="true"]')&&Rt(!1),Tt&&!A.closest('[data-end-time-dropdown="true"]')&&dt(!1),Lt!==null&&!A.closest('[data-pre-payout-dropdown="true"]')&&(Qt(null),yt(null)))};return document.addEventListener("mousedown",x),()=>{document.removeEventListener("mousedown",x)}},[St,it,Ke,Qe,Nt,Tt,Lt]),c.useEffect(()=>{const x=Array.from(new Set([...Ge,...Pe]));Ur(G=>{const A={};return x.forEach(oe=>{A[oe]=typeof G[oe]=="string"?G[oe]:""}),A})},[Ge,Pe]);const ut=c.useCallback(async x=>{if(l!==null){b(!0),R("");try{const G=new URLSearchParams({user_id:String(l)}),A=Number(M);Number.isFinite(A)&&G.set("restaurant_id",String(A)),x===!0&&G.set("include_inactive","true");const oe=await fetch(`${Mr}/payout-schedules?${G.toString()}`);if(!oe.ok)throw new Error(`Failed to fetch schedules (${oe.status})`);const Ce=await oe.json();p(Array.isArray(Ce)?Ce:[])}catch(G){const A=G instanceof Error?G.message:"Failed to fetch schedules";R(A)}finally{b(!1)}}},[l,M]);c.useEffect(()=>{i==="existing"&&ut(me)},[i,ut,me]);const yl=(x,G)=>!x&&!G?"":x&&G?`${x} - ${G}`:x||G||"",xs=(x,G)=>!x&&!G?"":x&&G?`${x} - ${G}`:x||G||"",la=x=>{switch(x){case"1":return"Custom Payout";case"2":return"Equal Payout";case"3":return"Hour Based Payout";case"4":return"Job Weighted Payout";default:return""}},zn=x=>{switch(x){case"1":return"Custom Payout";case"2":return"Equal Payout";case"3":return"Hour Based Payout";case"4":return"Job Weighted Payout";default:return"Job Weighted Payout"}},xl=async x=>{if(l===null){j("Please log in again to view schedules.");return}K(!0),j("");try{const G=await fetch(`${Mr}/payout-schedules/${x}?user_id=${l}`);if(!G.ok)throw new Error(`Failed to fetch schedule (${G.status})`);const A=await G.json();ct(A.name??""),vr(A.start_day??""),Kt(A.end_day??""),W(A.start_time??""),be(A.end_time??""),At(zn(A.payout_rule_id??null)),Ve(Fe=>Fe.map(Ae=>{const Be=Ae.name.toLowerCase(),wr=Be==="gratuity"?A.payout_triggers?.gratuity:Be==="tips"?A.payout_triggers?.tips:void 0;return{...Ae,percentage:typeof wr=="number"&&Number.isFinite(wr)?wr:Ae.percentage}}));const oe=[],Ce=[],et={};(A.payout_receivers||[]).forEach(Fe=>{Fe.payout_receiver_id&&(Fe.contributor_receiver===1||Fe.contributor_receiver===!0||Fe.contributor_receiver===null||Fe.contributor_receiver===void 0?Ce.includes(Fe.payout_receiver_id)||Ce.push(Fe.payout_receiver_id):oe.includes(Fe.payout_receiver_id)||oe.push(Fe.payout_receiver_id),et[Fe.payout_receiver_id]=Fe.payout_percentage!==null&&Fe.payout_percentage!==void 0?String(Fe.payout_percentage):"")}),Ur(et),Ct(oe),Me(Ce),y(x),Zt(A.custom_individual_payout!==null&&A.custom_individual_payout!==void 0?String(A.custom_individual_payout):""),Or(A.custom_group_contribution!==null&&A.custom_group_contribution!==void 0?String(A.custom_group_contribution):"");const Ot=(A.pre_payouts||[]).map(Fe=>({type:Number(Fe.pre_payout_option)===1?"Fixed Amount":"Percentage",value:Fe.pre_payout_value!==null&&Fe.pre_payout_value!==void 0?String(Fe.pre_payout_value):"",account:Fe.user_account||""})),rr=Ot.map(Fe=>Fe.account).filter(Fe=>Fe&&!$e.includes(Fe));rr.length>0&&at(Fe=>{const Ae=Un(Fe,rr);return ys(Ae),Ae}),nt(Ot),m("create")}catch(G){const A=G instanceof Error?G.message:"Failed to fetch schedule";j(A)}finally{K(!1)}},vs=async x=>{const G=Y===x;if(ue(A=>A===x?null:x),!G&&!T[x]){ce({...F,[x]:!0});try{const A=await fetch(`${Mr}/payout-schedules/${x}?user_id=${l}`,{headers:{"Content-Type":"application/json"}});if(!A.ok)throw new Error("Failed to load schedule details");const oe=await A.json();L({...T,[x]:oe})}catch(A){console.error("Failed to load schedule details:",A)}finally{ce({...F,[x]:!1})}}},Gn=async()=>{if(!(l===null||se===null)){ee(!0),k(""),X("");try{const x=await fetch(`${Mr}/payout-schedules/${se}?user_id=${l}`,{method:"DELETE"});if(!x.ok){let G=`Failed to delete schedule (${x.status})`;try{G=(await x.json()).detail||G}catch{}throw new Error(G)}X("Schedule archived."),ne(null),ue(null),await ut(me),window.setTimeout(()=>X(""),3e3)}catch(x){const G=x instanceof Error?x.message:"Failed to delete schedule";k(G)}finally{ee(!1)}}},Nr=async x=>{if(l!==null){He(!0),k("");try{const G=await fetch(`${Mr}/payout-schedules/${x}/activate?user_id=${l}`,{method:"POST"});if(!G.ok){let A=`Failed to activate schedule (${G.status})`;try{A=(await G.json()).detail||A}catch{}throw new Error(A)}X("Schedule activated."),ue(null),await ut(me),window.setTimeout(()=>X(""),3e3)}catch(G){const A=G instanceof Error?G.message:"Failed to activate schedule";k(A)}finally{He(!1)}}},vl=(x,G)=>{const A=Number(G);Ve(oe=>oe.map((Ce,et)=>et===x?{...Ce,percentage:Number.isFinite(A)?A:0}:Ce))},tr=Array.from(new Set([...Ge,...Pe])),bs=Ge.length>0?Number(er[Ge[0]]??0):0,oa=Pe.filter(x=>!Ge.includes(x)).reduce((x,G)=>{const A=Number(er[G]??0);return x+(Number.isFinite(A)?A:0)},0),Ns=(Ge.length>0?bs:0)+oa,sn=()=>{ct(""),vr(""),Kt(""),W(""),be(""),Ve(x=>x.map(G=>({...G,selected:!0,percentage:100}))),Ct([]),Me([]),Ur({}),At("Job Weighted Payout"),Zt(""),Or(""),U(!1),Re(!1),ye(""),ze(""),Ye(!1),qe(!1),Rt(!1),dt(!1),nt([]),Qt(null),rt({}),yt(null),Wt(""),j(""),K(!1),de(""),Ue(""),y(null)},Bn=async()=>{if(l===null){de("Please log in again to save a schedule.");return}if(!lt.trim()){de("Schedule name is required.");return}if((Dt==="Custom Payout"||Dt==="Job Weighted Payout")&&tr.length>0){if(Ge.length>1){const Ae=Number(er[Ge[0]]??0);if(!Ge.every(wr=>Math.abs(Number(er[wr]??0)-Ae)<.01)){de("All contributors must have the same percentage.");return}}if(Math.abs(Ns-100)>.01){de("Contributor percentage + sum of receiver percentages must total 100%.");return}}fe(!0),de(""),Ue("");const x=Ae=>{const Be=Number(Ae);return Number.isFinite(Be)?Be:null},G=_e.find(Ae=>Ae.name.toLowerCase()==="gratuity")?.percentage,A=_e.find(Ae=>Ae.name.toLowerCase()==="tips")?.percentage,oe={};Object.entries(er).forEach(([Ae,Be])=>{const wr=x(Be);wr!==null&&(oe[Ae]=wr)});const Ce={user_id:l,name:lt.trim(),start_day:ot||null,end_day:Bt||null,start_time:Kr||null,end_time:V||null,payout_triggers:{gratuity:G??null,tips:A??null},payout_rule:Dt,payout_contributors:Ge,payout_receivers:Pe,payout_percentages:oe,custom_individual_payout:x(br),custom_group_contribution:x(Ar),pre_payouts:gt.map(Ae=>({option:Ae.type,value:x(Ae.value),account:Ae.account}))},et=gt.map(Ae=>Ae.account.trim()).filter(Ae=>Ae&&!$e.includes(Ae));if(et.length>0){const Ae=Un(st,et);at(Ae),ys(Ae)}const Ot=Q!==null,rr=Ot?`${Mr}/payout-schedules/${Q}`:`${Mr}/payout-schedules`,Fe=Ot?"PUT":"POST";try{const Ae=await fetch(rr,{method:Fe,headers:{"Content-Type":"application/json"},body:JSON.stringify(Ce)});if(!Ae.ok){let Be=`Failed to save schedule (${Ae.status})`;try{Be=(await Ae.json()).detail||Be}catch{}throw new Error(Be)}Ue(Ot?"Schedule updated successfully.":"Schedule saved successfully."),sn(),m("existing"),await ut(),window.setTimeout(()=>Ue(""),3e3)}catch(Ae){const Be=Ae instanceof Error?Ae.message:"Failed to save schedule";de(Be)}finally{fe(!1)}};return r.jsxs("div",{className:"p-8",children:[C?r.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/40 px-4",children:r.jsxs("div",{className:"w-full max-w-md rounded-xl bg-white p-6 shadow-xl",children:[r.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"Archive schedule?"}),r.jsx("p",{className:"mt-2 text-sm text-gray-600",children:"This action cannot be undone. Are you sure you want to archive this payout schedule?"}),r.jsxs("div",{className:"mt-6 flex items-center justify-end gap-3",children:[r.jsx("button",{type:"button",onClick:()=>O(!1),className:"px-4 py-2 rounded-lg border border-gray-300 text-gray-900 font-semibold hover:bg-gray-100",children:"Cancel"}),r.jsx("button",{type:"button",onClick:async()=>{O(!1),await Gn()},className:"px-4 py-2 rounded-lg bg-[#cab99a] text-black font-semibold hover:bg-[#bfa986]",children:"Yes, archive"})]})]})}):null,i==="existing"?r.jsxs("div",{children:[r.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-4 mb-6",children:[r.jsxs("div",{children:[r.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Shift Payout Schedules"}),r.jsx("p",{className:"text-sm text-gray-500",children:"Create and manage shift payout schedules for your team."})]}),r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsxs("label",{className:"flex items-center gap-2 text-sm font-medium text-gray-700",children:[r.jsx("input",{type:"checkbox",checked:me,onChange:x=>te(x.target.checked),className:"h-4 w-4 rounded border-gray-300 text-gray-900 focus:ring-gray-900"}),"Show Archived Schedules"]}),r.jsx("button",{type:"button",onClick:()=>{sn(),m("create")},className:"bg-[#cab99a] text-black px-6 py-3 rounded-lg font-semibold hover:bg-[#bfa986] transition-all shadow-md",children:"Create Schedule"}),r.jsx("button",{type:"button",onClick:()=>O(!0),disabled:!se||J,className:`px-6 py-3 rounded-lg font-semibold transition-all shadow-md ${se&&!J?"bg-[#cab99a] text-black hover:bg-[#bfa986]":"bg-gray-200 text-gray-500 cursor-not-allowed"}`,children:J?"Archiving...":"Archive"})]})]}),D?r.jsx("p",{className:"text-sm text-red-600 mb-4",children:D}):_?r.jsx("p",{className:"text-sm text-green-600 mb-4",children:_}):null,r.jsx("div",{className:"space-y-4",children:g?r.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 px-6 py-6 text-center text-sm text-gray-600",children:"Loading schedules..."}):w?r.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 px-6 py-6 text-center text-sm text-red-600",children:w}):f.length===0?r.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 px-6 py-6 text-center text-sm text-gray-600",children:"No schedules yet. Create your first payout schedule."}):f.map(x=>{const G=se===x.payout_schedule_id,A=Y===x.payout_schedule_id;return r.jsxs("div",{className:`rounded-xl border shadow-sm transition-colors ${G?"border-gray-900 bg-gray-50":"border-gray-200 bg-white"}`,children:[r.jsxs("div",{className:"flex items-start gap-4 p-5 cursor-pointer",role:"button",tabIndex:0,onClick:()=>vs(x.payout_schedule_id),onKeyDown:oe=>{(oe.key==="Enter"||oe.key===" ")&&(oe.preventDefault(),vs(x.payout_schedule_id))},children:[r.jsx("input",{type:"checkbox",checked:G,onChange:oe=>ne(oe.target.checked?x.payout_schedule_id:null),onClick:oe=>oe.stopPropagation(),className:"mt-1 h-4 w-4 rounded border-gray-300 text-gray-900 focus:ring-gray-900"}),r.jsxs("div",{className:"grid w-full gap-4 sm:grid-cols-2 lg:grid-cols-5",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-xs font-semibold uppercase tracking-wide text-gray-500 mb-2",children:"Name"}),r.jsx("p",{className:"text-sm font-semibold text-gray-900",children:x.name})]}),r.jsxs("div",{children:[r.jsx("p",{className:"text-xs font-semibold uppercase tracking-wide text-gray-500 mb-2",children:"Status"}),x.is_active?r.jsx("span",{className:"inline-block px-3 py-1 bg-green-100 text-green-700 text-sm font-semibold rounded-full",children:"Active"}):r.jsx("span",{className:"inline-block px-3 py-1 bg-red-100 text-red-700 text-sm font-semibold rounded-full",children:"Inactive"})]}),r.jsxs("div",{children:[r.jsx("p",{className:"text-xs font-semibold uppercase tracking-wide text-gray-500 mb-2",children:"Payout Rule"}),r.jsx("p",{className:"text-sm text-gray-700",children:la(x.payout_rule_id)})]}),r.jsxs("div",{children:[r.jsx("p",{className:"text-xs font-semibold uppercase tracking-wide text-gray-500 mb-2",children:"Day"}),r.jsx("p",{className:"text-sm text-gray-700",children:yl(x.start_day,x.end_day)})]}),r.jsxs("div",{children:[r.jsx("p",{className:"text-xs font-semibold uppercase tracking-wide text-gray-500 mb-2",children:"Time"}),r.jsx("p",{className:"text-sm text-gray-700",children:xs(x.start_time,x.end_time)})]})]}),r.jsx("span",{className:"text-lg font-semibold text-gray-400",children:A?"-":"+"})]}),A?r.jsx("div",{className:"border-t border-gray-200 px-5 py-4 space-y-4",children:F[x.payout_schedule_id]?r.jsx("div",{className:"text-center py-8",children:r.jsx("p",{className:"text-sm text-gray-600",children:"Loading schedule details..."})}):T[x.payout_schedule_id]?r.jsxs(r.Fragment,{children:[T[x.payout_schedule_id]?.payout_triggers&&r.jsxs("div",{className:"border-b border-gray-100 pb-4",children:[r.jsx("h4",{className:"font-semibold text-gray-700 mb-3",children:"Payout Triggers"}),r.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[r.jsxs("div",{className:"text-sm",children:[r.jsx("span",{className:"font-medium text-gray-600",children:"Gratuity Contribution:"})," ",r.jsxs("span",{className:"text-gray-900",children:[T[x.payout_schedule_id].payout_triggers.gratuity??"N/A","%"]})]}),r.jsxs("div",{className:"text-sm",children:[r.jsx("span",{className:"font-medium text-gray-600",children:"Tips Contribution:"})," ",r.jsxs("span",{className:"text-gray-900",children:[T[x.payout_schedule_id].payout_triggers.tips??"N/A","%"]})]})]})]}),(()=>{const oe=T[x.payout_schedule_id]?.payout_receivers?.filter(Fe=>Fe.contributor_receiver===0)||[],Ce=new Set(oe.map(Fe=>Fe.payout_receiver_id)),et=T[x.payout_schedule_id]?.payout_receivers?.filter(Fe=>Fe.contributor_receiver===1&&!Ce.has(Fe.payout_receiver_id))||[],Ot=et.reduce((Fe,Ae)=>Fe+(Ae.payout_percentage!==null?Ae.payout_percentage:0),0),rr=100-Ot;return r.jsxs(r.Fragment,{children:[oe.length>0&&r.jsxs("div",{className:"border-b border-gray-100 pb-4",children:[r.jsxs("div",{className:"flex items-center justify-between mb-3",children:[r.jsx("h4",{className:"font-semibold text-gray-700",children:"Contributor(s)"}),r.jsxs("span",{className:"font-semibold text-gray-900",children:[rr,"%"]})]}),r.jsx("div",{className:"flex flex-wrap gap-2",children:oe.map((Fe,Ae)=>r.jsx("span",{className:"px-3 py-1 bg-gray-100 rounded-full text-sm text-gray-700 font-medium",children:Fe.payout_receiver_id},Ae))})]}),et.length>0&&r.jsxs("div",{className:"border-b border-gray-100 pb-4",children:[r.jsxs("div",{className:"flex items-center justify-between mb-3",children:[r.jsx("h4",{className:"font-semibold text-gray-700",children:"Receiver(s)"}),r.jsxs("span",{className:"font-semibold text-gray-900",children:[Ot,"%"]})]}),r.jsx("div",{className:"space-y-2",children:et.map((Fe,Ae)=>r.jsxs("div",{className:"flex justify-between text-sm",children:[r.jsx("span",{className:"text-gray-700",children:Fe.payout_receiver_id}),r.jsx("span",{className:"font-semibold text-gray-900",children:Fe.payout_percentage!==null?`${Fe.payout_percentage}%`:"N/A"})]},Ae))})]})]})})(),T[x.payout_schedule_id]?.pre_payouts&&T[x.payout_schedule_id].pre_payouts.length>0&&r.jsxs("div",{className:"border-b border-gray-100 pb-4",children:[r.jsx("h4",{className:"font-semibold text-gray-700 mb-3",children:"Pre-Payout Entries"}),r.jsx("div",{className:"space-y-2",children:T[x.payout_schedule_id].pre_payouts.map((oe,Ce)=>r.jsxs("div",{className:"flex justify-between text-sm",children:[r.jsx("span",{className:"text-gray-700",children:oe.user_account||"Unknown"}),r.jsx("span",{className:"font-semibold text-gray-900",children:oe.pre_payout_option===1?`$${oe.pre_payout_value}`:`${oe.pre_payout_value}%`})]},Ce))})]}),r.jsx("div",{className:"flex justify-end pt-4",children:x.is_active?r.jsx("button",{type:"button",onClick:()=>xl(x.payout_schedule_id),className:"bg-[#cab99a] text-black px-6 py-2 rounded-lg text-sm font-semibold hover:bg-[#bfa986] transition-all",children:"Edit Schedule"}):r.jsx("button",{type:"button",onClick:()=>Nr(x.payout_schedule_id),disabled:ge,className:"bg-[#cab99a] text-black px-6 py-2 rounded-lg text-sm font-semibold hover:bg-[#bfa986] transition-all disabled:opacity-50 disabled:cursor-not-allowed",children:ge?"Activating...":"Activate this Payout"})})]}):r.jsx("div",{className:"text-center py-8",children:r.jsx("p",{className:"text-sm text-red-600",children:"Failed to load schedule details"})})}):null]},x.payout_schedule_id)})})]}):r.jsxs("div",{className:"max-w-5xl mx-auto",children:[r.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-8",children:Q?"Edit Payout Schedule":"Create Payout Schedule"}),P?r.jsx("p",{className:"text-sm text-red-600 mb-6",children:P}):z?r.jsx("p",{className:"text-sm text-gray-600 mb-6",children:"Loading schedule..."}):null,r.jsxs("div",{className:"space-y-8",children:[r.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6",children:[r.jsx("h2",{className:"text-xl font-bold text-gray-900 mb-4",children:"Schedule"}),r.jsxs("div",{className:"mb-4",children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Payout Schedule Name"}),r.jsx("input",{type:"text",value:lt,onChange:x=>ct(x.target.value),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-gray-900 focus:border-transparent outline-none",placeholder:"Schedule Name"})]}),r.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Start Day"}),r.jsxs("div",{className:"relative","data-start-day-dropdown":"true",children:[r.jsxs("button",{type:"button",onClick:()=>Ye(x=>!x),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-gray-900 outline-none bg-white text-left flex items-center justify-between gap-3",children:[r.jsx("span",{className:ot?"text-gray-900":"text-gray-500",children:ot||"Select day"}),r.jsx("span",{className:"text-gray-500",children:""})]}),Ke?r.jsx("div",{className:"absolute z-10 mt-2 w-full max-h-60 overflow-auto border border-gray-200 rounded-lg bg-white shadow-lg",children:De.map(x=>r.jsx("button",{type:"button",onClick:()=>{vr(x),Ye(!1)},className:"w-full px-4 py-2 text-left text-sm text-gray-900 hover:bg-gray-50",children:x},`start-day-${x}`))}):null]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"End Day"}),r.jsxs("div",{className:"relative","data-end-day-dropdown":"true",children:[r.jsxs("button",{type:"button",onClick:()=>qe(x=>!x),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-gray-900 outline-none bg-white text-left flex items-center justify-between gap-3",children:[r.jsx("span",{className:Bt?"text-gray-900":"text-gray-500",children:Bt||"Select day"}),r.jsx("span",{className:"text-gray-500",children:""})]}),Qe?r.jsx("div",{className:"absolute z-10 mt-2 w-full max-h-60 overflow-auto border border-gray-200 rounded-lg bg-white shadow-lg",children:De.map(x=>r.jsx("button",{type:"button",onClick:()=>{Kt(x),qe(!1)},className:"w-full px-4 py-2 text-left text-sm text-gray-900 hover:bg-gray-50",children:x},`end-day-${x}`))}):null]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Start Time"}),r.jsxs("div",{className:"relative","data-start-time-dropdown":"true",children:[r.jsxs("button",{type:"button",onClick:()=>Rt(x=>!x),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-gray-900 outline-none bg-white text-left flex items-center justify-between gap-3",children:[r.jsx("span",{className:Kr?"text-gray-900":"text-gray-500",children:Kr?Se(Kr):"Select time"}),r.jsx("span",{className:"text-gray-500",children:""})]}),Nt?r.jsx("div",{className:"absolute z-10 mt-2 w-full max-h-60 overflow-auto border border-gray-200 rounded-lg bg-white shadow-lg",children:bt.map(x=>r.jsx("button",{type:"button",onClick:()=>{W(x),Rt(!1)},className:"w-full px-4 py-2 text-left text-sm text-gray-900 hover:bg-gray-50",children:Se(x)},`start-time-${x}`))}):null]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"End Time"}),r.jsxs("div",{className:"relative","data-end-time-dropdown":"true",children:[r.jsxs("button",{type:"button",onClick:()=>dt(x=>!x),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-gray-900 outline-none bg-white text-left flex items-center justify-between gap-3",children:[r.jsx("span",{className:V?"text-gray-900":"text-gray-500",children:V?Se(V):"Select time"}),r.jsx("span",{className:"text-gray-500",children:""})]}),Tt?r.jsx("div",{className:"absolute z-10 mt-2 w-full max-h-60 overflow-auto border border-gray-200 rounded-lg bg-white shadow-lg",children:bt.map(x=>r.jsx("button",{type:"button",onClick:()=>{be(x),dt(!1)},className:"w-full px-4 py-2 text-left text-sm text-gray-900 hover:bg-gray-50",children:Se(x)},`end-time-${x}`))}):null]})]})]})]}),r.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6",children:[r.jsx("h3",{className:"text-xl font-bold text-gray-900 mb-4",children:"Payout"}),r.jsx("p",{className:"text-sm font-medium text-gray-700 mb-3",children:"Payout Triggers"}),r.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3 mb-6",children:_e.map((x,G)=>r.jsxs("div",{className:"flex items-center justify-between gap-3 rounded-lg border-2 border-gray-300 bg-white px-4 py-3 font-semibold text-gray-900",children:[r.jsx("span",{className:"flex items-center gap-3",children:x.name}),r.jsxs("span",{className:"flex items-center gap-2",children:[r.jsx("input",{type:"number",min:"0",max:"100",step:"1",value:x.percentage,onChange:A=>vl(G,A.target.value),className:"w-20 px-3 py-1 border border-gray-300 rounded-lg focus:ring-2 focus:ring-gray-900 outline-none text-right"}),r.jsx("span",{className:"text-sm text-gray-700",children:"%"})]})]},`payout-trigger-${x.name}`))}),r.jsx("p",{className:"text-sm font-medium text-gray-700 mb-4",children:"Select Payout Contributors"}),r.jsxs("div",{className:"relative mb-6","data-payout-dropdown":"true",children:[r.jsxs("button",{type:"button",onClick:()=>U(x=>!x),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-gray-900 outline-none bg-white text-left flex items-center justify-between gap-3",children:[r.jsx("span",{className:"flex flex-wrap gap-2 min-w-0 text-gray-900",children:Ge.length>0?Ge.map(x=>r.jsxs("span",{className:"bg-gray-100 px-2 py-1 rounded-full text-sm flex items-center gap-2 max-w-full",children:[r.jsx("span",{className:"truncate",children:x}),r.jsx("button",{type:"button",onClick:G=>{G.stopPropagation(),Ct(A=>A.filter(oe=>oe!==x))},className:"text-gray-500 hover:text-gray-700","aria-label":`Remove ${x}`,children:""})]},x)):r.jsx("span",{className:"text-gray-500",children:"Select Contributors"})}),r.jsx("span",{className:"ml-2 text-gray-500",children:""})]}),St?r.jsxs("div",{className:"absolute z-10 mt-2 w-full max-h-60 overflow-auto border border-gray-200 rounded-lg bg-white shadow-lg",children:[r.jsx("div",{className:"px-3 py-2 border-b border-gray-200",children:r.jsxs("div",{className:"relative",children:[r.jsx("input",{type:"text",value:H,onChange:x=>ye(x.target.value),placeholder:"Search contributors",className:"w-full px-3 py-2 pr-9 border border-gray-300 rounded-lg text-sm focus:ring-2 focus:ring-gray-900 outline-none"}),H?r.jsx("button",{type:"button",onClick:()=>ye(""),className:"absolute right-2 top-1/2 -translate-y-1/2 text-gray-400 hover:text-gray-600","aria-label":"Clear contributor search",children:""}):null]})}),$e.length===0?r.jsx("div",{className:"px-4 py-3 text-sm text-gray-500",children:"No job titles available"}):$e.filter(x=>x.toLowerCase().includes(H.trim().toLowerCase())).length===0?r.jsx("div",{className:"px-4 py-3 text-sm text-gray-500",children:"No matches found"}):$e.filter(x=>x.toLowerCase().includes(H.trim().toLowerCase())).map(x=>{const G=Ge.includes(x);return r.jsxs("label",{className:"flex items-center gap-2 px-4 py-2 text-sm text-gray-900 hover:bg-gray-50",children:[r.jsx("input",{type:"checkbox",checked:G,onChange:A=>{Ct(oe=>A.target.checked?oe.includes(x)?oe:[...oe,x]:oe.filter(Ce=>Ce!==x))},className:"h-4 w-4"}),r.jsx("span",{children:x})]},x)})]}):null]}),B?r.jsx("p",{className:"text-sm text-red-600 mb-6",children:B}):null,r.jsx("p",{className:"text-sm font-medium text-gray-700 mb-4",children:"Select Payout Receivers"}),r.jsxs("div",{className:"relative mb-6","data-receiver-dropdown":"true",children:[r.jsxs("button",{type:"button",onClick:()=>Re(x=>!x),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-gray-900 outline-none bg-white text-left flex items-center justify-between gap-3",children:[r.jsx("span",{className:"flex flex-wrap gap-2 min-w-0 text-gray-900",children:Pe.length>0?Pe.map(x=>r.jsxs("span",{className:"bg-gray-100 px-2 py-1 rounded-full text-sm flex items-center gap-2 max-w-full",children:[r.jsx("span",{className:"truncate",children:x}),r.jsx("button",{type:"button",onClick:G=>{G.stopPropagation(),Me(A=>A.filter(oe=>oe!==x))},className:"text-gray-500 hover:text-gray-700","aria-label":`Remove ${x}`,children:""})]},`payout-receiver-${x}`)):r.jsx("span",{className:"text-gray-500",children:"Select Receivers"})}),r.jsx("span",{className:"ml-2 text-gray-500",children:""})]}),it?r.jsxs("div",{className:"absolute z-10 mt-2 w-full max-h-60 overflow-auto border border-gray-200 rounded-lg bg-white shadow-lg",children:[r.jsx("div",{className:"px-3 py-2 border-b border-gray-200",children:r.jsxs("div",{className:"relative",children:[r.jsx("input",{type:"text",value:le,onChange:x=>ze(x.target.value),placeholder:"Search receivers",className:"w-full px-3 py-2 pr-9 border border-gray-300 rounded-lg text-sm focus:ring-2 focus:ring-gray-900 outline-none"}),le?r.jsx("button",{type:"button",onClick:()=>ze(""),className:"absolute right-2 top-1/2 -translate-y-1/2 text-gray-400 hover:text-gray-600","aria-label":"Clear receiver search",children:""}):null]})}),$e.length===0?r.jsx("div",{className:"px-4 py-3 text-sm text-gray-500",children:"No job titles available"}):$e.filter(x=>x.toLowerCase().includes(le.trim().toLowerCase())).length===0?r.jsx("div",{className:"px-4 py-3 text-sm text-gray-500",children:"No matches found"}):$e.filter(x=>x.toLowerCase().includes(le.trim().toLowerCase())).map(x=>{const G=Pe.includes(x);return r.jsxs("label",{className:"flex items-center gap-2 px-4 py-2 text-sm text-gray-900 hover:bg-gray-50",children:[r.jsx("input",{type:"checkbox",checked:G,onChange:A=>{Me(oe=>A.target.checked?oe.includes(x)?oe:[...oe,x]:oe.filter(Ce=>Ce!==x))},className:"h-4 w-4"}),r.jsx("span",{children:x})]},`payout-receiver-option-${x}`)})]}):null]}),B?r.jsx("p",{className:"text-sm text-red-600 mb-6",children:B}):null,r.jsx("p",{className:"text-sm font-medium text-gray-700 mb-4",children:"Payout Rule"}),r.jsx("div",{className:"flex flex-wrap gap-4 mb-6",children:["Custom Payout","Equal Payout","Hour Based Payout","Job Weighted Payout"].map(x=>r.jsxs("label",{className:"flex items-center gap-2 text-sm text-gray-900",children:[r.jsx("input",{type:"radio",name:"payout-rule",checked:Dt===x,onChange:()=>At(x),className:"h-4 w-4"}),r.jsx("span",{children:x})]},x))}),Dt==="Custom Payout"?r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3 mb-6",children:[r.jsxs("div",{className:"flex items-center justify-between gap-3 rounded-lg border-2 border-gray-300 bg-white px-4 py-3 font-semibold text-gray-900",children:[r.jsx("span",{children:"Individual Payout"}),r.jsxs("span",{className:"flex items-center gap-2",children:[r.jsx("input",{type:"number",min:"0",max:"100",step:"0.01",value:br,onChange:x=>Zt(x.target.value),className:"w-20 px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-gray-900 outline-none text-right"}),r.jsx("span",{className:"text-sm text-gray-700",children:"%"})]})]}),r.jsxs("div",{className:"flex items-center justify-between gap-3 rounded-lg border-2 border-gray-300 bg-white px-4 py-3 font-semibold text-gray-900",children:[r.jsx("span",{children:"Group Contribution"}),r.jsxs("span",{className:"flex items-center gap-2",children:[r.jsx("input",{type:"number",min:"0",max:"100",step:"0.01",value:Ar,onChange:x=>Or(x.target.value),className:"w-20 px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-gray-900 outline-none text-right"}),r.jsx("span",{className:"text-sm text-gray-700",children:"%"})]})]})]}):null,Dt==="Equal Payout"?r.jsx("div",{className:"mt-6",children:r.jsx("p",{className:"font-semibold text-red-600",children:"All employees will receive an equal payout"})}):Dt==="Hour Based Payout"?r.jsx("div",{className:"mt-6",children:r.jsx("p",{className:"font-semibold text-red-600",children:"All employees will receive a payout based on hours worked"})}):Dt==="Custom Payout"||Dt==="Job Weighted Payout"?r.jsxs("div",{className:"mt-6",children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-3",children:"Payout Percentages"}),tr.length===0?r.jsx("p",{className:"text-sm text-gray-600",children:"Select payout contributors or receivers to set percentages."}):r.jsxs("div",{className:"space-y-3",children:[tr.map(x=>{const G=Ge.includes(x),A=Pe.includes(x),oe=G?bs:er[x]??"";return r.jsxs("div",{className:"flex items-center justify-between gap-3 rounded-lg border-2 border-gray-300 bg-white px-4 py-3 font-semibold text-gray-900",children:[r.jsxs("span",{children:[x,G&&r.jsx("span",{className:"text-xs ml-2 px-3 py-1 rounded-full text-gray-700",style:{backgroundColor:"#e6d7b8"},children:"Contributor"}),A&&r.jsx("span",{className:"text-xs ml-2 px-3 py-1 rounded-full text-gray-700",style:{backgroundColor:"#e6d7b8"},children:"Receiver"})]}),r.jsxs("span",{className:"flex items-center gap-2",children:[r.jsx("input",{type:"number",min:"0",max:"100",step:"0.01",value:oe,onChange:Ce=>{if(G){const et=Ce.target.value;Ur(Ot=>{const rr={...Ot};return Ge.forEach(Fe=>{rr[Fe]=et}),rr})}else Ur(et=>({...et,[x]:Ce.target.value}))},className:"w-20 px-3 py-1 border border-gray-300 rounded-lg focus:ring-2 focus:ring-gray-900 outline-none text-right"}),r.jsx("span",{className:"text-sm text-gray-700",children:"%"})]})]},`receiver-percent-${x}`)}),r.jsxs("div",{className:"space-y-2 text-sm text-gray-700 mt-4 pt-4 border-t border-gray-200",children:[Ge.length>0&&r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{children:"Contributors:"}),r.jsxs("span",{className:"font-semibold",children:[bs.toFixed(2),"%"]})]}),Pe.length>0&&r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{children:"Receivers:"}),r.jsxs("span",{className:"font-semibold",children:[oa.toFixed(2),"%"]})]}),r.jsxs("div",{className:"flex justify-between font-bold text-gray-900",children:[r.jsx("span",{children:"Total:"}),r.jsxs("span",{children:[Ns.toFixed(2),"%"]})]})]}),Math.abs(Ns-100)>.01&&r.jsx("div",{className:"text-sm text-red-600 mt-2",children:"Total must equal 100%. (Contributors + Receivers = 100%)"}),Ge.length>1&&(()=>{const x=Number(er[Ge[0]]??0);return Ge.every(A=>Math.abs(Number(er[A]??0)-x)<.01)?null:r.jsx("div",{className:"text-sm text-red-600 mt-2",children:"All contributors must have the same percentage."})})()]})]}):null]}),r.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6",children:[r.jsxs("div",{className:"flex items-start justify-between gap-4 mb-2",children:[r.jsx("h2",{className:"text-xl font-bold text-gray-900",children:"Pre-Payout"}),r.jsx("button",{type:"button",onClick:()=>nt(x=>[...x,{type:"",value:"",account:""}]),className:"bg-[#cab99a] text-black px-6 py-2 rounded-lg font-semibold hover:bg-[#bfa986] transition-all shadow-lg",children:"Add"})]}),r.jsx("p",{className:"text-sm text-gray-600 mb-4",children:"Any amount that must be allocated to an account before Payout?"}),r.jsx("div",{className:"space-y-6",children:gt.map((x,G)=>r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{className:"flex items-start justify-between gap-4",children:[r.jsx("div",{className:"flex flex-wrap gap-4",children:["Percentage","Fixed Amount"].map(A=>r.jsxs("label",{className:"flex items-center gap-2 text-sm text-gray-900",children:[r.jsx("input",{type:"radio",name:`pre-payout-type-${G}`,checked:x.type===A,onChange:()=>nt(oe=>oe.map((Ce,et)=>et===G?{...Ce,type:A,value:""}:Ce)),className:"h-4 w-4"}),r.jsx("span",{children:A})]},A))}),r.jsx("button",{type:"button",onClick:()=>nt(A=>A.filter((oe,Ce)=>Ce!==G)),className:"bg-[#cab99a] text-black px-4 py-2 rounded-lg font-semibold hover:bg-[#bfa986] transition-all shadow-lg",children:"Delete"})]}),x.type?r.jsxs("div",{className:"flex items-center justify-between gap-3 rounded-lg border-2 border-gray-300 bg-white px-4 py-3 font-semibold text-gray-900",children:[r.jsxs("span",{children:["Set your ",x.type]}),r.jsxs("span",{className:"flex items-center gap-2",children:[r.jsx("input",{type:"number",min:"0",step:"0.01",value:x.value,onChange:A=>nt(oe=>oe.map((Ce,et)=>et===G?{...Ce,value:A.target.value}:Ce)),onBlur:()=>{x.type==="Fixed Amount"&&nt(A=>A.map((oe,Ce)=>Ce===G?{...oe,value:ft(oe.value)}:oe))},className:"w-20 px-3 py-1 border border-gray-300 rounded-lg focus:ring-2 focus:ring-gray-900 outline-none text-right"}),r.jsx("span",{className:"text-sm text-gray-700",children:x.type==="Percentage"?"%":"$"})]})]}):null,r.jsxs("div",{children:[r.jsx("p",{className:"text-sm font-medium text-gray-700 mb-4",children:"Select Account for this Pre-Payout"}),r.jsxs("div",{className:"relative","data-pre-payout-dropdown":"true",children:[r.jsxs("button",{type:"button",onClick:()=>Qt(A=>A===G?null:G),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-gray-900 outline-none bg-white text-left flex items-center justify-between gap-3",children:[r.jsx("span",{className:"flex flex-wrap gap-2 min-w-0 text-gray-900",children:x.account?r.jsxs("span",{className:"bg-gray-100 px-2 py-1 rounded-full text-sm flex items-center gap-2 max-w-full",children:[r.jsx("span",{className:"truncate",children:x.account}),r.jsx("button",{type:"button",onClick:A=>{A.stopPropagation(),nt(oe=>oe.map((Ce,et)=>et===G?{...Ce,account:""}:Ce))},className:"text-gray-500 hover:text-gray-700","aria-label":`Remove ${x.account}`,children:""})]}):r.jsx("span",{className:"text-gray-500",children:"Select Account"})}),r.jsx("span",{className:"ml-2 text-gray-500",children:""})]}),Lt===G?r.jsxs("div",{className:"absolute z-10 mt-2 w-full max-h-60 overflow-auto border border-gray-200 rounded-lg bg-white shadow-lg",children:[r.jsx("div",{className:"px-3 py-2 border-b border-gray-200",children:r.jsx("input",{type:"text",value:he[G]??"",onChange:A=>rt(oe=>({...oe,[G]:A.target.value})),placeholder:"Search accounts",className:"w-full px-3 py-2 border border-gray-300 rounded-lg text-sm focus:ring-2 focus:ring-gray-900 outline-none"})}),[...$e,...st].filter(A=>!Ge.includes(A)&&!Pe.includes(A)).length===0?r.jsx("div",{className:"px-4 py-3 text-sm text-gray-500",children:"No accounts available"}):[...$e,...st].filter(A=>!Ge.includes(A)&&!Pe.includes(A)&&!gt.some((oe,Ce)=>Ce!==G&&oe.account===A)).filter(A=>A.toLowerCase().includes((he[G]??"").trim().toLowerCase())).length===0?r.jsx("div",{className:"px-4 py-3 text-sm text-gray-500",children:"No matches found"}):[...$e,...st].filter(A=>!Ge.includes(A)&&!Pe.includes(A)&&!gt.some((oe,Ce)=>Ce!==G&&oe.account===A)).filter(A=>A.toLowerCase().includes((he[G]??"").trim().toLowerCase())).map(A=>r.jsx("button",{type:"button",onClick:()=>{nt(oe=>oe.map((Ce,et)=>et===G?{...Ce,account:A}:Ce)),Qt(null)},className:"w-full px-4 py-2 text-left text-sm text-gray-900 hover:bg-gray-50",children:A},`pre-payout-account-${G}-${A}`)),Pt===G?r.jsxs("div",{className:"px-4 py-3 border-t border-gray-200 space-y-2",children:[r.jsx("input",{type:"text",value:$t,onChange:A=>Wt(A.target.value),placeholder:"Account name",className:"w-full px-3 py-2 border border-gray-300 rounded-lg text-sm focus:ring-2 focus:ring-gray-900 outline-none"}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("button",{type:"button",onClick:()=>{const A=$t.trim();A&&(at(oe=>{const Ce=Un(oe,[A]);return ys(Ce),Ce}),nt(oe=>oe.map((Ce,et)=>et===G?{...Ce,account:A}:Ce)),Qt(null),yt(null),Wt(""))},className:"bg-[#cab99a] text-black px-3 py-2 rounded-lg font-semibold hover:bg-[#bfa986] transition-all shadow-lg text-sm",children:"Save"}),r.jsx("button",{type:"button",onClick:()=>{yt(null),Wt("")},className:"border border-gray-300 text-gray-900 px-3 py-2 rounded-lg font-semibold hover:bg-gray-100 transition-all text-sm",children:"Cancel"})]})]}):(he[G]??"").trim()?[...$e,...st].some(A=>A.toLowerCase()===(he[G]??"").trim().toLowerCase())?null:r.jsx("button",{type:"button",onClick:()=>{yt(G),Wt((he[G]??"").trim())},className:"w-full px-4 py-2 text-left text-sm text-gray-900 hover:bg-gray-50",children:"Create New Account"}):null]}):null]})]})]},`pre-payout-entry-${G}`))})]}),r.jsxs("div",{className:"flex items-center justify-between",children:[xe?r.jsx("p",{className:"text-sm text-red-600",children:xe}):ke?r.jsx("p",{className:"text-sm text-green-700",children:ke}):r.jsx("span",{}),r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("button",{type:"button",onClick:()=>{sn(),de(""),Ue(""),m("existing")},className:"border border-gray-300 text-gray-900 px-6 py-3 rounded-lg font-semibold hover:bg-gray-100 transition-all shadow-lg",children:"Cancel"}),r.jsx("button",{type:"button",onClick:Bn,disabled:E,className:"bg-[#cab99a] text-black px-8 py-3 rounded-lg font-semibold hover:bg-[#bfa986] transition-all shadow-lg disabled:opacity-60 disabled:cursor-not-allowed",children:E?Q?"Updating...":"Saving...":Q?"Update Schedule":"Save Schedule"})]})]})]})]})]})};async function Yh(l){try{return await We.get(`/user-profile/${l}`)}catch(u){return console.warn("Failed to load user profile:",u),null}}async function Xh(l,u){return We.put(`/user-profile/${l}`,u)}async function qh(l,u,i){return We.post(`/api/restaurants/${l}/moov/onboarding-link`,{returnUrl:u,refreshUrl:i})}async function Wd(l,u,i){return We.post(`/api/employees/${l}/moov/onboarding-link`,{returnUrl:u,refreshUrl:i})}async function Zh(l){return We.get(`/api/restaurants/${l}/moov/connection`)}async function eg(l){return We.get(`/api/employees/${l}/moov/connection`)}async function tg(l){return We.get(`/api/employees/${l}/moov/payment-methods`)}async function rg(l){return We.post(`/api/employees/${l}/moov/payment-methods/refresh`,{})}async function ng(l,u){return We.post(`/api/employees/${l}/moov/payment-methods/preferred`,{paymentMethodId:u})}const kn=l=>{const u=l.trim();return u.length>0?u:"N/A"},id=()=>{const u=(localStorage.getItem("userName")||"").split(" ").filter(Boolean),i=u[0]??"",m=u.slice(1).join(" ");return{firstName:i,lastName:m,email:"",phoneNumber:"",restaurant:localStorage.getItem("restaurantName")||""}},sg=()=>{const l=Hr(),{restaurantKey:u,employeeId:i}=Cn(),[m,f]=c.useState(!1),[p,g]=c.useState(()=>id()),[b,w]=c.useState(()=>id()),[R,P]=c.useState(!0),[j,z]=c.useState(()=>Rr(localStorage.getItem("userId"))),K=dr(),[J,ee]=c.useState(Md),[D,k]=c.useState(!1),[_,X]=c.useState(""),[se,ne]=c.useState(!1),[Y,ue]=c.useState([]),[C,O]=c.useState(!1),[E,fe]=c.useState(""),[xe,de]=c.useState(!1),[ke,Ue]=c.useState(!1),$e=localStorage.getItem("userId"),Ee=$e&&Number.isFinite(Number($e))?Number($e):null,B=[p.firstName,p.lastName].map(L=>L.trim()).filter(Boolean).map(L=>L[0]?.toUpperCase()).slice(0,2).join("")||"U";c.useEffect(()=>{let L=!0;if(!Ee){P(!1);return}return Yh(Ee).then(F=>{if(!L||!F)return;const ce={firstName:F.firstName??"",lastName:F.lastName??"",email:F.email??"",phoneNumber:F.phoneNumber??"",restaurant:F.restaurantName??localStorage.getItem("restaurantName")??""};g(ce),w(ce)}).finally(()=>{L&&P(!1)}),()=>{L=!1}},[Ee]),c.useEffect(()=>{if(!K.hash)return;const L=K.hash.replace("#","");if(!L)return;const F=()=>{const me=document.getElementById(L);me&&me.scrollIntoView({behavior:"smooth",block:"start"})},ce=window.setTimeout(F,150);return()=>window.clearTimeout(ce)},[K.hash]),c.useEffect(()=>{const L=localStorage.getItem("userId");z(Rr(L))},[]),c.useEffect(()=>{let L=!0;return Fd().then(F=>{L&&F.length&&ee(F)}).catch(()=>{}),()=>{L=!1}},[]),c.useEffect(()=>{if(!Ee)return;(async()=>{try{O(!0),fe("");const F=await tg(Ee);ue(Array.isArray(F)?F:F?.methods||[])}catch(F){fe(F instanceof Error?F.message:"Failed to load payment methods")}finally{O(!1)}})()},[Ee]);const ae=()=>{f(!0),w(p)},Q=()=>{f(!1),w(p)},y=async()=>{const L=localStorage.getItem("userId");if(!L){X("Unable to update profile. Please log in again.");return}const F=Number(L);if(!Number.isFinite(F)){X("Unable to update profile. Please log in again.");return}ne(!0),X("");try{const ce=await Xh(F,{firstName:b.firstName,lastName:b.lastName,email:b.email,phoneNumber:b.phoneNumber}),me={firstName:ce.firstName??"",lastName:ce.lastName??"",email:ce.email??"",phoneNumber:ce.phoneNumber??"",restaurant:ce.restaurantName??p.restaurant};g(me),w(me);const te=`${me.firstName} ${me.lastName}`.trim();te&&localStorage.setItem("userName",te),ce.email&&localStorage.setItem("rememberedEmail",ce.email),f(!1),k(!0)}catch(ce){const me=ce instanceof Error?ce.message:"Failed to update profile.";X(me)}finally{ne(!1)}},M=async()=>{if(Ee)try{de(!0),fe("");const L=`${window.location.origin}/gratly-profile`,ce=await Wd(Ee,L,L);ce.redirectUrl&&(window.location.href=ce.redirectUrl)}catch(L){fe(L instanceof Error?L.message:"Failed to start onboarding")}finally{de(!1)}},Ie=async()=>{if(Ee)try{Ue(!0),fe("");const L=await rg(Ee);ue(L?.methods||L||[])}catch(L){fe(L instanceof Error?L.message:"Failed to refresh payment methods")}finally{Ue(!1)}},T=async L=>{if(Ee)try{fe(""),await ng(Ee,L),ue(F=>F.map(ce=>({...ce,isPreferred:ce.moovPaymentMethodId===L})))}catch(F){fe(F instanceof Error?F.message:"Failed to update preferred method")}};return c.useEffect(()=>{if(!D)return;const L=window.setTimeout(()=>{k(!1),l(u?`/business/${u}/home`:i?`/employees/${i}/home`:"/login")},1500);return()=>window.clearTimeout(L)},[i,l,u,D]),r.jsx("div",{className:"min-h-screen w-full",style:{backgroundColor:"#f4f2ee"},children:r.jsxs("div",{className:"max-w-4xl mx-auto p-8",children:[D?r.jsx("div",{className:"mb-4 rounded-lg border border-emerald-200 bg-emerald-50 px-4 py-3 text-sm font-semibold text-emerald-700",children:"Profile updated successfully!"}):null,_?r.jsx("div",{className:"mb-4 rounded-lg border border-rose-200 bg-rose-50 px-4 py-3 text-sm font-semibold text-rose-700",children:_}):null,r.jsxs("div",{className:"mb-6",children:[r.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Profile Settings"}),r.jsx("p",{className:"text-gray-600 mt-2",children:"Manage your account information and permissions"})]}),R?r.jsx("div",{className:"bg-white rounded-xl shadow-md border border-gray-200 p-8 text-gray-600",children:"Loading profile..."}):r.jsxs("div",{className:"bg-white rounded-xl shadow-md border border-gray-200 overflow-hidden",children:[r.jsxs("div",{className:"px-8 py-12 text-center",style:{backgroundColor:"#cab99a"},children:[r.jsx("div",{className:"w-24 h-24 bg-white rounded-full mx-auto flex items-center justify-center mb-4 shadow-lg",children:r.jsx("span",{className:"text-4xl font-bold text-gray-900",children:B})}),r.jsxs("h2",{className:"text-2xl font-bold text-black",children:[kn(p.firstName)," ",kn(p.lastName)]}),r.jsx("p",{className:"text-black mt-1",children:kn(p.restaurant)})]}),r.jsxs("div",{className:"p-8",children:[r.jsxs("div",{className:"flex justify-between items-center mb-6",children:[r.jsx("h3",{className:"text-xl font-bold text-gray-900",children:"Personal Information"}),m?r.jsxs("div",{className:"flex gap-3",children:[r.jsx("button",{onClick:Q,className:"bg-white text-gray-900 px-6 py-2 rounded-lg font-semibold border-2 border-gray-300 hover:bg-gray-50 transition-all",children:"Cancel"}),r.jsx("button",{onClick:y,disabled:se,className:"bg-[#cab99a] text-black px-6 py-2 rounded-lg font-semibold hover:bg-[#bfa986] transition-all shadow-md",children:se?"Saving...":"Save Changes"})]}):r.jsx("button",{onClick:ae,className:"bg-[#cab99a] text-black px-6 py-2 rounded-lg font-semibold hover:bg-[#bfa986] transition-all shadow-md",children:"Edit Profile"})]}),r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"First Name"}),m?r.jsx("input",{type:"text",value:b.firstName,onChange:L=>w({...b,firstName:L.target.value}),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-gray-900 focus:border-transparent outline-none transition-all"}):r.jsx("div",{className:"px-4 py-3 bg-gray-50 rounded-lg text-gray-900",children:kn(p.firstName)})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Last Name"}),m?r.jsx("input",{type:"text",value:b.lastName,onChange:L=>w({...b,lastName:L.target.value}),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-gray-900 focus:border-transparent outline-none transition-all"}):r.jsx("div",{className:"px-4 py-3 bg-gray-50 rounded-lg text-gray-900",children:kn(p.lastName)})]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Email Address"}),m?r.jsx("input",{type:"email",value:b.email,onChange:L=>w({...b,email:L.target.value}),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-gray-900 focus:border-transparent outline-none transition-all"}):r.jsx("div",{className:"px-4 py-3 bg-gray-50 rounded-lg text-gray-900",children:kn(p.email)})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Phone Number"}),m?r.jsx("input",{type:"tel",value:b.phoneNumber,onChange:L=>w({...b,phoneNumber:L.target.value}),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-gray-900 focus:border-transparent outline-none transition-all"}):r.jsx("div",{className:"px-4 py-3 bg-gray-50 rounded-lg text-gray-900",children:kn(p.phoneNumber)})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Restaurant"}),r.jsx("div",{className:"px-4 py-3 bg-gray-50 rounded-lg text-gray-900",children:kn(p.restaurant)})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-3",children:"Permissions"}),r.jsxs("div",{className:"bg-gray-50 rounded-lg p-4 border border-gray-200",children:[r.jsx("div",{className:"grid grid-cols-2 gap-3",children:J.map(L=>r.jsxs("label",{className:`flex items-center gap-3 p-3 rounded-lg transition-all cursor-default ${j[L.key]?"bg-white border-2 border-gray-900":"bg-gray-100 border-2 border-transparent"}`,children:[r.jsx("input",{type:"checkbox",checked:j[L.key],readOnly:!0,disabled:!0,className:"w-5 h-5 rounded"}),r.jsx("span",{className:`text-sm font-medium ${j[L.key]?"text-gray-900":"text-gray-600"}`,children:L.label})]},L.key))}),r.jsx("p",{className:"mt-3 text-xs font-medium text-gray-500",children:"Permissions are managed by your admin or owner."})]})]})]})]})]}),r.jsxs("div",{className:"bg-white rounded-xl shadow-md border border-gray-200 p-6 mt-6",children:[r.jsxs("div",{className:"flex items-center justify-between mb-4",children:[r.jsx("h3",{className:"text-lg font-bold text-gray-900",children:"Payment Methods"}),r.jsx("button",{type:"button",onClick:Ie,disabled:ke,className:"text-xs font-semibold text-gray-900 hover:text-gray-700 disabled:text-gray-400 disabled:cursor-not-allowed",children:ke?"Refreshing...":"Refresh"})]}),E&&r.jsx("div",{className:"mb-4 rounded-lg border border-red-200 bg-red-50 px-4 py-3",children:r.jsx("p",{className:"text-sm font-semibold text-red-700",children:E})}),C?r.jsx("p",{className:"text-gray-600",children:"Loading payment methods..."}):r.jsxs(r.Fragment,{children:[Y.length>0?r.jsx("div",{className:"space-y-2 mb-4",children:Y.map(L=>r.jsxs("div",{className:"flex items-center justify-between rounded-lg bg-gray-50 px-4 py-3",children:[r.jsxs("div",{className:"flex-1",children:[r.jsxs("p",{className:"font-semibold text-gray-900",children:[L.brand||L.methodType,L.last4&&` ${L.last4}`]}),r.jsxs("p",{className:"text-xs text-gray-500",children:[L.isVerified?" Verified":"Not verified","  ",L.status]})]}),r.jsxs("div",{className:"flex items-center gap-3",children:[L.isPreferred&&r.jsx("span",{className:"rounded-full bg-blue-100 px-2 py-1 text-[10px] font-semibold text-blue-700",children:"Preferred"}),!L.isPreferred&&r.jsx("button",{type:"button",onClick:()=>T(L.moovPaymentMethodId),className:"text-[10px] font-semibold text-gray-900 hover:text-gray-700",children:"Set preferred"})]})]},L.moovPaymentMethodId))}):r.jsx("p",{className:"text-sm text-gray-500 mb-4",children:"No payment methods on file"}),r.jsx("button",{type:"button",onClick:M,disabled:xe,className:"w-full rounded-lg bg-gray-900 px-4 py-2 text-sm font-semibold text-white hover:bg-gray-800 disabled:cursor-not-allowed disabled:bg-gray-400",children:xe?"Opening...":"Add or Update Payment Method"})]})]}),r.jsxs("div",{className:"bg-white rounded-xl shadow-md border border-gray-200 p-6 mt-6",children:[r.jsx("h3",{className:"text-lg font-bold text-gray-900 mb-4",children:"Account Security"}),r.jsxs("div",{className:"space-y-3",children:[r.jsxs("button",{className:"w-full text-left px-4 py-3 bg-gray-50 rounded-lg hover:bg-gray-100 transition-colors flex items-center justify-between",children:[r.jsx("span",{className:"font-medium text-gray-900",children:"Two-Factor Authentication"}),r.jsx("span",{className:"text-green-600 text-sm font-semibold",children:"Enabled"})]}),r.jsxs("button",{className:"w-full text-left px-4 py-3 bg-gray-50 rounded-lg hover:bg-gray-100 transition-colors flex items-center justify-between",children:[r.jsx("span",{className:"font-medium text-gray-900",children:"Session History"}),r.jsx("span",{className:"text-gray-400",children:""})]})]})]})]})})},ag=()=>{const[l,u]=c.useState(""),[i,m]=c.useState(!1),[f,p]=c.useState(!1),[g,b]=c.useState(""),w=async R=>{R.preventDefault(),b(""),p(!0);try{await We.post("/password-reset/request",{email:l}),m(!0)}catch(P){const j=P instanceof Error?P.message:"Failed to send reset email.";b(j)}finally{p(!1)}};return r.jsx("div",{className:"min-h-screen w-full flex items-center justify-center p-4",style:{backgroundColor:"#f4f2ee",minHeight:"100vh",width:"100vw"},children:r.jsxs("div",{className:"w-full max-w-md",children:[r.jsx("div",{className:"text-center mb-10",children:r.jsx("img",{src:aa,alt:"Gratly Logo",className:"mx-auto",style:{width:"254px",height:"130px"}})}),r.jsxs("div",{className:"bg-white rounded-2xl shadow-xl p-8 border border-gray-200",children:[r.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-2 text-center",children:"Reset Password"}),r.jsx("p",{className:"text-sm text-gray-600 mb-6 text-center",children:"Enter your email to receive a password reset link."}),r.jsxs("form",{className:"space-y-5",onSubmit:w,children:[r.jsxs("div",{children:[r.jsx("label",{htmlFor:"reset-email",className:"block text-sm font-medium text-gray-700 mb-2",children:"Email Address"}),r.jsx("input",{id:"reset-email",type:"email",value:l,onChange:R=>{u(R.target.value),i&&m(!1)},className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-gray-900 focus:border-transparent outline-none transition-all",placeholder:"you@example.com",required:!0})]}),r.jsx("button",{type:"submit",disabled:f,className:"w-full bg-[#cab99a] text-black py-3 rounded-lg font-semibold hover:bg-[#bfa986] transition-all shadow-lg hover:shadow-xl",children:f?"Sending...":"Send Reset Link"})]}),g?r.jsx("div",{className:"mt-4 rounded-lg border border-rose-200 bg-rose-50 px-4 py-3 text-sm font-semibold text-rose-700",children:g}):null,i?r.jsxs("div",{className:"mt-4 rounded-lg border border-emerald-200 bg-emerald-50 px-4 py-3 text-sm font-semibold text-emerald-700",children:["If an account exists for ",l,", a reset link has been sent."]}):null]})]})})},lg=()=>{const[l]=ih(),u=l.get("token")??"",[i,m]=c.useState(""),[f,p]=c.useState(""),[g,b]=c.useState(!1),[w,R]=c.useState(!1),[P,j]=c.useState(""),[z,K]=c.useState(!1),[J,ee]=c.useState(!1),D=async k=>{if(k.preventDefault(),j(""),K(!1),!u){j("Reset link is missing or invalid.");return}if(!i||!f){j("Please enter and confirm your new password.");return}if(i!==f){j("Passwords do not match.");return}ee(!0);try{await We.post("/password-reset/confirm",{token:u,password:i}),K(!0)}catch(_){const X=_ instanceof Error?_.message:"Failed to reset password.";j(X)}finally{ee(!1)}};return r.jsx("div",{className:"min-h-screen w-full flex items-center justify-center p-4",style:{backgroundColor:"#f4f2ee",minHeight:"100vh",width:"100vw"},children:r.jsxs("div",{className:"w-full max-w-md",children:[r.jsx("div",{className:"text-center mb-10",children:r.jsx("img",{src:aa,alt:"Gratly Logo",className:"mx-auto",style:{width:"254px",height:"130px"}})}),r.jsxs("div",{className:"bg-white rounded-2xl shadow-xl p-8 border border-gray-200",children:[r.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-2 text-center",children:"Set New Password"}),r.jsx("p",{className:"text-sm text-gray-600 mb-6 text-center",children:"Enter your new password below."}),r.jsxs("form",{className:"space-y-5",onSubmit:D,children:[r.jsxs("div",{children:[r.jsx("label",{htmlFor:"new-password",className:"block text-sm font-medium text-gray-700 mb-2",children:"New Password"}),r.jsxs("div",{className:"relative",children:[r.jsx("input",{id:"new-password",type:g?"text":"password",value:i,onChange:k=>m(k.target.value),className:"w-full px-4 py-3 pr-12 border border-gray-300 rounded-lg focus:ring-2 focus:ring-gray-900 focus:border-transparent outline-none transition-all",placeholder:"",required:!0}),r.jsx("button",{type:"button",onClick:()=>b(k=>!k),"aria-label":g?"Hide password":"Show password","aria-pressed":g,className:"absolute right-3 top-1/2 -translate-y-1/2 text-gray-500 hover:text-gray-800 text-sm font-medium",children:g?r.jsxs("svg",{"aria-hidden":"true",viewBox:"0 0 24 24",className:"h-5 w-5",fill:"none",stroke:"currentColor",strokeWidth:"1.75",strokeLinecap:"round",strokeLinejoin:"round",children:[r.jsx("path",{d:"M2.1 12s3.6-6 9.9-6 9.9 6 9.9 6-3.6 6-9.9 6-9.9-6-9.9-6Z"}),r.jsx("path",{d:"M9.9 12a2.1 2.1 0 1 0 4.2 0 2.1 2.1 0 0 0-4.2 0Z"})]}):r.jsxs("svg",{"aria-hidden":"true",viewBox:"0 0 24 24",className:"h-5 w-5",fill:"none",stroke:"currentColor",strokeWidth:"1.75",strokeLinecap:"round",strokeLinejoin:"round",children:[r.jsx("path",{d:"M3 3l18 18"}),r.jsx("path",{d:"M9.8 9.8a2.1 2.1 0 0 0 2.9 2.9"}),r.jsx("path",{d:"M6.2 6.2C4.2 7.6 2.7 9.6 2.1 12c1.4 3.5 5 6 9.9 6 1.6 0 3-.3 4.3-.9"}),r.jsx("path",{d:"M14.1 5.4c2.8.6 5.1 2.6 6.2 5.6-.6 1.4-1.5 2.6-2.7 3.6"})]})})]})]}),r.jsxs("div",{children:[r.jsx("label",{htmlFor:"confirm-password",className:"block text-sm font-medium text-gray-700 mb-2",children:"Confirm Password"}),r.jsxs("div",{className:"relative",children:[r.jsx("input",{id:"confirm-password",type:w?"text":"password",value:f,onChange:k=>p(k.target.value),className:"w-full px-4 py-3 pr-12 border border-gray-300 rounded-lg focus:ring-2 focus:ring-gray-900 focus:border-transparent outline-none transition-all",placeholder:"",required:!0}),r.jsx("button",{type:"button",onClick:()=>R(k=>!k),"aria-label":w?"Hide password":"Show password","aria-pressed":w,className:"absolute right-3 top-1/2 -translate-y-1/2 text-gray-500 hover:text-gray-800 text-sm font-medium",children:w?r.jsxs("svg",{"aria-hidden":"true",viewBox:"0 0 24 24",className:"h-5 w-5",fill:"none",stroke:"currentColor",strokeWidth:"1.75",strokeLinecap:"round",strokeLinejoin:"round",children:[r.jsx("path",{d:"M2.1 12s3.6-6 9.9-6 9.9 6 9.9 6-3.6 6-9.9 6-9.9-6-9.9-6Z"}),r.jsx("path",{d:"M9.9 12a2.1 2.1 0 1 0 4.2 0 2.1 2.1 0 0 0-4.2 0Z"})]}):r.jsxs("svg",{"aria-hidden":"true",viewBox:"0 0 24 24",className:"h-5 w-5",fill:"none",stroke:"currentColor",strokeWidth:"1.75",strokeLinecap:"round",strokeLinejoin:"round",children:[r.jsx("path",{d:"M3 3l18 18"}),r.jsx("path",{d:"M9.8 9.8a2.1 2.1 0 0 0 2.9 2.9"}),r.jsx("path",{d:"M6.2 6.2C4.2 7.6 2.7 9.6 2.1 12c1.4 3.5 5 6 9.9 6 1.6 0 3-.3 4.3-.9"}),r.jsx("path",{d:"M14.1 5.4c2.8.6 5.1 2.6 6.2 5.6-.6 1.4-1.5 2.6-2.7 3.6"})]})})]})]}),r.jsx("button",{type:"submit",disabled:J,className:"w-full bg-[#cab99a] text-black py-3 rounded-lg font-semibold hover:bg-[#bfa986] transition-all shadow-lg hover:shadow-xl",children:J?"Saving...":"Save New Password"})]}),P?r.jsx("div",{className:"mt-4 rounded-lg border border-rose-200 bg-rose-50 px-4 py-3 text-sm font-semibold text-rose-700",children:P}):null,z?r.jsx("div",{className:"mt-4 rounded-lg border border-emerald-200 bg-emerald-50 px-4 py-3 text-sm font-semibold text-emerald-700",children:"Your password has been updated."}):null]})]})})},og=()=>{const l=Hr(),{restaurantKey:u}=Cn(),[i,m]=c.useState(null),[f,p]=c.useState([]),[g,b]=c.useState([]),[w,R]=c.useState(!0),[P,j]=c.useState(""),[z,K]=c.useState(!1),[J,ee]=c.useState(!1),[D]=c.useState(()=>Rr(localStorage.getItem("userId"))),k=u?Number(u):null;c.useEffect(()=>{!D.adminAccess&&!D.superadminAccess&&l("/")},[D,l]),c.useEffect(()=>{if(!k)return;(async()=>{try{R(!0),j("");const[O,E]=await Promise.all([Od(k),Ud(k)]);m(O),p(E),O.recentInvoices&&b(O.recentInvoices)}catch(O){j(O instanceof Error?O.message:"Failed to load billing data")}finally{R(!1)}})()},[k]);const _=async()=>{if(k)try{K(!0),j("");const C=`${window.location.origin}/business/${k}/billing`,E=await zd(k,C,C);E.redirectUrl&&(window.location.href=E.redirectUrl)}catch(C){j(C instanceof Error?C.message:"Failed to start onboarding")}finally{K(!1)}},X=async()=>{if(k)try{ee(!0),j("");const C=await Gd(k);p(C)}catch(C){j(C instanceof Error?C.message:"Failed to refresh payment methods")}finally{ee(!1)}},se=async C=>{if(k)try{j(""),await Bd(k,C),p(O=>O.map(E=>({...E,isPreferred:E.moovPaymentMethodId===C})))}catch(O){j(O instanceof Error?O.message:"Failed to update preferred method")}},ne=C=>{if(!C)return"N/A";try{return new Date(C).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"})}catch{return C}},Y=C=>C?`$${(C/100).toFixed(2)}`:"$0.00",ue=C=>{switch(C?.toLowerCase()){case"paid":case"completed":return"bg-green-50 text-green-700 border-green-200";case"failed":return"bg-red-50 text-red-700 border-red-200";case"unpaid":case"pending":return"bg-yellow-50 text-yellow-700 border-yellow-200";default:return"bg-gray-50 text-gray-700 border-gray-200"}};return w?r.jsx("div",{className:"min-h-screen bg-gray-50 p-8",children:r.jsx("div",{className:"max-w-4xl mx-auto",children:r.jsx("div",{className:"bg-white rounded-xl shadow-md border border-gray-200 p-8",children:r.jsx("p",{className:"text-gray-600",children:"Loading billing information..."})})})}):r.jsx("div",{className:"min-h-screen bg-gray-50",children:r.jsxs("div",{className:"max-w-4xl mx-auto p-8",children:[r.jsxs("div",{className:"mb-8",children:[r.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Billing"}),r.jsx("p",{className:"text-gray-600 mt-2",children:"Manage your billing settings and payment methods"})]}),P&&r.jsx("div",{className:"mb-6 rounded-lg border border-red-200 bg-red-50 px-4 py-3",children:r.jsx("p",{className:"text-sm font-semibold text-red-700",children:P})}),i&&r.jsxs("div",{className:"bg-white rounded-xl shadow-md border border-gray-200 p-6 mb-6",children:[r.jsx("h2",{className:"text-lg font-bold text-gray-900 mb-4",children:"Billing Information"}),r.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-sm text-gray-500",children:"Billing Date"}),r.jsx("p",{className:"text-lg font-semibold text-gray-900",children:i.config?.billingDate?`Day ${i.config.billingDate}`:"Not configured"})]}),r.jsxs("div",{children:[r.jsx("p",{className:"text-sm text-gray-500",children:"Monthly Amount"}),r.jsx("p",{className:"text-lg font-semibold text-gray-900",children:Y(i.config?.billingAmount)})]}),i.upcomingInvoice&&r.jsxs("div",{children:[r.jsx("p",{className:"text-sm text-gray-500",children:"Next Invoice Due"}),r.jsx("p",{className:"text-lg font-semibold text-gray-900",children:ne(i.upcomingInvoice.dueDate)})]}),r.jsxs("div",{children:[r.jsx("p",{className:"text-sm text-gray-500",children:"Status"}),r.jsx("p",{className:"text-lg font-semibold text-gray-900",children:i.config?.paidStatus==="active"?" Active":"Inactive"})]})]})]}),r.jsxs("div",{className:"bg-white rounded-xl shadow-md border border-gray-200 p-6 mb-6",children:[r.jsxs("div",{className:"flex items-center justify-between mb-4",children:[r.jsx("h2",{className:"text-lg font-bold text-gray-900",children:"Payment Methods"}),r.jsx("button",{type:"button",onClick:X,disabled:J,className:"text-xs font-semibold text-gray-900 hover:text-gray-700 disabled:text-gray-400 disabled:cursor-not-allowed",children:J?"Refreshing...":"Refresh"})]}),f.length>0?r.jsx("div",{className:"space-y-2",children:f.map(C=>r.jsxs("div",{className:"flex items-center justify-between rounded-lg bg-gray-50 px-4 py-3",children:[r.jsxs("div",{className:"flex-1",children:[r.jsxs("p",{className:"font-semibold text-gray-900",children:[C.brand||C.methodType,C.last4&&` ${C.last4}`]}),r.jsxs("p",{className:"text-xs text-gray-500",children:[C.isVerified?" Verified":"Not verified"," "," ",C.status]})]}),r.jsxs("div",{className:"flex items-center gap-3",children:[C.isPreferred&&r.jsx("span",{className:"rounded-full bg-blue-100 px-2 py-1 text-[10px] font-semibold text-blue-700",children:"Preferred"}),!C.isPreferred&&r.jsx("button",{type:"button",onClick:()=>se(C.moovPaymentMethodId),className:"text-[10px] font-semibold text-gray-900 hover:text-gray-700",children:"Set preferred"})]})]},C.moovPaymentMethodId))}):r.jsx("p",{className:"text-sm text-gray-500 mb-4",children:"No payment methods on file"}),r.jsx("button",{type:"button",onClick:_,disabled:z,className:"mt-4 w-full rounded-lg bg-gray-900 px-4 py-2 text-sm font-semibold text-white hover:bg-gray-800 disabled:cursor-not-allowed disabled:bg-gray-400",children:z?"Opening...":"Add or Update Payment Method"})]}),r.jsxs("div",{className:"bg-white rounded-xl shadow-md border border-gray-200 p-6",children:[r.jsx("h2",{className:"text-lg font-bold text-gray-900 mb-4",children:"Recent Invoices"}),g.length>0?r.jsx("div",{className:"overflow-x-auto",children:r.jsxs("table",{className:"w-full text-sm",children:[r.jsx("thead",{children:r.jsxs("tr",{className:"border-b border-gray-200",children:[r.jsx("th",{className:"text-left py-2 px-3 font-semibold text-gray-900",children:"Period"}),r.jsx("th",{className:"text-left py-2 px-3 font-semibold text-gray-900",children:"Amount"}),r.jsx("th",{className:"text-left py-2 px-3 font-semibold text-gray-900",children:"Due Date"}),r.jsx("th",{className:"text-left py-2 px-3 font-semibold text-gray-900",children:"Status"}),r.jsx("th",{className:"text-left py-2 px-3 font-semibold text-gray-900",children:"Paid On"})]})}),r.jsx("tbody",{children:g.map(C=>r.jsxs("tr",{className:"border-b border-gray-100 hover:bg-gray-50",children:[r.jsx("td",{className:"py-3 px-3 text-gray-900",children:C.billingPeriod}),r.jsx("td",{className:"py-3 px-3 text-gray-900",children:Y(C.amountCents)}),r.jsx("td",{className:"py-3 px-3 text-gray-600",children:ne(C.dueDate)}),r.jsx("td",{className:"py-3 px-3",children:r.jsx("span",{className:`inline-block rounded-full px-2 py-1 text-[10px] font-semibold border ${ue(C.paymentStatus)}`,children:C.paymentStatus||"pending"})}),r.jsx("td",{className:"py-3 px-3 text-gray-600",children:ne(C.paidAt)})]},C.id))})]})}):r.jsx("p",{className:"text-sm text-gray-500",children:"No invoices yet"})]})]})})};function ig(){const{restaurantKey:l}=Cn(),[u,i]=c.useState("restaurant"),[m,f]=c.useState(!1),[p,g]=c.useState(null),[b,w]=c.useState(null),[R,P]=c.useState(null),[j,z]=c.useState(!0),K=l?Number(l):null,J=Number(localStorage.getItem("userId")||"");c.useEffect(()=>{(async()=>{try{if(z(!0),K){const _=await Zh(K);w(_)}if(J){const _=await eg(J);P(_)}}catch(_){console.error("Failed to load connection status:",_)}finally{z(!1)}})()},[K,J]);const ee=async()=>{if(!K){g("Restaurant ID is required");return}try{f(!0),g(null);const k=`${window.location.origin}/gratly-profile?restaurantKey=${K}`,_=`${window.location.origin}/gratly-profile?restaurantKey=${K}`,X=await qh(K,k,_);X.redirectUrl?window.location.href=X.redirectUrl:g("No onboarding URL returned")}catch(k){g(k instanceof Error?k.message:"Failed to start onboarding"),f(!1)}},D=async()=>{if(!J){g("User ID is required");return}try{f(!0),g(null);const k=`${window.location.origin}/gratly-profile`,_=`${window.location.origin}/gratly-profile`,X=await Wd(J,k,_);X.redirectUrl?window.location.href=X.redirectUrl:g("No onboarding URL returned")}catch(k){g(k instanceof Error?k.message:"Failed to start onboarding"),f(!1)}};return r.jsx("div",{className:"min-h-screen bg-gray-50 p-6",children:r.jsxs("div",{className:"max-w-2xl mx-auto",children:[r.jsxs("div",{className:"mb-8",children:[r.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Moov Account Setup"}),r.jsx("p",{className:"mt-2 text-gray-600",children:"Complete identity verification and link payment methods"})]}),p&&r.jsx("div",{className:"mb-6 rounded-lg border border-red-200 bg-red-50 p-4",children:r.jsxs("p",{className:"text-sm text-red-700",children:[r.jsx("strong",{children:"Error:"})," ",p]})}),r.jsxs("div",{className:"rounded-2xl border border-gray-200 bg-white shadow-sm",children:[r.jsxs("div",{className:"flex border-b border-gray-200",children:[r.jsx("button",{onClick:()=>i("restaurant"),className:`flex-1 px-6 py-4 text-center font-semibold transition ${u==="restaurant"?"border-b-2 border-blue-600 text-blue-600":"text-gray-600 hover:text-gray-900"}`,children:"Restaurant Setup"}),r.jsx("button",{onClick:()=>i("employee"),className:`flex-1 px-6 py-4 text-center font-semibold transition ${u==="employee"?"border-b-2 border-blue-600 text-blue-600":"text-gray-600 hover:text-gray-900"}`,children:"Employee Setup"})]}),r.jsx("div",{className:"p-6",children:j?r.jsxs("div",{className:"py-12 text-center",children:[r.jsx("div",{className:"inline-block h-8 w-8 animate-spin rounded-full border-4 border-gray-200 border-t-gray-900"}),r.jsx("p",{className:"mt-4 text-gray-600",children:"Loading setup status..."})]}):u==="restaurant"?r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{children:[r.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"Restaurant Moov Account"}),r.jsx("p",{className:"mt-2 text-sm text-gray-600",children:"Set up your restaurant's Moov account to accept payments and manage payouts."})]}),b?.connected?r.jsxs("div",{className:"rounded-lg border border-emerald-200 bg-emerald-50 p-4",children:[r.jsx("p",{className:"text-sm font-semibold text-emerald-900",children:" Account Connected"}),r.jsxs("p",{className:"mt-2 text-sm text-emerald-700",children:["Moov Account ID:"," ",r.jsx("code",{className:"break-all",children:b.moovAccountId||b.moov_account_id})]}),r.jsxs("p",{className:"mt-1 text-sm text-emerald-700",children:["Status: ",b.onboardingStatus||b.onboarding_status]}),(b.kyb_status||b.status)&&r.jsxs("p",{className:"mt-1 text-sm text-emerald-700",children:["KYB: ",b.kyb_status||b.status]})]}):r.jsxs(r.Fragment,{children:[r.jsxs("div",{className:"rounded-lg bg-blue-50 p-4",children:[r.jsx("p",{className:"text-sm text-gray-700",children:"You'll be guided through Moov's hosted onboarding to:"}),r.jsxs("ul",{className:"mt-3 list-inside list-disc space-y-2 text-sm text-gray-700",children:[r.jsx("li",{children:"Verify business information (KYB)"}),r.jsx("li",{children:"Link a verified bank account"}),r.jsx("li",{children:"Add optional payment methods (card)"})]})]}),r.jsx("button",{onClick:ee,disabled:m||!K,className:"w-full rounded-lg bg-blue-600 px-6 py-3 font-semibold text-white transition hover:bg-blue-700 disabled:cursor-not-allowed disabled:opacity-50",children:m?"Starting...":"Start Restaurant Onboarding"})]})]}):r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{children:[r.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"Employee Moov Account"}),r.jsx("p",{className:"mt-2 text-sm text-gray-600",children:"Set up your Moov account to receive instant payouts from tips and shifts."})]}),R?.connected?r.jsxs("div",{className:"rounded-lg border border-emerald-200 bg-emerald-50 p-4",children:[r.jsx("p",{className:"text-sm font-semibold text-emerald-900",children:" Account Connected"}),r.jsxs("p",{className:"mt-2 text-sm text-emerald-700",children:["Moov Account ID:"," ",r.jsx("code",{className:"break-all",children:R.moovAccountId||R.moov_account_id})]}),r.jsxs("p",{className:"mt-1 text-sm text-emerald-700",children:["Status: ",R.onboardingStatus||R.onboarding_status]}),(R.kyc_status||R.status)&&r.jsxs("p",{className:"mt-1 text-sm text-emerald-700",children:["KYC: ",R.kyc_status||R.status]})]}):r.jsxs(r.Fragment,{children:[r.jsxs("div",{className:"rounded-lg bg-blue-50 p-4",children:[r.jsx("p",{className:"text-sm text-gray-700",children:"You'll be guided through Moov's hosted onboarding to:"}),r.jsxs("ul",{className:"mt-3 list-inside list-disc space-y-2 text-sm text-gray-700",children:[r.jsx("li",{children:"Verify your identity (KYC)"}),r.jsx("li",{children:"Link a bank account (for instant payouts)"}),r.jsx("li",{children:"Add optional debit card for same-day deposits"})]})]}),r.jsx("button",{onClick:D,disabled:m||!J,className:"w-full rounded-lg bg-blue-600 px-6 py-3 font-semibold text-white transition hover:bg-blue-700 disabled:cursor-not-allowed disabled:opacity-50",children:m?"Starting...":"Start Employee Onboarding"})]})]})})]}),r.jsxs("div",{className:"mt-8 rounded-2xl border border-gray-200 bg-white p-6 shadow-sm",children:[r.jsx("h2",{className:"mb-4 text-lg font-semibold text-gray-900",children:"What Happens Next?"}),r.jsxs("div",{className:"space-y-4 text-sm text-gray-600",children:[r.jsxs("div",{children:[r.jsx("p",{className:"font-semibold text-gray-900",children:"After Setup"}),r.jsx("p",{children:"Once your account is verified, you'll be able to receive instant payouts and manage your payment methods."})]}),r.jsxs("div",{children:[r.jsx("p",{className:"font-semibold text-gray-900",children:"Verification Timeline"}),r.jsx("p",{children:"Most accounts are verified immediately. Some require 1-2 business days for manual review."})]}),r.jsxs("div",{children:[r.jsx("p",{className:"font-semibold text-gray-900",children:"Support"}),r.jsx("p",{children:"Questions? Contact support@gratly.com or visit the Moov docs."})]})]})]})]})})}const ud=({children:l})=>r.jsx(r.Fragment,{children:l}),ug="/assets/homelogo-UWKJn8uF.png",cd="/assets/approvalslogo-CX7qrCmA.png",dd="/assets/shiftpayoutlogo-ThkOO1jm.png",md="/assets/reportslogo-6o-zYyC2.png",fd="/assets/teamlogo--ipUNj-5.png",pd="/assets/settingslogo-QseNGox_.png";async function cg(l){return We.get(`/restaurant-selection?user_id=${l}`)}async function dg(l,u,i){const m={userId:l};return u!=null&&(m.restaurantId=u),i&&(m.restaurantGuid=i),We.post("/restaurant-selection",{...m})}const mg=()=>{const[l,u]=c.useState(""),[i,m]=c.useState(!1),[f,p]=c.useState(!1),[g,b]=c.useState(!1),w=c.useRef(null),{userSlug:R}=Cn(),P=dr(),j=Hr();c.useEffect(()=>{(async()=>{try{const ge=window.fs;if(!ge?.readFile)return;const He=await ge.readFile("image.png"),lt=new Blob([He],{type:"image/png"}),ct=URL.createObjectURL(lt);u(ct)}catch(ge){console.error("Error loading logo:",ge)}})()},[]),c.useEffect(()=>{const te=ge=>{w.current&&!w.current.contains(ge.target)&&b(!1)};return document.addEventListener("mousedown",te),()=>document.removeEventListener("mousedown",te)},[]);const z=localStorage.getItem("userName")||"User",K=localStorage.getItem("userId")||"",J=localStorage.getItem("userSlug")||"",ee=localStorage.getItem("restaurantName")||"",D=localStorage.getItem("selectedRestaurantId")||"",k=z.split(" ").filter(Boolean).map(te=>te[0]?.toUpperCase()).slice(0,2).join("")||"U",_=R||J,[X,se]=c.useState(()=>Rr(K)),[ne,Y]=c.useState(!1),ue=X.adminAccess||X.superadminAccess,C=X.superadminAccess,O=`/${_}`,E=i&&!f,fe=_??"default",[xe,de]=c.useState([]),[ke,Ue]=c.useState(""),[$e,Ee]=c.useState(!1),[B,ae]=c.useState(!1),[Q,y]=c.useState(null),M=(C||X.adminAccess)&&xe.length>1;c.useEffect(()=>{let te=!0;const ge=Rr(K);te&&se(ge);const He=Number(K);return!Number.isFinite(He)||He<=0?(Y(!0),()=>{te=!1}):(fs(He).then(lt=>{te&&(se({...ge,...lt}),localStorage.setItem(`employeePermissions:${He}`,JSON.stringify(lt)),Y(!0))}).catch(()=>{Y(!0)}),()=>{te=!1})},[K,z]),c.useEffect(()=>{if(!M)return;const te=Number(K);if(!Number.isFinite(te)||te<=0)return;Ee(!0),y(null),(C?Ad(te).then(He=>He.map(lt=>({restaurantId:lt.restaurantId??null,restaurantGuid:lt.restaurantGuid??null,restaurantName:lt.restaurantName??null}))):cg(te)).then(He=>{de(He)}).catch(He=>{y(He instanceof Error?He.message:"Failed to load restaurants."),de([])}).finally(()=>{Ee(!1)})},[M,K,C]),c.useEffect(()=>{if(!xe.length||ke)return;const te=D;if(!te)return;const ge=xe.find(He=>He.restaurantId&&String(He.restaurantId)===String(te));ge?.restaurantGuid?Ue(`guid:${ge.restaurantGuid}`):ge?.restaurantId&&Ue(String(ge.restaurantId))},[xe,D,ke]);const Ie=te=>!te||te==="home"||te==="reports"||te==="profile"?!0:te==="settings"?C:ue?!0:te==="approvals"?X.managerAccess||X.approvePayouts:te==="shift-payout"?X.managerAccess||X.createPayoutSchedules:te==="team"?X.managerAccess||X.manageTeam:te==="billing"?ue:!1,T=async te=>{const ge=te.target.value;if(Ue(ge),y(null),!ge)return;const He=Number(K);if(!Number.isFinite(He)||He<=0){y("Missing user context.");return}const lt=xe.find(ot=>ot.restaurantId?String(ot.restaurantId)===ge:ot.restaurantGuid?`guid:${ot.restaurantGuid}`===ge:!1);if(!lt){y("Selected restaurant is unavailable.");return}const ct=D;if(!(ct&&lt.restaurantId&&String(ct)===String(lt.restaurantId))){ae(!0);try{const ot=await dg(He,lt.restaurantId??null,lt.restaurantGuid??null),vr=ot.restaurantName||xe.find(Bt=>Bt.restaurantId===ot.restaurantId)?.restaurantName||"";if(!ot.restaurantId)throw new Error("Restaurant selection did not return an ID.");localStorage.setItem("selectedRestaurantId",String(ot.restaurantId)),localStorage.setItem("restaurantKey",String(ot.restaurantId)),vr?localStorage.setItem("restaurantName",vr):localStorage.removeItem("restaurantName"),de(Bt=>Bt.map(Kt=>Kt.restaurantGuid&&Kt.restaurantGuid===ot.restaurantGuid?{...Kt,restaurantId:ot.restaurantId}:Kt)),Ue(String(ot.restaurantId));try{const Bt=await fs(He);se(Kt=>({...Kt,...Bt})),localStorage.setItem(`employeePermissions:${He}`,JSON.stringify(Bt))}catch(Bt){console.warn("Failed to refresh permissions:",Bt)}}catch(ot){y(ot instanceof Error?ot.message:"Failed to assign restaurant.")}finally{ae(!1)}}},L=$e?"Loading restaurants...":xe.length?"Select restaurant":"No restaurants available",F=$e||B||xe.length===0,ce=c.useMemo(()=>[{label:"Home",to:`${O}/home`,permissionKey:"home",icon:r.jsx("img",{src:ug,alt:"Home",className:"h-8 w-8 object-contain"})},{label:"Approvals",to:`${O}/approvals`,permissionKey:"approvals",icon:r.jsx("span",{"aria-hidden":"true",className:`inline-block ${E?"h-7 w-7":"h-8 w-8"}`,style:{backgroundColor:"currentColor",WebkitMaskImage:`url(${cd})`,WebkitMaskRepeat:"no-repeat",WebkitMaskPosition:"center",WebkitMaskSize:"100% 100%",maskImage:`url(${cd})`,maskRepeat:"no-repeat",maskPosition:"center",maskSize:"100% 100%"}})},{label:"Shift Payout",to:`${O}/shift-payout`,permissionKey:"shift-payout",icon:r.jsx("span",{"aria-hidden":"true",className:`inline-block ${E?"h-7 w-7":"h-8 w-8"}`,style:{backgroundColor:"currentColor",WebkitMaskImage:`url(${dd})`,WebkitMaskRepeat:"no-repeat",WebkitMaskPosition:"center",WebkitMaskSize:"100% 100%",maskImage:`url(${dd})`,maskRepeat:"no-repeat",maskPosition:"center",maskSize:"100% 100%"}})},{label:"Team",to:`${O}/team`,permissionKey:"team",icon:r.jsx("span",{"aria-hidden":"true",className:`inline-block ${E?"h-7 w-7":"h-8 w-8"}`,style:{backgroundColor:"currentColor",WebkitMaskImage:`url(${fd})`,WebkitMaskRepeat:"no-repeat",WebkitMaskPosition:"center",WebkitMaskSize:"100% 100%",maskImage:`url(${fd})`,maskRepeat:"no-repeat",maskPosition:"center",maskSize:"100% 100%"}})},{label:"Reports",to:`${O}/reports`,permissionKey:"reports",icon:r.jsx("span",{"aria-hidden":"true",className:`inline-flex items-center justify-center self-center ${E?"h-10 w-10":"h-11 w-11"}`,style:{backgroundColor:"currentColor",WebkitMaskImage:`url(${md})`,WebkitMaskRepeat:"no-repeat",WebkitMaskPosition:"center",WebkitMaskSize:"100% 100%",maskImage:`url(${md})`,maskRepeat:"no-repeat",maskPosition:"center",maskSize:"100% 100%"}})},{label:"Settings",to:`${O}/settings`,permissionKey:"settings",icon:r.jsx("span",{"aria-hidden":"true",className:`inline-block ${E?"h-7 w-7":"h-8 w-8"}`,style:{backgroundColor:"currentColor",WebkitMaskImage:`url(${pd})`,WebkitMaskRepeat:"no-repeat",WebkitMaskPosition:"center",WebkitMaskSize:"100% 100%",maskImage:`url(${pd})`,maskRepeat:"no-repeat",maskPosition:"center",maskSize:"100% 100%"}})}],[O,E]),me=c.useMemo(()=>ce.filter(te=>Ie(te.permissionKey)),[ce,X,ue]);return c.useEffect(()=>{if(!P.pathname.startsWith(O)||!ne)return;const te=P.pathname.slice(O.length).split("/").filter(Boolean)[0];if(te&&!Ie(te)){const ge=me[0]?.to||`${O}/profile`;ge!==P.pathname&&j(ge,{replace:!0})}},[me,O,P.pathname,j,X]),r.jsxs("div",{className:"h-screen w-full overflow-hidden",style:{backgroundColor:"#f4f2ee"},children:[r.jsxs("div",{className:"bg-white border-b border-gray-200 px-6 flex items-center justify-between shadow-sm fixed top-0 left-0 right-0 z-40 h-16",children:[l?r.jsx("img",{src:l,alt:"Gratly Logo",className:"h-12"}):r.jsx("img",{src:aa,alt:"Gratly Logo",className:"h-12"}),M?r.jsx("div",{className:"absolute left-1/2 -translate-x-1/2",children:r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("span",{className:"text-[11px] font-semibold uppercase tracking-wide text-gray-500",children:"Restaurant"}),r.jsxs("select",{value:ke,onChange:T,disabled:F,className:"h-9 w-80 rounded-lg border border-gray-200 bg-white px-3 text-sm text-gray-900 focus:border-gray-400 focus:outline-none disabled:cursor-not-allowed disabled:opacity-60",children:[r.jsx("option",{value:"",children:L}),xe.map(te=>{const ge=te.restaurantId?String(te.restaurantId):`guid:${te.restaurantGuid??"unknown"}`;return r.jsxs("option",{value:ge,children:[te.restaurantName??"Unknown Restaurant",te.restaurantId?` (ID ${te.restaurantId})`:" (Not onboarded)"]},ge)})]}),Q?r.jsx("span",{className:"text-xs font-semibold text-red-600",children:Q}):null]})}):ee?r.jsx("div",{className:"absolute left-1/2 -translate-x-1/2 text-center text-lg font-semibold text-gray-700 max-w-[40vw] truncate",children:ee}):null,r.jsxs("div",{className:"relative",ref:w,children:[r.jsxs("button",{type:"button",onClick:()=>b(te=>!te),className:"flex items-center gap-3 rounded-full border border-gray-200 bg-white px-3 py-2 shadow-sm hover:bg-gray-50",children:[r.jsx("span",{className:"flex h-9 w-9 items-center justify-center rounded-full bg-[#cab99a] text-sm font-semibold text-black",children:k}),r.jsx("span",{className:"text-sm font-semibold text-gray-900",children:z}),r.jsx("span",{className:"text-sm text-gray-500",children:""})]}),g&&r.jsxs("div",{className:"absolute right-0 mt-2 w-48 rounded-lg border border-gray-200 bg-white shadow-lg",children:[r.jsx(ms,{to:`${O}/profile`,className:"block w-full px-4 py-2 text-left text-sm text-gray-700 hover:bg-gray-100",onClick:()=>b(!1),children:"Profile"}),ue?r.jsx(ms,{to:`${O}/billing`,className:"block w-full px-4 py-2 text-left text-sm text-gray-700 hover:bg-gray-100",onClick:()=>b(!1),children:"Billing"}):null,r.jsx("button",{type:"button",className:"w-full px-4 py-2 text-left text-sm text-gray-700 hover:bg-gray-100",onClick:()=>j("/login"),children:"Sign Out"})]})]})]}),r.jsxs("div",{className:"flex",children:[r.jsxs("div",{className:`bg-white border-r border-gray-200 p-6 fixed top-16 left-0 h-[calc(100vh-4rem)] overflow-y-auto transition-all duration-200 ${i&&!f?"w-20":"w-64"}`,onMouseEnter:()=>p(!0),onMouseLeave:()=>p(!1),onClick:()=>{i&&m(!1)},children:[r.jsx("div",{className:`flex ${i?"justify-center":"justify-end"} mb-4`,children:r.jsx("button",{type:"button",onClick:te=>{te.stopPropagation(),m(ge=>{const He=!ge;return He&&p(!1),He})},className:"inline-flex h-6 w-6 items-center justify-center bg-transparent border-0 p-0 text-black hover:text-black dark:text-black dark:hover:text-black","aria-label":i?"Expand sidebar":"Collapse sidebar",children:r.jsxs("span",{className:"flex flex-col items-center gap-1",children:[r.jsx("span",{className:"block h-0.5 w-4 bg-current"}),r.jsx("span",{className:"block h-0.5 w-4 bg-current"}),r.jsx("span",{className:"block h-0.5 w-4 bg-current"})]})})}),r.jsx("nav",{className:"space-y-2",children:me.map(te=>{const ge=P.pathname===te.to;return r.jsx(ms,{to:te.to,className:`w-full text-left py-3 font-medium transition-all block ${ge?`bg-[#cab99a] text-gray-900${E?"":" shadow-md"}`:"text-gray-700 hover:bg-[#e6d7b8] hover:!text-black visited:text-gray-700"} ${E?"px-0 -ml-1 w-[calc(100%+0.5rem)] rounded-md":"px-4 rounded-lg"}`,children:r.jsxs("span",{className:"inline-flex items-center gap-3",children:[r.jsx("span",{className:"inline-flex h-11 w-11 shrink-0 items-center justify-center",children:te.icon}),(!i||f)&&r.jsx("span",{children:te.label})]})},te.label)})})]}),r.jsx("div",{className:`flex-1 mt-16 h-[calc(100vh-4rem)] overflow-y-auto ${i&&!f?"ml-20":"ml-64"}`,children:r.jsx(Ip,{},fe)})]})]})},fg=({children:l})=>{const{userSlug:u}=Cn(),i=localStorage.getItem("userId")||"",[m,f]=c.useState(()=>i?Rr(i).superadminAccess?!0:null:!1);if(c.useEffect(()=>{if(!i){f(!1);return}const p=Number(i);if(!Number.isFinite(p)){f(!1);return}m!==!0&&fs(p).then(g=>{localStorage.setItem(`employeePermissions:${p}`,JSON.stringify(g)),f(!!g.superadminAccess)}).catch(()=>{const g=Rr(i);f(!!g.superadminAccess)})},[i]),m===null)return r.jsx("div",{className:"mx-auto w-full max-w-3xl px-6 py-10 text-sm text-gray-600",children:"Checking superadmin access..."});if(!m){const p=u?`/${u}/home`:"/login";return r.jsx(_d,{to:p,replace:!0})}return r.jsx(r.Fragment,{children:l})},hd=({children:l})=>{const{userSlug:u}=Cn(),i=localStorage.getItem("userId")||"",[m,f]=c.useState(()=>{if(!i)return!1;const p=Rr(i);return p.adminAccess||p.superadminAccess?!0:null});if(c.useEffect(()=>{if(!i){f(!1);return}const p=Number(i);if(!Number.isFinite(p)){f(!1);return}m!==!0&&fs(p).then(g=>{localStorage.setItem(`employeePermissions:${p}`,JSON.stringify(g)),f(!!(g.adminAccess||g.superadminAccess))}).catch(()=>{const g=Rr(i);f(!!(g.adminAccess||g.superadminAccess))})},[i]),m===null)return r.jsx("div",{className:"mx-auto w-full max-w-3xl px-6 py-10 text-sm text-gray-600",children:"Checking admin access..."});if(!m){const p=u?`/${u}/home`:"/login";return r.jsx(_d,{to:p,replace:!0})}return r.jsx(r.Fragment,{children:l})},gd=()=>{const l=dr(),u=Hr();return c.useEffect(()=>{const i=localStorage.getItem("userSlug");if(!i){u("/login",{replace:!0});return}const f=l.pathname.split("/").slice(3).join("/")||"home";u(`/${i}/${f}`,{replace:!0})},[l,u]),r.jsx("div",{children:"Redirecting..."})};function pg(){return r.jsxs(Tp,{children:[r.jsx(_t,{path:"/",element:r.jsx(ed,{})}),r.jsx(_t,{path:"/login",element:r.jsx(ed,{})}),r.jsx(_t,{path:"/forgot-password",element:r.jsx(ag,{})}),r.jsx(_t,{path:"/reset-password",element:r.jsx(lg,{})}),r.jsx(_t,{path:"/signup",element:r.jsx(hh,{})}),r.jsxs(_t,{path:"/:userSlug",element:r.jsx(ud,{children:r.jsx(mg,{})}),children:[r.jsx(_t,{path:"home",element:r.jsx(Rh,{})}),r.jsx(_t,{path:"approvals",element:r.jsx(Qh,{})}),r.jsx(_t,{path:"shift-payout",element:r.jsx(Jh,{})}),r.jsx(_t,{path:"team",element:r.jsx($h,{})}),r.jsx(_t,{path:"team/:employeeGuid",element:r.jsx(Dh,{})}),r.jsx(_t,{path:"reports",element:r.jsx(Ah,{})}),r.jsx(_t,{path:"billing",element:r.jsx(hd,{children:r.jsx(Wh,{})})}),r.jsx(_t,{path:"settings",element:r.jsx(fg,{children:r.jsx(zh,{})})}),r.jsx(_t,{path:"admin/billing",element:r.jsx(hd,{children:r.jsx(og,{})})}),r.jsx(_t,{path:"moov/onboarding",element:r.jsx(ud,{children:r.jsx(ig,{})})}),r.jsx(_t,{path:"profile",element:r.jsx(sg,{})})]}),r.jsx(_t,{path:"/business/:restaurantKey/*",element:r.jsx(gd,{})}),r.jsx(_t,{path:"/employees/:employeeId/*",element:r.jsx(gd,{})})]})}Tf.createRoot(document.getElementById("root")).render(r.jsx(c.StrictMode,{children:r.jsx(nh,{children:r.jsx(pg,{})})}));
